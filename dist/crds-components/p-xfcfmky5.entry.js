import{r as t,h as e,g as n}from"./p-4c83963e.js";import{L as r,C as i,U as s}from"./p-7176f536.js";var o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=10,c=2;function h(t){return function t(e,n){switch(a(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,n){if(-1!==n.indexOf(e))return"[Circular]";var r=[].concat(n,[e]),i=function(t){var e=t[String(o)];return"function"==typeof e?e:"function"==typeof t.inspect?t.inspect:void 0}(e);if(void 0!==i){var s=i.call(e);if(s!==e)return"string"==typeof s?s:t(s,r)}else if(Array.isArray(e))return function(e,n){if(0===e.length)return"[]";if(n.length>c)return"[Array]";for(var r=Math.min(u,e.length),i=e.length-r,s=[],o=0;o<r;++o)s.push(t(e[o],n));return 1===i?s.push("... 1 more item"):i>1&&s.push("... ".concat(i," more items")),"["+s.join(", ")+"]"}(e,r);return function(e,n){var r=Object.keys(e);return 0===r.length?"{}":n.length>c?"["+function(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"==typeof t.constructor){var n=t.constructor.name;if("string"==typeof n&&""!==n)return n}return e}(e)+"]":"{ "+r.map(function(r){var i=t(e[r],n);return r+": "+i}).join(", ")+" }"}(e,r)}(e,n);default:return String(e)}}(t,[])}function l(t,e){if(!Boolean(t))throw new Error(e)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.prototype.toString;t.prototype.toJSON=e,t.prototype.inspect=e,o&&(t.prototype[o]=e)}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n,r=/\r\n|[\n\r]/g,i=1,s=e+1;(n=r.exec(t.body))&&n.index<e;)i+=1,s=e+1-(n.index+n[0].length);return{line:i,column:s}}function g(t){return v(t.source,p(t.source,t.start))}function v(t,e){var n=t.locationOffset.column-1,r=m(n)+t.body,i=e.line-1,s=e.line+(t.locationOffset.line-1),o=e.column+(1===e.line?n:0),a="".concat(t.name,":").concat(s,":").concat(o,"\n"),u=r.split(/\r\n|[\n\r]/g),c=u[i];if(c.length>120){for(var h=Math.floor(o/80),l=o%80,f=[],d=0;d<c.length;d+=80)f.push(c.slice(d,d+80));return a+y([["".concat(s),f[0]]].concat(f.slice(1,h+1).map(function(t){return["",t]}),[[" ",m(l-1)+"^"],["",f[h+1]]]))}return a+y([["".concat(s-1),u[i-1]],["".concat(s),c],["",m(o-1)+"^"],["".concat(s+1),u[i+1]]])}function y(t){var e=t.filter(function(t){return void 0!==t[1]}),n=Math.max.apply(Math,e.map(function(t){return t[0].length}));return e.map(function(t){var e,r=t[1];return m(n-(e=t[0]).length)+e+(r?" | "+r:" |")}).join("\n")}function m(t){return Array(t+1).join(" ")}function b(t,e,n,r,i,s,o){var a=Array.isArray(e)?0!==e.length?e:void 0:e?[e]:void 0,u=n;if(!u&&a){var c=a[0];u=c&&c.loc&&c.loc.source}var h,l=r;!l&&a&&(l=a.reduce(function(t,e){return e.loc&&t.push(e.loc.start),t},[])),l&&0===l.length&&(l=void 0),r&&n?h=r.map(function(t){return p(n,t)}):a&&(h=a.reduce(function(t,e){return e.loc&&t.push(p(e.loc.source,e.loc.start)),t},[]));var f,g=o;if(null==g&&null!=s){var v=s.extensions;"object"==d(f=v)&&null!==f&&(g=v)}Object.defineProperties(this,{message:{value:t,enumerable:!0,writable:!0},locations:{value:h||void 0,enumerable:Boolean(h)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:u||void 0},positions:{value:l||void 0},originalError:{value:s},extensions:{value:g||void 0,enumerable:Boolean(g)}}),s&&s.stack?Object.defineProperty(this,"stack",{value:s.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,b):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}function w(t,e,n){return new b("Syntax Error: ".concat(n),void 0,t,[e])}b.prototype=Object.create(Error.prototype,{constructor:{value:b},name:{value:"GraphQLError"},toString:{value:function(){return function(t){var e=t.message;if(t.nodes)for(var n=0,r=t.nodes;n<r.length;n++){var i=r[n];i.loc&&(e+="\n\n"+g(i.loc))}else if(t.source&&t.locations)for(var s=0,o=t.locations;s<o.length;s++){e+="\n\n"+v(t.source,o[s])}return e}(this)}}});var S=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),E=function(t,e,n){this.body=t,this.name=e||"GraphQL request",this.locationOffset=n||{line:1,column:1},this.locationOffset.line>0||l(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||l(0,"column in locationOffset is 1-indexed and must be positive")};function x(t){var e=t.split(/\r\n|[\n\r]/g),n=function(t){for(var e=null,n=1;n<t.length;n++){var r=t[n],i=A(r);if(i!==r.length&&(null===e||i<e)&&0===(e=i))break}return null===e?0:e}(e);if(0!==n)for(var r=1;r<e.length;r++)e[r]=e[r].slice(n);for(;e.length>0&&F(e[0]);)e.shift();for(;e.length>0&&F(e[e.length-1]);)e.pop();return e.join("\n")}function A(t){for(var e=0;e<t.length&&(" "===t[e]||"\t"===t[e]);)e++;return e}function F(t){return A(t)===t.length}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(E.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var T=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function C(){return this.lastToken=this.token,this.token=this.lookahead()}function k(){var t=this.token;if(t.kind!==T.EOF)do{t=t.next||(t.next=R(this,t))}while(t.kind===T.COMMENT);return t}function I(t,e,n,r,i,s,o){this.kind=t,this.start=e,this.end=n,this.line=r,this.column=i,this.value=o,this.prev=s,this.next=null}function O(t){return isNaN(t)?T.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function R(t,e){var n=t.source,r=n.body,i=r.length,s=function(t,n,r){for(var i=t.length,s=e.end;s<i;){var o=t.charCodeAt(s);if(9===o||32===o||44===o||65279===o)++s;else if(10===o)++s,++r.line,r.lineStart=s;else{if(13!==o)break;10===t.charCodeAt(s+1)?s+=2:++s,++r.line,r.lineStart=s}}return s}(r,0,t),o=t.line,a=1+s-t.lineStart;if(s>=i)return new I(T.EOF,i,i,o,a,e);var u=r.charCodeAt(s);switch(u){case 33:return new I(T.BANG,s,s+1,o,a,e);case 35:return function(t,e,n,r,i){var s,o=t.body,a=e;do{s=o.charCodeAt(++a)}while(!isNaN(s)&&(s>31||9===s));return new I(T.COMMENT,e,a,n,r,i,o.slice(e+1,a))}(n,s,o,a,e);case 36:return new I(T.DOLLAR,s,s+1,o,a,e);case 38:return new I(T.AMP,s,s+1,o,a,e);case 40:return new I(T.PAREN_L,s,s+1,o,a,e);case 41:return new I(T.PAREN_R,s,s+1,o,a,e);case 46:if(46===r.charCodeAt(s+1)&&46===r.charCodeAt(s+2))return new I(T.SPREAD,s,s+3,o,a,e);break;case 58:return new I(T.COLON,s,s+1,o,a,e);case 61:return new I(T.EQUALS,s,s+1,o,a,e);case 64:return new I(T.AT,s,s+1,o,a,e);case 91:return new I(T.BRACKET_L,s,s+1,o,a,e);case 93:return new I(T.BRACKET_R,s,s+1,o,a,e);case 123:return new I(T.BRACE_L,s,s+1,o,a,e);case 124:return new I(T.PIPE,s,s+1,o,a,e);case 125:return new I(T.BRACE_R,s,s+1,o,a,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(t,e,n,r,i){for(var s=t.body,o=s.length,a=e+1,u=0;a!==o&&!isNaN(u=s.charCodeAt(a))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++a;return new I(T.NAME,e,a,n,r,i,s.slice(e,a))}(n,s,o,a,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(t,e,n,r,i,s){var o=t.body,a=n,u=e,c=!1;if(45===a&&(a=o.charCodeAt(++u)),48===a){if((a=o.charCodeAt(++u))>=48&&a<=57)throw w(t,u,"Invalid number, unexpected digit after 0: ".concat(O(a),"."))}else u=D(t,u,a),a=o.charCodeAt(u);if(46===a&&(c=!0,a=o.charCodeAt(++u),u=D(t,u,a),a=o.charCodeAt(u)),69!==a&&101!==a||(c=!0,43!==(a=o.charCodeAt(++u))&&45!==a||(a=o.charCodeAt(++u)),u=D(t,u,a),a=o.charCodeAt(u)),46===a||69===a||101===a)throw w(t,u,"Invalid number, expected digit but got: ".concat(O(a),"."));return new I(c?T.FLOAT:T.INT,e,u,r,i,s,o.slice(e,u))}(n,s,u,o,a,e);case 34:return 34===r.charCodeAt(s+1)&&34===r.charCodeAt(s+2)?function(t,e,n,r,i,s){for(var o=t.body,a=e+3,u=a,c=0,h="";a<o.length&&!isNaN(c=o.charCodeAt(a));){if(34===c&&34===o.charCodeAt(a+1)&&34===o.charCodeAt(a+2))return h+=o.slice(u,a),new I(T.BLOCK_STRING,e,a+3,n,r,i,x(h));if(c<32&&9!==c&&10!==c&&13!==c)throw w(t,a,"Invalid character within String: ".concat(O(c),"."));10===c?(++a,++s.line,s.lineStart=a):13===c?(10===o.charCodeAt(a+1)?a+=2:++a,++s.line,s.lineStart=a):92===c&&34===o.charCodeAt(a+1)&&34===o.charCodeAt(a+2)&&34===o.charCodeAt(a+3)?(h+=o.slice(u,a)+'"""',u=a+=4):++a}throw w(t,a,"Unterminated string.")}(n,s,o,a,e,t):function(t,e,n,r,i){for(var s,o,a,u,c=t.body,h=e+1,l=h,f=0,d="";h<c.length&&!isNaN(f=c.charCodeAt(h))&&10!==f&&13!==f;){if(34===f)return d+=c.slice(l,h),new I(T.STRING,e,h+1,n,r,i,d);if(f<32&&9!==f)throw w(t,h,"Invalid character within String: ".concat(O(f),"."));if(++h,92===f){switch(d+=c.slice(l,h-1),f=c.charCodeAt(h)){case 34:d+='"';break;case 47:d+="/";break;case 92:d+="\\";break;case 98:d+="\b";break;case 102:d+="\f";break;case 110:d+="\n";break;case 114:d+="\r";break;case 116:d+="\t";break;case 117:var p=(s=c.charCodeAt(h+1),o=c.charCodeAt(h+2),a=c.charCodeAt(h+3),u=c.charCodeAt(h+4),N(s)<<12|N(o)<<8|N(a)<<4|N(u));if(p<0){var g=c.slice(h+1,h+5);throw w(t,h,"Invalid character escape sequence: \\u".concat(g,"."))}d+=String.fromCharCode(p),h+=4;break;default:throw w(t,h,"Invalid character escape sequence: \\".concat(String.fromCharCode(f),"."))}l=++h}}throw w(t,h,"Unterminated string.")}(n,s,o,a,e)}throw w(n,s,function(t){return t<32&&9!==t&&10!==t&&13!==t?"Cannot contain the invalid character ".concat(O(t),"."):39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(O(t),".")}(u))}function D(t,e,n){var r=t.body,i=e,s=n;if(s>=48&&s<=57){do{s=r.charCodeAt(++i)}while(s>=48&&s<=57);return i}throw w(t,i,"Invalid number, expected digit but got: ".concat(O(s),"."))}function N(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}f(I,function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}});var _=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),P=function(){function t(t,e){var n="string"==typeof t?new E(t):t;n instanceof E||l(0,"Must provide Source. Received: ".concat(h(n))),this._lexer=function(t){var e=new I(T.SOF,0,0,0,0,null);return{source:t,options:void 0,lastToken:e,token:e,line:1,lineStart:0,advance:C,lookahead:k}}(n),this._options=e||{}}var e=t.prototype;return e.parseName=function(){var t=this.expectToken(T.NAME);return{kind:S.NAME,value:t.value,loc:this.loc(t)}},e.parseDocument=function(){var t=this._lexer.token;return{kind:S.DOCUMENT,definitions:this.many(T.SOF,this.parseDefinition,T.EOF),loc:this.loc(t)}},e.parseDefinition=function(){if(this.peek(T.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(T.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var t=this._lexer.token;if(this.peek(T.BRACE_L))return{kind:S.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var e,n=this.parseOperationType();return this.peek(T.NAME)&&(e=this.parseName()),{kind:S.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseOperationType=function(){var t=this.expectToken(T.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(t)},e.parseVariableDefinitions=function(){return this.optionalMany(T.PAREN_L,this.parseVariableDefinition,T.PAREN_R)},e.parseVariableDefinition=function(){var t=this._lexer.token;return{kind:S.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(T.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(T.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(t)}},e.parseVariable=function(){var t=this._lexer.token;return this.expectToken(T.DOLLAR),{kind:S.VARIABLE,name:this.parseName(),loc:this.loc(t)}},e.parseSelectionSet=function(){var t=this._lexer.token;return{kind:S.SELECTION_SET,selections:this.many(T.BRACE_L,this.parseSelection,T.BRACE_R),loc:this.loc(t)}},e.parseSelection=function(){return this.peek(T.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var t,e,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(T.COLON)?(t=r,e=this.parseName()):e=r,{kind:S.FIELD,alias:t,name:e,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(T.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(t){return this.optionalMany(T.PAREN_L,t?this.parseConstArgument:this.parseArgument,T.PAREN_R)},e.parseArgument=function(){var t=this._lexer.token,e=this.parseName();return this.expectToken(T.COLON),{kind:S.ARGUMENT,name:e,value:this.parseValueLiteral(!1),loc:this.loc(t)}},e.parseConstArgument=function(){var t=this._lexer.token;return{kind:S.ARGUMENT,name:this.parseName(),value:(this.expectToken(T.COLON),this.parseValueLiteral(!0)),loc:this.loc(t)}},e.parseFragment=function(){var t=this._lexer.token;this.expectToken(T.SPREAD);var e=this.expectOptionalKeyword("on");return!e&&this.peek(T.NAME)?{kind:S.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(t)}:{kind:S.INLINE_FRAGMENT,typeCondition:e?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseFragmentDefinition=function(){var t=this._lexer.token;return this.expectKeyword("fragment"),this._options.experimentalFragmentVariables?{kind:S.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:S.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(t){var e=this._lexer.token;switch(e.kind){case T.BRACKET_L:return this.parseList(t);case T.BRACE_L:return this.parseObject(t);case T.INT:return this._lexer.advance(),{kind:S.INT,value:e.value,loc:this.loc(e)};case T.FLOAT:return this._lexer.advance(),{kind:S.FLOAT,value:e.value,loc:this.loc(e)};case T.STRING:case T.BLOCK_STRING:return this.parseStringLiteral();case T.NAME:return"true"===e.value||"false"===e.value?(this._lexer.advance(),{kind:S.BOOLEAN,value:"true"===e.value,loc:this.loc(e)}):"null"===e.value?(this._lexer.advance(),{kind:S.NULL,loc:this.loc(e)}):(this._lexer.advance(),{kind:S.ENUM,value:e.value,loc:this.loc(e)});case T.DOLLAR:if(!t)return this.parseVariable()}throw this.unexpected()},e.parseStringLiteral=function(){var t=this._lexer.token;return this._lexer.advance(),{kind:S.STRING,value:t.value,block:t.kind===T.BLOCK_STRING,loc:this.loc(t)}},e.parseList=function(t){var e=this,n=this._lexer.token;return{kind:S.LIST,values:this.any(T.BRACKET_L,function(){return e.parseValueLiteral(t)},T.BRACKET_R),loc:this.loc(n)}},e.parseObject=function(t){var e=this,n=this._lexer.token;return{kind:S.OBJECT,fields:this.any(T.BRACE_L,function(){return e.parseObjectField(t)},T.BRACE_R),loc:this.loc(n)}},e.parseObjectField=function(t){var e=this._lexer.token,n=this.parseName();return this.expectToken(T.COLON),{kind:S.OBJECT_FIELD,name:n,value:this.parseValueLiteral(t),loc:this.loc(e)}},e.parseDirectives=function(t){for(var e=[];this.peek(T.AT);)e.push(this.parseDirective(t));return e},e.parseDirective=function(t){var e=this._lexer.token;return this.expectToken(T.AT),{kind:S.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t),loc:this.loc(e)}},e.parseTypeReference=function(){var t,e=this._lexer.token;return this.expectOptionalToken(T.BRACKET_L)?(t=this.parseTypeReference(),this.expectToken(T.BRACKET_R),t={kind:S.LIST_TYPE,type:t,loc:this.loc(e)}):t=this.parseNamedType(),this.expectOptionalToken(T.BANG)?{kind:S.NON_NULL_TYPE,type:t,loc:this.loc(e)}:t},e.parseNamedType=function(){var t=this._lexer.token;return{kind:S.NAMED_TYPE,name:this.parseName(),loc:this.loc(t)}},e.parseTypeSystemDefinition=function(){var t=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(t.kind===T.NAME)switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(t)},e.peekDescription=function(){return this.peek(T.STRING)||this.peek(T.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var t=this._lexer.token;this.expectKeyword("schema");var e=this.parseDirectives(!0),n=this.many(T.BRACE_L,this.parseOperationTypeDefinition,T.BRACE_R);return{kind:S.SCHEMA_DEFINITION,directives:e,operationTypes:n,loc:this.loc(t)}},e.parseOperationTypeDefinition=function(){var t=this._lexer.token,e=this.parseOperationType();this.expectToken(T.COLON);var n=this.parseNamedType();return{kind:S.OPERATION_TYPE_DEFINITION,operation:e,type:n,loc:this.loc(t)}},e.parseScalarTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:S.SCALAR_TYPE_DEFINITION,description:e,name:n,directives:r,loc:this.loc(t)}},e.parseObjectTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),s=this.parseFieldsDefinition();return{kind:S.OBJECT_TYPE_DEFINITION,description:e,name:n,interfaces:r,directives:i,fields:s,loc:this.loc(t)}},e.parseImplementsInterfaces=function(){var t=[];if(this.expectOptionalKeyword("implements")){this.expectOptionalToken(T.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(T.AMP)||this._options.allowLegacySDLImplementsInterfaces&&this.peek(T.NAME))}return t},e.parseFieldsDefinition=function(){return this._options.allowLegacySDLEmptyFields&&this.peek(T.BRACE_L)&&this._lexer.lookahead().kind===T.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(T.BRACE_L,this.parseFieldDefinition,T.BRACE_R)},e.parseFieldDefinition=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(T.COLON);var i=this.parseTypeReference(),s=this.parseDirectives(!0);return{kind:S.FIELD_DEFINITION,description:e,name:n,arguments:r,type:i,directives:s,loc:this.loc(t)}},e.parseArgumentDefs=function(){return this.optionalMany(T.PAREN_L,this.parseInputValueDef,T.PAREN_R)},e.parseInputValueDef=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName();this.expectToken(T.COLON);var r,i=this.parseTypeReference();this.expectOptionalToken(T.EQUALS)&&(r=this.parseValueLiteral(!0));var s=this.parseDirectives(!0);return{kind:S.INPUT_VALUE_DEFINITION,description:e,name:n,type:i,defaultValue:r,directives:s,loc:this.loc(t)}},e.parseInterfaceTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:S.INTERFACE_TYPE_DEFINITION,description:e,name:n,directives:r,fields:i,loc:this.loc(t)}},e.parseUnionTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:S.UNION_TYPE_DEFINITION,description:e,name:n,directives:r,types:i,loc:this.loc(t)}},e.parseUnionMemberTypes=function(){var t=[];if(this.expectOptionalToken(T.EQUALS)){this.expectOptionalToken(T.PIPE);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(T.PIPE))}return t},e.parseEnumTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:S.ENUM_TYPE_DEFINITION,description:e,name:n,directives:r,values:i,loc:this.loc(t)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(T.BRACE_L,this.parseEnumValueDefinition,T.BRACE_R)},e.parseEnumValueDefinition=function(){var t=this._lexer.token,e=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:S.ENUM_VALUE_DEFINITION,description:e,name:n,directives:r,loc:this.loc(t)}},e.parseInputObjectTypeDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:S.INPUT_OBJECT_TYPE_DEFINITION,description:e,name:n,directives:r,fields:i,loc:this.loc(t)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(T.BRACE_L,this.parseInputValueDef,T.BRACE_R)},e.parseTypeSystemExtension=function(){var t=this._lexer.lookahead();if(t.kind===T.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)},e.parseSchemaExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var e=this.parseDirectives(!0),n=this.optionalMany(T.BRACE_L,this.parseOperationTypeDefinition,T.BRACE_R);if(0===e.length&&0===n.length)throw this.unexpected();return{kind:S.SCHEMA_EXTENSION,directives:e,operationTypes:n,loc:this.loc(t)}},e.parseScalarTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var e=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:S.SCALAR_TYPE_EXTENSION,name:e,directives:n,loc:this.loc(t)}},e.parseObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var e=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:S.OBJECT_TYPE_EXTENSION,name:e,interfaces:n,directives:r,fields:i,loc:this.loc(t)}},e.parseInterfaceTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:S.INTERFACE_TYPE_EXTENSION,name:e,directives:n,fields:r,loc:this.loc(t)}},e.parseUnionTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:S.UNION_TYPE_EXTENSION,name:e,directives:n,types:r,loc:this.loc(t)}},e.parseEnumTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:S.ENUM_TYPE_EXTENSION,name:e,directives:n,values:r,loc:this.loc(t)}},e.parseInputObjectTypeExtension=function(){var t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var e=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:S.INPUT_OBJECT_TYPE_EXTENSION,name:e,directives:n,fields:r,loc:this.loc(t)}},e.parseDirectiveDefinition=function(){var t=this._lexer.token,e=this.parseDescription();this.expectKeyword("directive"),this.expectToken(T.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var s=this.parseDirectiveLocations();return{kind:S.DIRECTIVE_DEFINITION,description:e,name:n,arguments:r,repeatable:i,locations:s,loc:this.loc(t)}},e.parseDirectiveLocations=function(){this.expectOptionalToken(T.PIPE);var t=[];do{t.push(this.parseDirectiveLocation())}while(this.expectOptionalToken(T.PIPE));return t},e.parseDirectiveLocation=function(){var t=this._lexer.token,e=this.parseName();if(void 0!==_[e.value])return e;throw this.unexpected(t)},e.loc=function(t){if(!this._options.noLocation)return new j(t,this._lexer.lastToken,this._lexer.source)},e.peek=function(t){return this._lexer.token.kind===t},e.expectToken=function(t){var e=this._lexer.token;if(e.kind===t)return this._lexer.advance(),e;throw w(this._lexer.source,e.start,"Expected ".concat(t,", found ").concat(B(e)))},e.expectOptionalToken=function(t){var e=this._lexer.token;if(e.kind===t)return this._lexer.advance(),e},e.expectKeyword=function(t){var e=this._lexer.token;if(e.kind!==T.NAME||e.value!==t)throw w(this._lexer.source,e.start,'Expected "'.concat(t,'", found ').concat(B(e)));this._lexer.advance()},e.expectOptionalKeyword=function(t){var e=this._lexer.token;return e.kind===T.NAME&&e.value===t&&(this._lexer.advance(),!0)},e.unexpected=function(t){var e=t||this._lexer.token;return w(this._lexer.source,e.start,"Unexpected ".concat(B(e)))},e.any=function(t,e,n){this.expectToken(t);for(var r=[];!this.expectOptionalToken(n);)r.push(e.call(this));return r},e.optionalMany=function(t,e,n){if(this.expectOptionalToken(t)){var r=[];do{r.push(e.call(this))}while(!this.expectOptionalToken(n));return r}return[]},e.many=function(t,e,n){this.expectToken(t);var r=[];do{r.push(e.call(this))}while(!this.expectOptionalToken(n));return r},t}();function j(t,e,n){this.start=t.start,this.end=e.end,this.startToken=t,this.endToken=e,this.source=n}function B(t){var e=t.value;return e?"".concat(t.kind,' "').concat(e,'"'):t.kind}f(j,function(){return{start:this.start,end:this.end}});var L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function H(t,e){return t(e={exports:{}},e.exports),e.exports}var M,V=((M=Object.freeze({parse:function(t,e){return new P(t,e).parseDocument()},parseValue:function(t,e){var n=new P(t,e);n.expectToken(T.SOF);var r=n.parseValueLiteral(!1);return n.expectToken(T.EOF),r},parseType:function(t,e){var n=new P(t,e);n.expectToken(T.SOF);var r=n.parseTypeReference();return n.expectToken(T.EOF),r}}))&&M.default||M).parse;function U(t){return t.replace(/[\s,]+/g," ").trim()}var q={},K={},z=!0,Q=!1;function W(){for(var t=Array.prototype.slice.call(arguments),e=t[0],n="string"==typeof e?e:e[0],r=1;r<t.length;r++)n+=t[r]&&t[r].kind&&"Document"===t[r].kind?t[r].loc.source.body:t[r],n+=e[r];return function(t){var e=U(t);if(q[e])return q[e];var n=V(t,{experimentalFragmentVariables:Q});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=function t(e,n){var r=Object.prototype.toString.call(e);if("[object Array]"===r)return e.map(function(e){return t(e,n)});if("[object Object]"!==r)throw new Error("Unexpected input.");n&&e.loc&&delete e.loc,e.loc&&(delete e.loc.startToken,delete e.loc.endToken);var i,s,o,a=Object.keys(e);for(i in a)a.hasOwnProperty(i)&&(s=e[a[i]],"[object Object]"!==(o=Object.prototype.toString.call(s))&&"[object Array]"!==o||(e[a[i]]=t(s,!0)));return e}(n=function(t){for(var e,n={},r=[],i=0;i<t.definitions.length;i++){var s=t.definitions[i];if("FragmentDefinition"===s.kind){var o=s.name.value,a=U((e=s.loc).source.body.substring(e.start,e.end));K.hasOwnProperty(o)&&!K[o][a]?(z&&console.warn("Warning: fragment with name "+o+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),K[o][a]=!0):K.hasOwnProperty(o)||(K[o]={},K[o][a]=!0),n[a]||(n[a]=!0,r.push(s))}else r.push(s)}return t.definitions=r,t}(n),!1),q[e]=n,n}(n)}W.default=W,W.resetCaches=function(){q={},K={}},W.disableFragmentWarnings=function(){z=!1},W.enableExperimentalFragmentVariables=function(){Q=!0},W.disableExperimentalFragmentVariables=function(){Q=!1};var $=W;const Y=$`
  {
    user {
      firstName
      nickName
    }
  }
`,G="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function J(){throw new Error("setTimeout has not been defined")}function X(){throw new Error("clearTimeout has not been defined")}var Z=J,tt=X;function et(t){if(Z===setTimeout)return setTimeout(t,0);if((Z===J||!Z)&&setTimeout)return Z=setTimeout,setTimeout(t,0);try{return Z(t,0)}catch(e){try{return Z.call(null,t,0)}catch(e){return Z.call(this,t,0)}}}"function"==typeof G.setTimeout&&(Z=setTimeout),"function"==typeof G.clearTimeout&&(tt=clearTimeout);var nt,rt=[],it=!1,st=-1;function ot(){it&&nt&&(it=!1,nt.length?rt=nt.concat(rt):st=-1,rt.length&&at())}function at(){if(!it){var t=et(ot);it=!0;for(var e=rt.length;e;){for(nt=rt,rt=[];++st<e;)nt&&nt[st].run();st=-1,e=rt.length}nt=null,it=!1,function(t){if(tt===clearTimeout)return clearTimeout(t);if((tt===X||!tt)&&clearTimeout)return tt=clearTimeout,clearTimeout(t);try{tt(t)}catch(e){try{return tt.call(null,t)}catch(e){return tt.call(this,t)}}}(t)}}function ut(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];rt.push(new ct(t,e)),1!==rt.length||it||et(at)}function ct(t,e){this.fun=t,this.array=e}function ht(){}ct.prototype.run=function(){this.fun.apply(null,this.array)};var lt=ht,ft=ht,dt=ht,pt=ht,gt=ht,vt=ht,yt=ht,mt=G.performance||{},bt=mt.now||mt.mozNow||mt.msNow||mt.oNow||mt.webkitNow||function(){return(new Date).getTime()},wt=new Date;const St={nextTick:ut,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:lt,addListener:ft,once:dt,off:pt,removeListener:gt,removeAllListeners:vt,emit:yt,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*bt.call(mt),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-wt)/1e3}};var Et=function(t,e){return(Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function xt(t,e){function n(){this.constructor=t}Et(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var At=function(){return(At=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ft(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Tt(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,a)}u((r=r.apply(t,e||[])).next())})}function Ct(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var kt={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},It=Object.freeze({});function Ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kt,r=void 0,i=Array.isArray(t),s=[t],o=-1,a=[],u=void 0,c=void 0,l=void 0,f=[],d=[],p=t;do{var g=++o===s.length,v=g&&0!==a.length;if(g){if(c=0===d.length?void 0:f[f.length-1],u=l,l=d.pop(),v){if(i)u=u.slice();else{for(var y={},m=0,b=Object.keys(u);m<b.length;m++){var w=b[m];y[w]=u[w]}u=y}for(var S=0,E=0;E<a.length;E++){var x=a[E][0],A=a[E][1];i&&(x-=S),i&&null===A?(u.splice(x,1),S++):u[x]=A}}o=r.index,s=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(c=l?i?o:s[o]:void 0,null==(u=l?l[c]:p))continue;l&&f.push(c)}var F=void 0;if(!Array.isArray(u)){if(!Rt(u))throw new Error("Invalid AST Node: "+h(u));var T=Dt(e,u.kind,g);if(T){if((F=T.call(e,u,c,l,f,d))===It)break;if(!1===F){if(!g){f.pop();continue}}else if(void 0!==F&&(a.push([c,F]),!g)){if(!Rt(F)){f.pop();continue}u=F}}}void 0===F&&v&&a.push([c,u]),g?f.pop():(r={inArray:i,index:o,keys:s,edits:a,prev:r},s=(i=Array.isArray(u))?u:n[u.kind]||[],o=-1,a=[],l&&d.push(l),l=u)}while(void 0!==r);return 0!==a.length&&(p=a[a.length-1][1]),p}function Rt(t){return Boolean(t&&"string"==typeof t.kind)}function Dt(t,e,n){var r=t[e];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var s=n?t.leave:t.enter;if(s){if("function"==typeof s)return s;var o=s[e];if("function"==typeof o)return o}}}var Nt="Invariant Violation",_t=Object.setPrototypeOf,Pt=void 0===_t?function(t,e){return t.__proto__=e,t}:_t,jt=function(t){function e(n){void 0===n&&(n=Nt);var r=t.call(this,"number"==typeof n?Nt+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=Nt,Pt(r,e.prototype),r}return xt(e,t),e}(Error);function Bt(t,e){if(!t)throw new jt(e)}function Lt(t){return function(){return console[t].apply(console,arguments)}}!function(t){t.warn=Lt("warn"),t.error=Lt("error")}(Bt||(Bt={}));var Ht={env:{}};if("object"==typeof St)Ht=St;else try{Function("stub","process = stub")(Ht)}catch(t){}var Mt=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n,r="boolean"==typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){return n({key:e,value:t[e]},{key:r,value:t[r]})}}),s=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var n,o;if(Array.isArray(e)){for(o="[",n=0;n<e.length;n++)n&&(o+=","),o+=t(e[n])||"null";return o+"]"}if(null===e)return"null";if(-1!==s.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=s.push(e)-1,u=Object.keys(e).sort(i&&i(e));for(o="",n=0;n<u.length;n++){var c=u[n],h=t(e[c]);h&&(o&&(o+=","),o+=JSON.stringify(c)+":"+h)}return s.splice(a,1),"{"+o+"}"}}(t)},Vt=Object.prototype,Ut=Vt.toString,qt=Vt.hasOwnProperty,Kt=new Map;function zt(t,e){try{return function t(e,n){if(e===n)return!0;var r=Ut.call(e);if(r!==Ut.call(n))return!1;switch(r){case"[object Array]":if(e.length!==n.length)return!1;case"[object Object]":if(Qt(e,n))return!0;var i=Object.keys(e),s=Object.keys(n),o=i.length;if(o!==s.length)return!1;for(var a=0;a<o;++a)if(!qt.call(n,i[a]))return!1;for(a=0;a<o;++a){var u=i[a];if(!t(e[u],n[u]))return!1}return!0;case"[object Error]":return e.name===n.name&&e.message===n.message;case"[object Number]":if(e!=e)return n!=n;case"[object Boolean]":case"[object Date]":return+e==+n;case"[object RegExp]":case"[object String]":return e==""+n;case"[object Map]":case"[object Set]":if(e.size!==n.size)return!1;if(Qt(e,n))return!0;for(var c=e.entries(),h="[object Map]"===r;;){var l=c.next();if(l.done)break;var f=l.value,d=f[0],p=f[1];if(!n.has(d))return!1;if(h&&!t(p,n.get(d)))return!1}return!0}return!1}(t,e)}finally{Kt.clear()}}function Qt(t,e){var n=Kt.get(t);if(n){if(n.has(e))return!0}else Kt.set(t,n=new Set);return n.add(e),!1}function Wt(t,e,n,r){if(function(t){return"IntValue"===t.kind}(n)||function(t){return"FloatValue"===t.kind}(n))t[e.value]=Number(n.value);else if(function(t){return"BooleanValue"===t.kind}(n)||function(t){return"StringValue"===t.kind}(n))t[e.value]=n.value;else if(function(t){return"ObjectValue"===t.kind}(n)){var i={};n.fields.map(function(t){return Wt(i,t.name,t.value,r)}),t[e.value]=i}else if(function(t){return"Variable"===t.kind}(n))t[e.value]=(r||{})[n.name.value];else if(function(t){return"ListValue"===t.kind}(n))t[e.value]=n.values.map(function(t){var n={};return Wt(n,e,t,r),n[e.value]});else if(function(t){return"EnumValue"===t.kind}(n))t[e.value]=n.value;else{if(!function(t){return"NullValue"===t.kind}(n))throw new jt(17);t[e.value]=null}}var $t=["connection","include","skip","client","rest","export"];function Yt(t,e,n){if(n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var i=e,s={};return r.forEach(function(t){s[t]=i[t]}),n.connection.key+"("+JSON.stringify(s)+")"}return n.connection.key}var o=t;if(e){var a=Mt(e);o+="("+a+")"}return n&&Object.keys(n).forEach(function(t){-1===$t.indexOf(t)&&(n[t]&&Object.keys(n[t]).length?o+="@"+t+"("+JSON.stringify(n[t])+")":o+="@"+t)}),o}function Gt(t,e){if(t.arguments&&t.arguments.length){var n={};return t.arguments.forEach(function(t){return Wt(n,t.name,t.value,e)}),n}return null}function Jt(t){return t.alias?t.alias.value:t.name.value}function Xt(t){return"Field"===t.kind}function Zt(t){return"InlineFragment"===t.kind}function te(t){return t&&"id"===t.type&&"boolean"==typeof t.generated}function ee(t,e){return void 0===e&&(e=!1),At({type:"id",generated:e},"string"==typeof t?{id:t,typename:void 0}:t)}function ne(t,e){if(t.directives&&t.directives.length){var n={};return t.directives.forEach(function(t){n[t.name.value]=Gt(t,e)}),n}return null}function re(t,e){return void 0===e&&(e={}),(n=t.directives,n?n.filter(oe).map(function(t){var e=t.arguments;Bt(e&&1===e.length,4);var n=e[0];Bt(n.name&&"if"===n.name.value,5);var r=n.value;return Bt(r&&("Variable"===r.kind||"BooleanValue"===r.kind),6),{directive:t,ifArgument:n}}):[]).every(function(t){var n=t.directive,r=t.ifArgument,i=!1;return"Variable"===r.value.kind?Bt(void 0!==(i=e[r.value.name.value]),3):i=r.value.value,"skip"===n.name.value?!i:i});var n}function ie(t,e){return function(t){var e=[];return Ot(t,{Directive:function(t){e.push(t.name.value)}}),e}(e).some(function(e){return t.indexOf(e)>-1})}function se(t){return t&&ie(["client"],t)&&ie(["export"],t)}function oe(t){var e=t.name.value;return"skip"===e||"include"===e}function ae(t,e){var n=e,r=[];return t.definitions.forEach(function(t){if("OperationDefinition"===t.kind)throw new jt(1);"FragmentDefinition"===t.kind&&r.push(t)}),void 0===n&&(Bt(1===r.length,2),n=r[0].name.value),At({},t,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}].concat(t.definitions)})}function ue(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach(function(e){null!=e&&Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}function ce(t){return Bt(t&&"Document"===t.kind,8),Bt(t.definitions.filter(function(t){return"FragmentDefinition"!==t.kind}).map(function(t){if("OperationDefinition"!==t.kind)throw new jt(9);return t}).length<=1,10),t}function he(t){return ce(t),t.definitions.filter(function(t){return"OperationDefinition"===t.kind})[0]}function le(t){return t.definitions.filter(function(t){return"OperationDefinition"===t.kind&&t.name}).map(function(t){return t.name.value})[0]||null}function fe(t){return t.definitions.filter(function(t){return"FragmentDefinition"===t.kind})}function de(t){var e;ce(t);for(var n=0,r=t.definitions;n<r.length;n++){var i=r[n];if("OperationDefinition"===i.kind){var s=i.operation;if("query"===s||"mutation"===s||"subscription"===s)return i}"FragmentDefinition"!==i.kind||e||(e=i)}if(e)return e;throw new jt(16)}function pe(t){void 0===t&&(t=[]);var e={};return t.forEach(function(t){e[t.name.value]=t}),e}function ge(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(t){return t.defaultValue}).map(function(t){var e={};return Wt(e,t.variable.name,t.defaultValue),e});return ue.apply(void 0,[{}].concat(e))}return{}}function ve(t,e,n){var r=0;return t.forEach(function(n,i){e.call(this,n,i,t)&&(t[r++]=n)},n),t.length=r,t}var ye={kind:"Field",name:{kind:"Name",value:"__typename"}};function me(t){return function t(e,n){return e.selectionSet.selections.every(function(e){return"FragmentSpread"===e.kind&&t(n[e.name.value],n)})}(he(t)||function(t){Bt("Document"===t.kind,13),Bt(t.definitions.length<=1,14);var e=t.definitions[0];return Bt("FragmentDefinition"===e.kind,15),e}(t),pe(fe(t)))?null:t}function be(t){return function(e){return t.some(function(t){return t.name&&t.name===e.name.value||t.test&&t.test(e)})}}function we(t,e){var n=Object.create(null),r=[],i=Object.create(null),s=[],o=me(Ot(e,{Variable:{enter:function(t,e,r){"VariableDefinition"!==r.kind&&(n[t.name.value]=!0)}},Field:{enter:function(e){if(t&&e.directives&&t.some(function(t){return t.remove})&&e.directives&&e.directives.some(be(t)))return e.arguments&&e.arguments.forEach(function(t){"Variable"===t.value.kind&&r.push({name:t.value.name.value})}),e.selectionSet&&function t(e){var n=[];return e.selections.forEach(function(e){(Xt(e)||Zt(e))&&e.selectionSet?t(e.selectionSet).forEach(function(t){return n.push(t)}):"FragmentSpread"===e.kind&&n.push(e)}),n}(e.selectionSet).forEach(function(t){s.push({name:t.name.value})}),null}},FragmentSpread:{enter:function(t){i[t.name.value]=!0}},Directive:{enter:function(e){if(be(t)(e))return null}}}));return o&&ve(r,function(t){return!n[t.name]}).length&&(o=function(t,e){var n=function(t){return function(e){return t.some(function(t){return e.value&&"Variable"===e.value.kind&&e.value.name&&(t.name===e.value.name.value||t.test&&t.test(e))})}}(t);return me(Ot(e,{OperationDefinition:{enter:function(e){return At({},e,{variableDefinitions:e.variableDefinitions.filter(function(e){return!t.some(function(t){return t.name===e.variable.name.value})})})}},Field:{enter:function(e){if(t.some(function(t){return t.remove})){var r=0;if(e.arguments.forEach(function(t){n(t)&&(r+=1)}),1===r)return null}}},Argument:{enter:function(t){if(n(t))return null}}}))}(r,o)),o&&ve(s,function(t){return!i[t.name]}).length&&(o=function(t){function e(e){if(t.some(function(t){return t.name===e.name.value}))return null}return me(Ot(o,{FragmentSpread:{enter:e},FragmentDefinition:{enter:e}}))}(s)),o}var Se={test:function(t){var e="connection"===t.name.value;return e&&(!t.arguments||t.arguments.some(function(t){return"key"===t.name.value})),e}};function Ee(t){return"query"===de(t).operation?t:Ot(t,{OperationDefinition:{enter:function(t){return At({},t,{operation:"query"})}}})}var xe="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product),Ae=Object.prototype.toString;function Fe(t){try{return t()}catch(t){console.error&&console.error(t)}}function Te(t){return t.errors&&t.errors.length}var Ce=Object.prototype.hasOwnProperty;function ke(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ie(t)}function Ie(t){var e=t[0]||{},n=t.length;if(n>1){var r=[];e=De(e,r);for(var i=1;i<n;++i)e=Re(e,t[i],r)}return e}function Oe(t){return null!==t&&"object"==typeof t}function Re(t,e,n){return Oe(e)&&Oe(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=De(t,n)),Object.keys(e).forEach(function(r){var i=e[r];if(Ce.call(t,r)){var s=t[r];i!==s&&(t[r]=Re(De(s,n),i,n))}else t[r]=i}),t):e}function De(t,e){return null!==t&&"object"==typeof t&&e.indexOf(t)<0&&(t=Array.isArray(t)?t.slice(0):At({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var Ne,_e=H(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){return"function"==typeof Symbol},s=function(t){return i()&&Boolean(Symbol[t])},o=function(t){return s(t)?Symbol[t]:"@@"+t};i()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var a=o("iterator"),u=o("observable"),c=o("species");function h(t,e){var n=t[e];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function l(t){var e=t.constructor;return void 0!==e&&null===(e=e[c])&&(e=void 0),void 0!==e?e:S}function f(t){return t instanceof S}function d(t){d.log?d.log(t):setTimeout(function(){throw t})}function p(t){Promise.resolve().then(function(){try{t()}catch(t){d(t)}})}function g(t){var e=t._cleanup;if(void 0!==e&&(t._cleanup=void 0,e))try{if("function"==typeof e)e();else{var n=h(e,"unsubscribe");n&&n.call(e)}}catch(t){d(t)}}function v(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function y(t,e,n){t._state="running";var r=t._observer;try{var i=h(r,e);switch(e){case"next":i&&i.call(r,n);break;case"error":if(v(t),!i)throw n;i.call(r,n);break;case"complete":v(t),i&&i.call(r)}}catch(t){d(t)}"closed"===t._state?g(t):"running"===t._state&&(t._state="ready")}function m(t,e,n){if("closed"!==t._state){if("buffering"!==t._state)return"ready"!==t._state?(t._state="buffering",t._queue=[{type:e,value:n}],void p(function(){return function(t){var e=t._queue;if(e){t._queue=void 0,t._state="ready";for(var n=0;n<e.length&&(y(t,e[n].type,e[n].value),"closed"!==t._state);++n);}}(t)})):void y(t,e,n);t._queue.push({type:e,value:n})}}var b=function(){function t(e,n){r(this,t),this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var i=new w(this);try{this._cleanup=n.call(void 0,i)}catch(t){i.error(t)}"initializing"===this._state&&(this._state="ready")}return n(t,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(v(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),t}(),w=function(){function t(e){r(this,t),this._subscription=e}return n(t,[{key:"next",value:function(t){m(this._subscription,"next",t)}},{key:"error",value:function(t){m(this._subscription,"error",t)}},{key:"complete",value:function(){m(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),t}(),S=e.Observable=function(){function t(e){if(r(this,t),!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}return n(t,[{key:"subscribe",value:function(t){return"object"==typeof t&&null!==t||(t={next:t,error:arguments[1],complete:arguments[2]}),new b(t,this._subscriber)}},{key:"forEach",value:function(t){var e=this;return new Promise(function(n,r){if("function"==typeof t)var i=e.subscribe({next:function(e){try{t(e,s)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(t+" is not a function"));function s(){i.unsubscribe(),n()}})}},{key:"map",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(l(this))(function(n){return e.subscribe({next:function(e){try{e=t(e)}catch(t){return n.error(t)}n.next(e)},error:function(t){n.error(t)},complete:function(){n.complete()}})})}},{key:"filter",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(l(this))(function(n){return e.subscribe({next:function(e){try{if(!t(e))return}catch(t){return n.error(t)}n.next(e)},error:function(t){n.error(t)},complete:function(){n.complete()}})})}},{key:"reduce",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=l(this),r=arguments.length>1,i=!1,s=arguments[1];return new n(function(n){return e.subscribe({next:function(e){var o=!i;if(i=!0,!o||r)try{s=t(s,e)}catch(t){return n.error(t)}else s=e},error:function(t){n.error(t)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})})}},{key:"concat",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=l(this);return new i(function(e){var r=void 0,s=0;return function t(o){r=o.subscribe({next:function(t){e.next(t)},error:function(t){e.error(t)},complete:function(){s===n.length?(r=void 0,e.complete()):t(i.from(n[s++]))}})}(t),function(){r&&(r.unsubscribe(),r=void 0)}})}},{key:"flatMap",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=l(this);return new n(function(r){var i=[],s=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(t){return r.error(t)}var s=n.from(e).subscribe({next:function(t){r.next(t)},error:function(t){r.error(t)},complete:function(){var t=i.indexOf(s);t>=0&&i.splice(t,1),o()}});i.push(s)},error:function(t){r.error(t)},complete:function(){o()}});function o(){s.closed&&0===i.length&&r.complete()}return function(){i.forEach(function(t){return t.unsubscribe()}),s.unsubscribe()}})}},{key:u,value:function(){return this}}],[{key:"from",value:function(e){var n="function"==typeof this?this:t;if(null==e)throw new TypeError(e+" is not an object");var r=h(e,u);if(r){var i=r.call(e);if(Object(i)!==i)throw new TypeError(i+" is not an object");return f(i)&&i.constructor===n?i:new n(function(t){return i.subscribe(t)})}if(s("iterator")&&(r=h(e,a)))return new n(function(t){p(function(){if(!t.closed){var n=!0,i=!1,s=void 0;try{for(var o,a=r.call(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)if(t.next(o.value),t.closed)return}catch(t){i=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw s}}t.complete()}})});if(Array.isArray(e))return new n(function(t){p(function(){if(!t.closed){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()}})});throw new TypeError(e+" is not observable")}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return new("function"==typeof this?this:t)(function(t){p(function(){if(!t.closed){for(var e=0;e<n.length;++e)if(t.next(n[e]),t.closed)return;t.complete()}})})}},{key:c,get:function(){return this}}]),t}();i()&&Object.defineProperty(S,Symbol("extensions"),{value:{symbol:u,hostReportError:d},configurable:!0})});(Ne=_e)&&Ne.__esModule&&Object.prototype.hasOwnProperty.call(Ne,"default");var Pe=_e.Observable;function je(t){return t.request.length<=1}function Be(t){return new Pe(function(e){e.error(t)})}function Le(t,e){return e?e(t):Pe.of()}function He(t){return"function"==typeof t?new Ke(t):t}function Me(){return new Ke(function(){return Pe.of()})}function Ve(t){return 0===t.length?Me():t.map(He).reduce(function(t,e){return t.concat(e)})}function Ue(t,e,n){var r=He(e),i=He(n||new Ke(Le));return je(r)&&je(i)?new Ke(function(e){return t(e)?r.request(e)||Pe.of():i.request(e)||Pe.of()}):new Ke(function(e,n){return t(e)?r.request(e,n)||Pe.of():i.request(e,n)||Pe.of()})}!function(t){xt(function(e,n){var r=t.call(this,e)||this;return r.link=n,r},t)}(Error);var qe=function(t,e){var n=He(t);if(je(n))return n;var r=He(e);return je(r)?new Ke(function(t){return n.request(t,function(t){return r.request(t)||Pe.of()})||Pe.of()}):new Ke(function(t,e){return n.request(t,function(t){return r.request(t,e)||Pe.of()})||Pe.of()})},Ke=function(){function t(t){t&&(this.request=t)}return t.prototype.split=function(e,n,r){return this.concat(Ue(e,n,r||new t(Le)))},t.prototype.concat=function(t){return qe(this,t)},t.prototype.request=function(){throw new jt(1)},t.empty=Me,t.from=Ve,t.split=Ue,t.execute=ze,t}();function ze(t,e){return t.request(function(t,e){var n=At({},t);return Object.defineProperty(e,"setContext",{enumerable:!1,value:function(t){n=At({},n,"function"==typeof t?t(n):t)}}),Object.defineProperty(e,"getContext",{enumerable:!1,value:function(){return At({},n)}}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return function(t){return JSON.stringify([t.operationName,t.query,t.variables])}(e)}}),e}(e.context,function(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName="string"!=typeof e.query?le(e.query):""),e}(function(t){for(var e=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(t);n<r.length;n++)if(e.indexOf(r[n])<0)throw new jt(2);return t}(e))))||Pe.of()}var Qe,We=function(){var t,e=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==G?G:"undefined"!=typeof module?module:Function("return this")()).Symbol;return"function"==typeof e?e.observable?t=e.observable:(t=e("observable"),e.observable=t):t="@@observable",t}();function $e(t){return t<7}!function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"}(Qe||(Qe={}));var Ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype[We]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(Pe);function Ge(t){return Array.isArray(t)&&t.length>0}var Je,Xe=function(t){var e="";return Ge(t.graphQLErrors)&&t.graphQLErrors.forEach(function(t){e+="GraphQL error: "+(t?t.message:"Error message not found.")+"\n"}),t.networkError&&(e+="Network error: "+t.networkError.message+"\n"),e=e.replace(/\n$/,"")},Ze=function(t){function e(n){var r=n.graphQLErrors,i=n.networkError,s=n.errorMessage,o=n.extraInfo,a=t.call(this,s)||this;return a.graphQLErrors=r||[],a.networkError=i||null,a.message=s||Xe(a),a.extraInfo=o,a.__proto__=e.prototype,a}return xt(e,t),e}(Error);!function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"}(Je||(Je={}));var tn=function(t){function e(e){var n=e.queryManager,r=e.options,i=e.shouldSubscribe,s=void 0===i||i,o=t.call(this,function(t){return o.onSubscribe(t)})||this;o.observers=new Set,o.subscriptions=new Set,o.isTornDown=!1,o.options=r,o.variables=r.variables||{},o.queryId=n.generateQueryId(),o.shouldSubscribe=s;var a=he(r.query);return o.queryName=a&&a.name&&a.name.value,o.queryManager=n,o}return xt(e,t),e.prototype.result=function(){var t=this;return new Promise(function(e,n){var r={next:function(n){e(n),t.observers.delete(r),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){i.unsubscribe()},0)},error:n},i=t.subscribe(r)})},e.prototype.currentResult=function(){var t=this.getCurrentResult();return void 0===t.data&&(t.data={}),t},e.prototype.getCurrentResult=function(){if(this.isTornDown){var t=this.lastResult;return{data:!this.lastError&&t&&t.data||void 0,error:this.lastError,loading:!1,networkStatus:Qe.error}}var e,n,r,i=this.queryManager.getCurrentQueryResult(this),s=i.data,o=i.partial,a=this.queryManager.queryStore.get(this.queryId),u=this.options.fetchPolicy,c="network-only"===u||"no-cache"===u;if(a){var h=a.networkStatus;if(void 0===(r=this.options.errorPolicy)&&(r="none"),(n=a)&&(n.networkError||"none"===r&&Ge(n.graphQLErrors)))return{data:void 0,loading:!1,networkStatus:h,error:new Ze({graphQLErrors:a.graphQLErrors,networkError:a.networkError})};a.variables&&(this.options.variables=At({},this.options.variables,a.variables),this.variables=this.options.variables),e={data:s,loading:$e(h),networkStatus:h},a.graphQLErrors&&"all"===this.options.errorPolicy&&(e.errors=a.graphQLErrors)}else{var l=c||o&&"cache-only"!==u;e={data:s,loading:l,networkStatus:l?Qe.loading:Qe.ready}}return o||this.updateLastResult(At({},e,{stale:!1})),At({},e,{partial:o})},e.prototype.isDifferentFromLastResult=function(t){var e=this.lastResultSnapshot;return!(e&&t&&e.networkStatus===t.networkStatus&&e.stale===t.stale&&zt(e.data,t.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var t=this.queryManager.queryStore.get(this.queryId);t&&(t.networkError=null,t.graphQLErrors=[])},e.prototype.refetch=function(t){var e=this.options.fetchPolicy;return"cache-only"===e?Promise.reject(new jt(3)):("no-cache"!==e&&"cache-and-network"!==e&&(e="network-only"),zt(this.variables,t)||(this.variables=At({},this.variables,t)),zt(this.options.variables,this.variables)||(this.options.variables=At({},this.options.variables,this.variables)),this.queryManager.fetchQuery(this.queryId,At({},this.options,{fetchPolicy:e}),Je.refetch))},e.prototype.fetchMore=function(t){var e=this;Bt(t.updateQuery,4);var n=At({},t.query?t:At({},this.options,t,{variables:At({},this.variables,t.variables)}),{fetchPolicy:"network-only"}),r=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(r,n,Je.normal,this.queryId).then(function(i){return e.updateQuery(function(e){return t.updateQuery(e,{fetchMoreResult:i.data,variables:n.variables})}),e.queryManager.stopQuery(r),i},function(t){throw e.queryManager.stopQuery(r),t})},e.prototype.subscribeToMore=function(t){var e=this,n=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables}).subscribe({next:function(n){var r=t.updateQuery;r&&e.updateQuery(function(t,e){return r(t,{subscriptionData:n,variables:e.variables})})},error:function(e){t.onError&&t.onError(e)}});return this.subscriptions.add(n),function(){e.subscriptions.delete(n)&&n.unsubscribe()}},e.prototype.setOptions=function(t){var e=this.options.fetchPolicy;this.options=At({},this.options,t),t.pollInterval?this.startPolling(t.pollInterval):0===t.pollInterval&&this.stopPolling();var n=t.fetchPolicy;return this.setVariables(this.options.variables,e!==n&&("cache-only"===e||"standby"===e||"network-only"===n),t.fetchResults)},e.prototype.setVariables=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),this.isTornDown=!1,t=t||this.variables,!e&&zt(t,this.variables)?this.observers.size&&n?this.result():Promise.resolve():(this.variables=this.options.variables=t,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(t){var e=this.queryManager,n=e.getQueryWithPreviousResult(this.queryId),r=n.previousResult,i=n.variables,s=n.document,o=Fe(function(){return t(r,{variables:i})});o&&(e.dataStore.markUpdateQueryResult(s,i,o),e.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(t){rn(this),this.options.pollInterval=t,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(t){var e=this.lastResult;return this.lastResult=t,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?t:function t(e,n){switch(Ae.call(e)){case"[object Array]":if(n.has(e))return n.get(e);var r=e.slice(0);return n.set(e,r),r.forEach(function(e,i){r[i]=t(e,n)}),r;case"[object Object]":if(n.has(e))return n.get(e);var i=Object.create(Object.getPrototypeOf(e));return n.set(e,i),Object.keys(e).forEach(function(r){i[r]=t(e[r],n)}),i;default:return e}}(t,new Map),e},e.prototype.onSubscribe=function(t){var e=this;try{var n=t._subscription._observer;n&&!n.error&&(n.error=en)}catch(t){}var r=!this.observers.size;return this.observers.add(t),t.next&&this.lastResult&&t.next(this.lastResult),t.error&&this.lastError&&t.error(this.lastError),r&&this.setUpQuery(),function(){e.observers.delete(t)&&!e.observers.size&&e.tearDownQuery()}},e.prototype.setUpQuery=function(){var t=this,e=this.queryManager,n=this.queryId;this.shouldSubscribe&&e.addObservableQuery(n,this),this.options.pollInterval&&(rn(this),e.startPollingQuery(this.options,n));var r=function(e){t.updateLastResult(At({},t.lastResult,{errors:e.graphQLErrors,networkStatus:Qe.error,loading:!1})),nn(t.observers,"error",t.lastError=e)};e.observeQuery(n,this.options,{next:function(n){if(t.lastError||t.isDifferentFromLastResult(n)){var r=t.updateLastResult(n),i=t.options,s=i.query,o=i.variables,a=i.fetchPolicy;e.transform(s).hasClientExports?e.getLocalState().addExportedVariables(s,o).then(function(i){var o=t.variables;t.variables=t.options.variables=i,!n.loading&&r&&"cache-only"!==a&&e.transform(s).serverQuery&&!zt(o,i)?t.refetch():nn(t.observers,"next",n)}):nn(t.observers,"next",n)}},error:r}).catch(r)},e.prototype.tearDownQuery=function(){var t=this.queryManager;this.isTornDown=!0,t.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),t.removeObservableQuery(this.queryId),t.stopQuery(this.queryId),this.observers.clear()},e}(Ye);function en(){}function nn(t,e,n){var r=[];t.forEach(function(t){return t[e]&&r.push(t)}),r.forEach(function(t){return t[e](n)})}function rn(t){var e=t.options.fetchPolicy;Bt("cache-first"!==e&&"cache-only"!==e,5)}var sn=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(t){return this.store[t]},t.prototype.initMutation=function(t,e,n){this.store[t]={mutation:e,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(t,e){var n=this.store[t];n&&(n.loading=!1,n.error=e)},t.prototype.markMutationResult=function(t){var e=this.store[t];e&&(e.loading=!1,e.error=null)},t.prototype.reset=function(){this.store={}},t}(),on=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(t){return this.store[t]},t.prototype.initQuery=function(t){var e=this.store[t.queryId];Bt(!e||e.document===t.document||zt(e.document,t.document),19);var n=!1,r=null;t.storePreviousVariables&&e&&e.networkStatus!==Qe.loading&&(zt(e.variables,t.variables)||(n=!0,r=e.variables));var i=[];e&&e.graphQLErrors&&(i=e.graphQLErrors),this.store[t.queryId]={document:t.document,variables:t.variables,previousVariables:r,networkError:null,graphQLErrors:i,networkStatus:n?Qe.setVariables:t.isPoll?Qe.poll:t.isRefetch?Qe.refetch:Qe.loading,metadata:t.metadata},"string"==typeof t.fetchMoreForQueryId&&this.store[t.fetchMoreForQueryId]&&(this.store[t.fetchMoreForQueryId].networkStatus=Qe.fetchMore)},t.prototype.markQueryResult=function(t,e,n){this.store&&this.store[t]&&(this.store[t].networkError=null,this.store[t].graphQLErrors=Ge(e.errors)?e.errors:[],this.store[t].previousVariables=null,this.store[t].networkStatus=Qe.ready,"string"==typeof n&&this.store[n]&&(this.store[n].networkStatus=Qe.ready))},t.prototype.markQueryError=function(t,e,n){this.store&&this.store[t]&&(this.store[t].networkError=e,this.store[t].networkStatus=Qe.error,"string"==typeof n&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(t,e){var n=this.store&&this.store[t];n&&(n.networkError=null,n.previousVariables=null,e&&(n.networkStatus=Qe.ready))},t.prototype.stopQuery=function(t){delete this.store[t]},t.prototype.reset=function(t){var e=this;Object.keys(this.store).forEach(function(n){t.indexOf(n)<0?e.stopQuery(n):e.store[n].networkStatus=Qe.loading})},t}(),an=function(){function t(t){var e=t.client,n=t.resolvers,r=t.fragmentMatcher;this.cache=t.cache,e&&(this.client=e),n&&this.addResolvers(n),r&&this.setFragmentMatcher(r)}return t.prototype.addResolvers=function(t){var e=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(t){e.resolvers=ke(e.resolvers,t)}):this.resolvers=ke(this.resolvers,t)},t.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(t){var e=t.document,n=t.remoteResult,r=t.context,i=t.variables,s=t.onlyRunForcedResolvers,o=void 0!==s&&s;return Tt(this,void 0,void 0,function(){return Ct(this,function(){return e?[2,this.resolveDocument(e,n.data,r,i,this.fragmentMatcher,o).then(function(t){return At({},n,{data:t.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(t){return ie(["client"],t)&&this.resolvers?t:null},t.prototype.serverQuery=function(t){return this.resolvers?function(t){ce(t);var e=we([{test:function(t){return"client"===t.name.value},remove:!0}],t);return e&&(e=Ot(e,{FragmentDefinition:{enter:function(t){if(t.selectionSet&&t.selectionSet.selections.every(function(t){return Xt(t)&&"__typename"===t.name.value}))return null}}})),e}(t):t},t.prototype.prepareContext=function(t){void 0===t&&(t={});var e=this.cache;return At({},t,{cache:e,getCacheKey:function(t){if(e.config)return e.config.dataIdFromObject(t);Bt(!1,6)}})},t.prototype.addExportedVariables=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),Tt(this,void 0,void 0,function(){return Ct(this,function(){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,e)||{},this.prepareContext(n),e).then(function(t){return At({},e,t.exportedVariables)})]:[2,At({},e)]})})},t.prototype.shouldForceResolvers=function(t){var e=!1;return Ot(t,{Directive:{enter:function(t){if("client"===t.name.value&&t.arguments&&(e=t.arguments.some(function(t){return"always"===t.name.value&&"BooleanValue"===t.value.kind&&!0===t.value.value})))return It}}}),e},t.prototype.buildRootValueFromCache=function(t,e){return this.cache.diff({query:Ee(t),variables:e,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(t,e,n,r,i,s){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i=function(){return!0}),void 0===s&&(s=!1),Tt(this,void 0,void 0,function(){var o,a,u,c,h,l,f;return Ct(this,function(){var d;return o=de(t),a=fe(t),u=pe(a),h=(c=o.operation)?(d=c).charAt(0).toUpperCase()+d.slice(1):"Query",f={fragmentMap:u,context:At({},n,{cache:(l=this).cache,client:l.client}),variables:r,fragmentMatcher:i,defaultOperationType:h,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(o.selectionSet,e,f).then(function(t){return{result:t,exportedVariables:f.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(t,e,n){return Tt(this,void 0,void 0,function(){var r,i,s,o,a=this;return Ct(this,function(){return r=n.fragmentMap,i=n.context,s=n.variables,o=[e],[2,Promise.all(t.selections.map(function(t){return Tt(a,void 0,void 0,function(){var a;return Ct(this,function(){return re(t,s)?Xt(t)?[2,this.resolveField(t,e,n).then(function(e){var n;void 0!==e&&o.push(((n={})[Jt(t)]=e,n))})]:(Zt(t)?a=t:Bt(a=r[t.name.value],7),a&&a.typeCondition&&n.fragmentMatcher(e,a.typeCondition.name.value,i)?[2,this.resolveSelectionSet(a.selectionSet,e,n).then(function(t){o.push(t)})]:[2]):[2]})})})).then(function(){return Ie(o)})]})})},t.prototype.resolveField=function(t,e,n){return Tt(this,void 0,void 0,function(){var r,i,s,o,a,u,c,h,l,f=this;return Ct(this,function(){return r=n.variables,i=t.name.value,s=Jt(t),o=i!==s,a=e[s]||e[i],u=Promise.resolve(a),n.onlyRunForcedResolvers&&!this.shouldForceResolvers(t)||(c=e.__typename||n.defaultOperationType,(h=this.resolvers&&this.resolvers[c])&&(l=h[o?i:s])&&(u=Promise.resolve(l(e,Gt(t,r),n.context,{field:t})))),[2,u.then(function(e){return void 0===e&&(e=a),t.directives&&t.directives.forEach(function(t){"export"===t.name.value&&t.arguments&&t.arguments.forEach(function(t){"as"===t.name.value&&"StringValue"===t.value.kind&&(n.exportedVariables[t.value.value]=e)})}),t.selectionSet?null==e?e:Array.isArray(e)?f.resolveSubSelectedArray(t,e,n):t.selectionSet?f.resolveSelectionSet(t.selectionSet,e,n):void 0:e})]})})},t.prototype.resolveSubSelectedArray=function(t,e,n){var r=this;return Promise.all(e.map(function(e){return null===e?null:Array.isArray(e)?r.resolveSubSelectedArray(t,e,n):t.selectionSet?r.resolveSelectionSet(t.selectionSet,e,n):void 0}))},t}();function un(t){var e=new Set,n=null;return new Ye(function(r){return e.add(r),n=n||t.subscribe({next:function(t){e.forEach(function(e){return e.next&&e.next(t)})},error:function(t){e.forEach(function(e){return e.error&&e.error(t)})},complete:function(){e.forEach(function(t){return t.complete&&t.complete()})}}),function(){e.delete(r)&&!e.size&&n&&(n.unsubscribe(),n=null)}})}var cn=Object.prototype.hasOwnProperty,hn=function(){function t(t){var e=t.link,n=t.queryDeduplication,r=void 0!==n&&n,i=t.store,s=t.onBroadcast,o=void 0===s?function(){}:s,a=t.ssrMode,u=void 0!==a&&a,c=t.clientAwareness,h=void 0===c?{}:c,l=t.localState,f=t.assumeImmutableResults;this.mutationStore=new sn,this.queryStore=new on,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(xe?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=e,this.queryDeduplication=r,this.dataStore=i,this.onBroadcast=o,this.clientAwareness=h,this.localState=l||new an({cache:i.getCache()}),this.ssrMode=u,this.assumeImmutableResults=!!f}return t.prototype.stop=function(){var t=this;this.queries.forEach(function(e,n){t.stopQueryNoBroadcast(n)}),this.fetchQueryRejectFns.forEach(function(t){t(new jt(8))})},t.prototype.mutate=function(t){var e=t.mutation,n=t.variables,r=t.optimisticResponse,i=t.updateQueries,s=t.refetchQueries,o=void 0===s?[]:s,a=t.awaitRefetchQueries,u=void 0!==a&&a,c=t.update,h=t.errorPolicy,l=void 0===h?"none":h,f=t.fetchPolicy,d=t.context,p=void 0===d?{}:d;return Tt(this,void 0,void 0,function(){var t,s,a,h=this;return Ct(this,function(d){switch(d.label){case 0:return Bt(e,9),Bt(!f||"no-cache"===f,10),t=this.generateQueryId(),e=this.transform(e).document,this.setQuery(t,function(){return{document:e}}),n=this.getVariables(e,n),this.transform(e).hasClientExports?[4,this.localState.addExportedVariables(e,n,p)]:[3,2];case 1:n=d.sent(),d.label=2;case 2:return s=function(){var t={};return i&&h.queries.forEach(function(e,n){var r=e.observableQuery;if(r){var s=r.queryName;s&&cn.call(i,s)&&(t[n]={updater:i[s],query:h.queryStore.get(n)})}}),t},this.mutationStore.initMutation(t,e,n),this.dataStore.markMutationInit({mutationId:t,document:e,variables:n,updateQueries:s(),update:c,optimisticResponse:r}),this.broadcastQueries(),a=this,[2,new Promise(function(i,h){var d,g;a.getObservableFromLink(e,At({},p,{optimisticResponse:r}),n,!1).subscribe({next:function(r){Te(r)&&"none"===l?g=new Ze({graphQLErrors:r.errors}):(a.mutationStore.markMutationResult(t),"no-cache"!==f&&a.dataStore.markMutationResult({mutationId:t,result:r,document:e,variables:n,updateQueries:s(),update:c}),d=r)},error:function(e){a.mutationStore.markMutationError(t,e),a.dataStore.markMutationComplete({mutationId:t,optimisticResponse:r}),a.broadcastQueries(),a.setQuery(t,function(){return{document:null}}),h(new Ze({networkError:e}))},complete:function(){if(g&&a.mutationStore.markMutationError(t,g),a.dataStore.markMutationComplete({mutationId:t,optimisticResponse:r}),a.broadcastQueries(),g)h(g);else{"function"==typeof o&&(o=o(d));var e=[];Ge(o)&&o.forEach(function(t){if("string"==typeof t)a.queries.forEach(function(n){var r=n.observableQuery;r&&r.queryName===t&&e.push(r.refetch())});else{var n={query:t.query,variables:t.variables,fetchPolicy:"network-only"};t.context&&(n.context=t.context),e.push(a.query(n))}}),Promise.all(u?e:[]).then(function(){a.setQuery(t,function(){return{document:null}}),"ignore"===l&&d&&Te(d)&&delete d.errors,i(d)})}}})})]}})})},t.prototype.fetchQuery=function(t,e,n,r){return Tt(this,void 0,void 0,function(){var i,s,o,a,u,c,h,l,f,d,p,g,v,y,m,b,w=this;return Ct(this,function(S){switch(S.label){case 0:return s=void 0===(i=e.metadata)?null:i,a=void 0===(o=e.fetchPolicy)?"cache-first":o,c=void 0===(u=e.context)?{}:u,h=this.transform(e.query).document,l=this.getVariables(h,e.variables),this.transform(h).hasClientExports?[4,this.localState.addExportedVariables(h,l,c)]:[3,2];case 1:l=S.sent(),S.label=2;case 2:if(e=At({},e,{variables:l}),p=d="network-only"===a||"no-cache"===a,d||(g=this.dataStore.getCache().diff({query:h,variables:l,returnPartialData:!0,optimistic:!1}),p=!g.complete||"cache-and-network"===a,f=g.result),v=p&&"cache-only"!==a&&"standby"!==a,ie(["live"],h)&&(v=!0),y=this.idCounter++,m="no-cache"!==a?this.updateQueryWatch(t,h,e):void 0,this.setQuery(t,function(){return{document:h,lastRequestId:y,invalidated:!0,cancel:m}}),this.invalidate(r),this.queryStore.initQuery({queryId:t,document:h,storePreviousVariables:v,variables:l,isPoll:n===Je.poll,isRefetch:n===Je.refetch,metadata:s,fetchMoreForQueryId:r}),this.broadcastQueries(),v){if(b=this.fetchRequest({requestId:y,queryId:t,document:h,options:e,fetchMoreForQueryId:r}).catch(function(e){throw e.hasOwnProperty("graphQLErrors")?e:(y>=w.getQuery(t).lastRequestId&&(w.queryStore.markQueryError(t,e,r),w.invalidate(t),w.invalidate(r),w.broadcastQueries()),new Ze({networkError:e}))}),"cache-and-network"!==a)return[2,b];b.catch(function(){})}return this.queryStore.markQueryResultClient(t,!v),this.invalidate(t),this.invalidate(r),this.transform(h).hasForcedResolvers?[2,this.localState.runResolvers({document:h,remoteResult:{data:f},context:c,variables:l,onlyRunForcedResolvers:!0}).then(function(n){return w.markQueryResult(t,n,e,r),w.broadcastQueries(),n})]:(this.broadcastQueries(),[2,{data:f}])}})})},t.prototype.markQueryResult=function(t,e,n,r){var i=n.variables,s=n.errorPolicy;"no-cache"===n.fetchPolicy?this.setQuery(t,function(){return{newData:{result:e.data,complete:!0}}}):this.dataStore.markQueryResult(e,this.getQuery(t).document,i,r,"ignore"===s||"all"===s)},t.prototype.queryListenerForObserver=function(t,e,n){var r=this;function i(t,e){if(n[t])try{n[t](e)}catch(t){}}return function(n,s){if(r.invalidate(t,!1),n){var o=r.getQuery(t),a=o.observableQuery,u=o.document,c=a?a.options.fetchPolicy:e.fetchPolicy;if("standby"!==c){var h=$e(n.networkStatus),l=a&&a.getLastResult();if(!h||e.returnPartialData||!s&&n.previousVariables||l&&l.networkStatus!==n.networkStatus&&e.notifyOnNetworkStatusChange||"cache-only"===c||"cache-and-network"===c){var f=Ge(n.graphQLErrors),d=a&&a.options.errorPolicy||e.errorPolicy||"none";if("none"===d&&f||n.networkError)return i("error",new Ze({graphQLErrors:n.graphQLErrors,networkError:n.networkError}));try{var p=void 0,g=void 0;if(s)"no-cache"!==c&&"network-only"!==c&&r.setQuery(t,function(){return{newData:null}}),p=s.result,g=!s.complete;else{var v=a&&a.getLastError();if(l&&l.data&&("none"===d||(v&&v.graphQLErrors)===n.graphQLErrors))p=l.data,g=!1;else{var y=r.dataStore.getCache().diff({query:u,variables:n.previousVariables||n.variables,returnPartialData:!0,optimistic:!0});p=y.result,g=!y.complete}}var m=g&&!(e.returnPartialData||"cache-only"===c),b={data:m?l&&l.data:p,loading:h,networkStatus:n.networkStatus,stale:m};"all"===d&&f&&(b.errors=n.graphQLErrors),i("next",b)}catch(t){i("error",new Ze({networkError:t}))}}}}}},t.prototype.transform=function(t){var e,n=this.transformCache;if(!n.has(t)){var r=this.dataStore.getCache(),i=r.transformDocument(t),s=(e=r.transformForLink(i),we([Se],ce(e))),o=this.localState.clientQuery(i),a=this.localState.serverQuery(s),u={document:i,hasClientExports:se(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:o,serverQuery:a,defaultVars:ge(he(i))},c=function(t){t&&!n.has(t)&&n.set(t,u)};c(t),c(i),c(o),c(a)}return n.get(t)},t.prototype.getVariables=function(t,e){return At({},this.transform(t).defaultVars,e)},t.prototype.watchQuery=function(t,e){void 0===e&&(e=!0),Bt("standby"!==t.fetchPolicy,11),t.variables=this.getVariables(t.query,t.variables),void 0===t.notifyOnNetworkStatusChange&&(t.notifyOnNetworkStatusChange=!1);var n=At({},t);return new tn({queryManager:this,options:n,shouldSubscribe:e})},t.prototype.query=function(t){var e=this;return Bt(t.query,12),Bt("Document"===t.query.kind,13),Bt(!t.returnPartialData,14),Bt(!t.pollInterval,15),new Promise(function(n,r){var i=e.watchQuery(t,!1);e.fetchQueryRejectFns.set("query:"+i.queryId,r),i.result().then(n,r).then(function(){return e.fetchQueryRejectFns.delete("query:"+i.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(t){this.stopPollingQuery(t),this.queryStore.stopQuery(t),this.invalidate(t)},t.prototype.addQueryListener=function(t,e){this.setQuery(t,function(t){return t.listeners.add(e),{invalidated:!1}})},t.prototype.updateQueryWatch=function(t,e,n){var r=this,i=this.getQuery(t).cancel;return i&&i(),this.dataStore.getCache().watch({query:e,variables:n.variables,optimistic:!0,previousResult:function(){var e=null,n=r.getQuery(t).observableQuery;if(n){var i=n.getLastResult();i&&(e=i.data)}return e},callback:function(e){r.setQuery(t,function(){return{invalidated:!0,newData:e}})}})},t.prototype.addObservableQuery=function(t,e){this.setQuery(t,function(){return{observableQuery:e}})},t.prototype.removeObservableQuery=function(t){var e=this.getQuery(t).cancel;this.setQuery(t,function(){return{observableQuery:null}}),e&&e()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(t){t(new jt(16))});var t=[];return this.queries.forEach(function(e,n){e.observableQuery&&t.push(n)}),this.queryStore.reset(t),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var t=this;return this.clearStore().then(function(){return t.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(t){var e=this;void 0===t&&(t=!1);var n=[];return this.queries.forEach(function(r,i){var s=r.observableQuery;if(s){var o=s.options.fetchPolicy;s.resetLastResults(),"cache-only"===o||!t&&"standby"===o||n.push(s.refetch()),e.setQuery(i,function(){return{newData:null}}),e.invalidate(i)}}),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(t,e,n){return this.addQueryListener(t,this.queryListenerForObserver(t,e,n)),this.fetchQuery(t,e)},t.prototype.startQuery=function(t,e,n){return this.addQueryListener(t,n),this.fetchQuery(t,e).catch(function(){}),t},t.prototype.startGraphQLSubscription=function(t){var e=this,n=t.query,r=t.fetchPolicy,i=t.variables;n=this.transform(n).document,i=this.getVariables(n,i);var s=function(t){return e.getObservableFromLink(n,{},t,!1).map(function(i){if(r&&"no-cache"===r||(e.dataStore.markSubscriptionResult(i,n,t),e.broadcastQueries()),Te(i))throw new Ze({graphQLErrors:i.errors});return i})};if(this.transform(n).hasClientExports){var o=this.localState.addExportedVariables(n,i).then(s);return new Ye(function(t){var e=null;return o.then(function(n){return e=n.subscribe(t)},t.error),function(){return e&&e.unsubscribe()}})}return s(i)},t.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},t.prototype.removeQuery=function(t){this.fetchQueryRejectFns.delete("query:"+t),this.fetchQueryRejectFns.delete("fetchRequest:"+t),this.getQuery(t).subscriptions.forEach(function(t){return t.unsubscribe()}),this.queries.delete(t)},t.prototype.getCurrentQueryResult=function(t,e){void 0===e&&(e=!0);var n=t.options,r=n.variables,i=n.query,s=n.fetchPolicy,o=n.returnPartialData,a=t.getLastResult(),u=this.getQuery(t.queryId).newData;if(u&&u.complete)return{data:u.result,partial:!1};if("no-cache"===s||"network-only"===s)return{data:void 0,partial:!1};var c=this.dataStore.getCache().diff({query:i,variables:r,previousResult:a?a.data:void 0,returnPartialData:!0,optimistic:e}),h=c.complete;return{data:h||o?c.result:void 0,partial:!h}},t.prototype.getQueryWithPreviousResult=function(t){var e;if("string"==typeof t){var n=this.getQuery(t).observableQuery;Bt(n,17),e=n}else e=t;var r=e.options,i=r.variables,s=r.query;return{previousResult:this.getCurrentQueryResult(e,!1).data,variables:i,document:s}},t.prototype.broadcastQueries=function(){var t=this;this.onBroadcast(),this.queries.forEach(function(e,n){e.invalidated&&e.listeners.forEach(function(r){r&&r(t.queryStore.get(n),e.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(t,e,n,r){var i,s=this;void 0===r&&(r=this.queryDeduplication);var o=this.transform(t).serverQuery;if(o){var a=this.inFlightLinkObservables,u=this.link,c={query:o,variables:n,operationName:le(o)||void 0,context:this.prepareContext(At({},e,{forceFetch:!r}))};if(e=c.context,r){var h=a.get(o)||new Map;a.set(o,h);var l=JSON.stringify(n);if(!(i=h.get(l))){h.set(l,i=un(ze(u,c)));var f=function(){h.delete(l),h.size||a.delete(o),d.unsubscribe()},d=i.subscribe({next:f,error:f,complete:f})}}else i=un(ze(u,c))}else i=Ye.of({data:{}}),e=this.prepareContext(e);var p=this.transform(t).clientQuery;return p&&(i=function(t){return new Ye(function(r){var i=r.next,o=r.error,a=r.complete,u=0,c=!1,h={next:function(t){++u,new Promise(function(r){r(function(t){return s.localState.runResolvers({document:p,remoteResult:t,context:e,variables:n})}(t))}).then(function(t){--u,i&&i.call(r,t),c&&h.complete()},function(t){--u,o&&o.call(r,t)})},error:function(t){o&&o.call(r,t)},complete:function(){c=!0,u||a&&a.call(r)}},l=t.subscribe(h);return function(){return l.unsubscribe()}})}(i)),i},t.prototype.fetchRequest=function(t){var e,n,r=this,i=t.requestId,s=t.queryId,o=t.document,a=t.options,u=t.fetchMoreForQueryId,c=a.variables,h=a.errorPolicy,l=void 0===h?"none":h,f=a.fetchPolicy;return new Promise(function(t,h){var d=r.getObservableFromLink(o,a.context,c),p="fetchRequest:"+s;r.fetchQueryRejectFns.set(p,h);var g=function(){r.fetchQueryRejectFns.delete(p),r.setQuery(s,function(t){t.subscriptions.delete(v)})},v=d.map(function(t){if(i>=r.getQuery(s).lastRequestId&&(r.markQueryResult(s,t,a,u),r.queryStore.markQueryResult(s,t,u),r.invalidate(s),r.invalidate(u),r.broadcastQueries()),"none"===l&&Ge(t.errors))return h(new Ze({graphQLErrors:t.errors}));if("all"===l&&(n=t.errors),u||"no-cache"===f)e=t.data;else{var d=r.dataStore.getCache().diff({variables:c,query:o,optimistic:!1,returnPartialData:!0});(d.complete||a.returnPartialData)&&(e=d.result)}}).subscribe({error:function(t){g(),h(t)},complete:function(){g(),t({data:e,errors:n,loading:!1,networkStatus:Qe.ready,stale:!1})}});r.setQuery(s,function(t){t.subscriptions.add(v)})})},t.prototype.getQuery=function(t){return this.queries.get(t)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(t,e){var n=this.getQuery(t),r=At({},n,e(n));this.queries.set(t,r)},t.prototype.invalidate=function(t,e){void 0===e&&(e=!0),t&&this.setQuery(t,function(){return{invalidated:e}})},t.prototype.prepareContext=function(t){void 0===t&&(t={});var e=this.localState.prepareContext(t);return At({},e,{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(t){var e=this.queryStore.get(t);return e&&e.networkStatus!==Qe.ready&&e.networkStatus!==Qe.error},t.prototype.startPollingQuery=function(t,e,n){var r=this,i=t.pollInterval;if(Bt(i,18),!this.ssrMode){var s=this.pollingInfoByQueryId.get(e);s||this.pollingInfoByQueryId.set(e,s={}),s.interval=i,s.options=At({},t,{fetchPolicy:"network-only"});var o=function(){var t=r.pollingInfoByQueryId.get(e);t&&(r.checkInFlight(e)?a():r.fetchQuery(e,t.options,Je.poll).then(a,a))},a=function(){var t=r.pollingInfoByQueryId.get(e);t&&(clearTimeout(t.timeout),t.timeout=setTimeout(o,t.interval))};n&&this.addQueryListener(e,n),a()}return e},t.prototype.stopPollingQuery=function(t){this.pollingInfoByQueryId.delete(t)},t}(),ln=function(){function t(t){this.cache=t}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(t,e,n,r,i){void 0===i&&(i=!1);var s=!Te(t);i&&Te(t)&&t.data&&(s=!0),!r&&s&&this.cache.write({result:t.data,dataId:"ROOT_QUERY",query:e,variables:n})},t.prototype.markSubscriptionResult=function(t,e,n){Te(t)||this.cache.write({result:t.data,dataId:"ROOT_SUBSCRIPTION",query:e,variables:n})},t.prototype.markMutationInit=function(t){var e,n=this;t.optimisticResponse&&(e="function"==typeof t.optimisticResponse?t.optimisticResponse(t.variables):t.optimisticResponse,this.cache.recordOptimisticTransaction(function(r){var i=n.cache;n.cache=r;try{n.markMutationResult({mutationId:t.mutationId,result:{data:e},document:t.document,variables:t.variables,updateQueries:t.updateQueries,update:t.update})}finally{n.cache=i}},t.mutationId))},t.prototype.markMutationResult=function(t){var e=this;if(!Te(t.result)){var n=[{result:t.result.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables}],r=t.updateQueries;r&&Object.keys(r).forEach(function(i){var s=r[i],o=s.query,a=s.updater,u=e.cache.diff({query:o.document,variables:o.variables,returnPartialData:!0,optimistic:!1}),c=u.result;if(u.complete){var h=Fe(function(){return a(c,{mutationResult:t.result,queryName:le(o.document)||void 0,queryVariables:o.variables})});h&&n.push({result:h,dataId:"ROOT_QUERY",query:o.document,variables:o.variables})}}),this.cache.performTransaction(function(e){n.forEach(function(t){return e.write(t)});var r=t.update;r&&Fe(function(){return r(e,t.result)})})}},t.prototype.markMutationComplete=function(t){t.optimisticResponse&&this.cache.removeOptimistic(t.mutationId)},t.prototype.markUpdateQueryResult=function(t,e,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:e,query:t})},t.prototype.reset=function(){return this.cache.reset()},t}(),fn="2.6.4",dn=function(){function t(t){var e=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=t.cache,r=t.ssrMode,i=void 0!==r&&r,s=t.ssrForceFetchDelay,o=void 0===s?0:s,a=t.connectToDevTools,u=t.queryDeduplication,c=void 0===u||u,h=t.defaultOptions,l=t.assumeImmutableResults,f=void 0!==l&&l,d=t.resolvers,p=t.typeDefs,g=t.fragmentMatcher,v=t.name,y=t.version,m=t.link;if(!m&&d&&(m=Ke.empty()),!m||!n)throw new jt(1);this.link=m,this.cache=n,this.store=new ln(n),this.disableNetworkFetches=i||o>0,this.queryDeduplication=c,this.defaultOptions=h||{},this.typeDefs=p,o&&setTimeout(function(){return e.disableNetworkFetches=!1},o),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),void 0!==a&&a&&"undefined"!=typeof window&&(window.__APOLLO_CLIENT__=this),this.version=fn,this.localState=new an({cache:n,client:this,resolvers:d,fragmentMatcher:g}),this.queryManager=new hn({link:this.link,store:this.store,queryDeduplication:c,ssrMode:i,clientAwareness:{name:v,version:y},localState:this.localState,assumeImmutableResults:f,onBroadcast:function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.queryStore.getStore(),mutations:e.queryManager.mutationStore.getStore()},dataWithOptimisticResults:e.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=At({},this.defaultOptions.watchQuery,t)),!this.disableNetworkFetches||"network-only"!==t.fetchPolicy&&"cache-and-network"!==t.fetchPolicy||(t=At({},t,{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},t.prototype.query=function(t){return this.defaultOptions.query&&(t=At({},this.defaultOptions.query,t)),Bt("cache-and-network"!==t.fetchPolicy,2),this.disableNetworkFetches&&"network-only"===t.fetchPolicy&&(t=At({},t,{fetchPolicy:"cache-first"})),this.queryManager.query(t)},t.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=At({},this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},t.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},t.prototype.readQuery=function(t,e){return void 0===e&&(e=!1),this.cache.readQuery(t,e)},t.prototype.readFragment=function(t,e){return void 0===e&&(e=!1),this.cache.readFragment(t,e)},t.prototype.writeQuery=function(t){var e=this.cache.writeQuery(t);return this.queryManager.broadcastQueries(),e},t.prototype.writeFragment=function(t){var e=this.cache.writeFragment(t);return this.queryManager.broadcastQueries(),e},t.prototype.writeData=function(t){var e=this.cache.writeData(t);return this.queryManager.broadcastQueries(),e},t.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},t.prototype.__requestRaw=function(t){return ze(this.link,t)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore()}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return t.reFetchObservableQueries()})},t.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore()}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(t){return t()}))})},t.prototype.onResetStore=function(t){var e=this;return this.resetStoreCallbacks.push(t),function(){e.resetStoreCallbacks=e.resetStoreCallbacks.filter(function(e){return e!==t})}},t.prototype.onClearStore=function(t){var e=this;return this.clearStoreCallbacks.push(t),function(){e.clearStoreCallbacks=e.clearStoreCallbacks.filter(function(e){return e!==t})}},t.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},t.prototype.extract=function(t){return this.cache.extract(t)},t.prototype.restore=function(t){return this.cache.restore(t)},t.prototype.addResolvers=function(t){this.localState.addResolvers(t)},t.prototype.setResolvers=function(t){this.localState.setResolvers(t)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},t}();function pn(t){return{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:gn(t)}]}}function gn(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return null;if(Array.isArray(t))return gn(t[0]);var e=[];return Object.keys(t).forEach(function(n){var r=gn(t[n]);e.push({kind:"Field",name:{kind:"Name",value:n},selectionSet:r||void 0})}),{kind:"SelectionSet",selections:e}}var vn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},yn=function(){function t(){}return t.prototype.transformDocument=function(t){return t},t.prototype.transformForLink=function(t){return t},t.prototype.readQuery=function(t,e){return void 0===e&&(e=!1),this.read({query:t.query,variables:t.variables,optimistic:e})},t.prototype.readFragment=function(t,e){return void 0===e&&(e=!1),this.read({query:ae(t.fragment,t.fragmentName),variables:t.variables,rootId:t.id,optimistic:e})},t.prototype.writeQuery=function(t){this.write({dataId:"ROOT_QUERY",result:t.data,query:t.query,variables:t.variables})},t.prototype.writeFragment=function(t){this.write({dataId:t.id,result:t.data,variables:t.variables,query:ae(t.fragment,t.fragmentName)})},t.prototype.writeData=function(t){var e,n,r=t.id,i=t.data;if(void 0!==r){var s=null;try{s=this.read({rootId:r,optimistic:!1,query:vn})}catch(t){}var o=s&&s.__typename||"__ClientData",a=Object.assign({__typename:o},i);this.writeFragment({id:r,fragment:(e=a,n=o,{kind:"Document",definitions:[{kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:n||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:gn(e)}]}),data:a})}else this.writeQuery({query:pn(i),data:i})},t}(),mn=null,bn={},wn=1,Sn=Array,En=Sn["@wry/context:Slot"]||function(){var t=function(){function t(){this.id=["slot",wn++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var t=mn;t;t=t.parent)if(this.id in t.slots){var e=t.slots[this.id];if(e===bn)break;return t!==mn&&(mn.slots[this.id]=e),!0}return mn&&(mn.slots[this.id]=bn),!1},t.prototype.getValue=function(){if(this.hasValue())return mn.slots[this.id]},t.prototype.withValue=function(t,e,n,r){var i,s=((i={__proto__:null})[this.id]=t,i),o=mn;mn={parent:o,slots:s};try{return e.apply(r,n)}finally{mn=o}},t.bind=function(t){var e=mn;return function(){var n=mn;try{return mn=e,t.apply(this,arguments)}finally{mn=n}}},t.noContext=function(t,e,n){if(!mn)return t.apply(n,e);var r=mn;try{return mn=null,t.apply(n,e)}finally{mn=r}},t}();try{Object.defineProperty(Sn,"@wry/context:Slot",{value:Sn["@wry/context:Slot"]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}();function xn(){}var An=function(){function t(t,e){void 0===t&&(t=1/0),void 0===e&&(e=xn),this.max=t,this.dispose=e,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.get=function(t){var e=this.getEntry(t);return e&&e.value},t.prototype.getEntry=function(t){var e=this.map.get(t);if(e&&e!==this.newest){var n=e.older,r=e.newer;r&&(r.older=n),n&&(n.newer=r),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=r)}return e},t.prototype.set=function(t,e){var n=this.getEntry(t);return n?n.value=e:(n={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(t,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(t){var e=this.map.get(t);return!!e&&(e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.map.delete(t),this.dispose(e.value,t),!0)},t}(),Fn=new En,Tn=[],Cn=[],kn=100;function In(t,e){if(!t)throw new Error(e||"assertion failure")}function On(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}var Rn=function(){function t(e,n){this.fn=e,this.args=n,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(In(!this.recomputing,"already recomputing"),function(t){var e=Fn.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),Nn(t)?jn(e,t):Bn(e,t),e}(this)||!Hn(this))return Nn(this)?(e=Mn(t=this),Fn.withValue(t,Dn,[t]),function(t){if("function"==typeof t.subscribe)try{Un(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}(t)&&function(t){t.dirty=!1,Nn(t)||Pn(t)}(t),e.forEach(Hn),On(t.value)):On(this.value);var t,e},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,_n(this),Un(this))},t.prototype.dispose=function(){var t=this;Mn(this).forEach(Hn),Un(this),this.parents.forEach(function(e){e.setDirty(),Vn(e,t)})},t.count=0,t}();function Dn(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function Nn(t){return t.dirty||!(!t.dirtyChildren||!t.dirtyChildren.size)}function _n(t){t.parents.forEach(function(e){return jn(e,t)})}function Pn(t){t.parents.forEach(function(e){return Bn(e,t)})}function jn(t,e){if(In(t.childValues.has(e)),In(Nn(e)),t.dirtyChildren){if(t.dirtyChildren.has(e))return}else t.dirtyChildren=Cn.pop()||new Set;t.dirtyChildren.add(e),_n(t)}function Bn(t,e){In(t.childValues.has(e)),In(!Nn(e));var n,r,i,s=t.childValues.get(e);0===s.length?t.childValues.set(e,e.value.slice(0)):(r=e.value,(i=(n=s).length)>0&&i===r.length&&n[i-1]===r[i-1]||t.setDirty()),Ln(t,e),Nn(t)||Pn(t)}function Ln(t,e){var n=t.dirtyChildren;n&&(n.delete(e),0===n.size&&(Cn.length<kn&&Cn.push(n),t.dirtyChildren=null))}function Hn(t){return 0===t.parents.size&&"function"==typeof t.reportOrphan&&!0===t.reportOrphan()}function Mn(t){var e=Tn;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(n,r){Vn(t,r),e.push(r)})),In(null===t.dirtyChildren),e}function Vn(t,e){e.parents.delete(t),t.childValues.delete(e),Ln(t,e)}function Un(t){var e=t.unsubscribe;"function"==typeof e&&(t.unsubscribe=void 0,e())}var qn=function(){function t(t){this.weakness=t}return t.prototype.lookup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lookupArray(t)},t.prototype.lookupArray=function(t){var e=this;return t.forEach(function(t){return e=e.getChildTrie(t)}),e.data||(e.data=Object.create(null))},t.prototype.getChildTrie=function(e){var n=this.weakness&&function(t){switch(typeof t){case"object":if(null===t)break;case"function":return!0}return!1}(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(e);return r||n.set(e,r=new t(this.weakness)),r},t}(),Kn=new qn("function"==typeof WeakMap);function zn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Kn.lookupArray(t)}var Qn=new Set;function Wn(t,e){void 0===e&&(e=Object.create(null));var n=new An(e.max||Math.pow(2,16),function(t){return t.dispose()}),r=!!e.disposable,i=e.makeCacheKey||zn;function s(){if(!r||Fn.hasValue()){var s=i.apply(null,arguments);if(void 0===s)return t.apply(null,arguments);var o=Array.prototype.slice.call(arguments),a=n.get(s);a?a.args=o:(a=new Rn(t,o),n.set(s,a),a.subscribe=e.subscribe,r&&(a.reportOrphan=function(){return n.delete(s)}));var u=a.recompute();return n.set(s,a),Qn.add(n),Fn.hasValue()||(Qn.forEach(function(t){return t.clean()}),Qn.clear()),r?void 0:u}}return s.dirty=function(){var t=i.apply(null,arguments),e=void 0!==t&&n.get(t);e&&e.setDirty()},s}var $n=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(t,e,n){var r=n.store.get(t.id),i="ROOT_QUERY"===t.id;if(!r)return i;var s=r.__typename,o=void 0===s?i&&"Query":s;return o&&o===e||"heuristic"},t}(),Yn=Object.prototype.hasOwnProperty,Gn=function(){function t(t){var e=this;void 0===t&&(t=Object.create(null)),this.data=t,this.depend=Wn(function(t){return e.data[t]},{disposable:!0,makeCacheKey:function(t){return t}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.depend(t),this.data[t]},t.prototype.set=function(t,e){e!==this.data[t]&&(this.data[t]=e,this.depend.dirty(t))},t.prototype.delete=function(t){Yn.call(this.data,t)&&(delete this.data[t],this.depend.dirty(t))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(t){var e=this;t?(Object.keys(t).forEach(function(n){e.set(n,t[n])}),Object.keys(this.data).forEach(function(n){Yn.call(t,n)||e.delete(n)})):Object.keys(this.data).forEach(function(t){e.delete(t)})},t}();function Jn(t){return new Gn(t)}var Xn=function(){function t(t){var e=this,n=void 0===t?{}:t,r=n.cacheKeyRoot,i=void 0===r?new qn(xe):r,s=n.freezeResults,o=this.executeStoreQuery,a=this.executeSelectionSet,u=this.executeSubSelectedArray;this.freezeResults=void 0!==s&&s,this.executeStoreQuery=Wn(function(t){return o.call(e,t)},{makeCacheKey:function(t){var e=t.rootValue,n=t.contextValue;if(n.store instanceof Gn)return i.lookup(n.store,t.query,t.fragmentMatcher,JSON.stringify(t.variableValues),e.id)}}),this.executeSelectionSet=Wn(function(t){return a.call(e,t)},{makeCacheKey:function(t){var e=t.rootValue,n=t.execContext;if(n.contextValue.store instanceof Gn)return i.lookup(n.contextValue.store,t.selectionSet,n.fragmentMatcher,JSON.stringify(n.variableValues),e.id)}}),this.executeSubSelectedArray=Wn(function(t){return u.call(e,t)},{makeCacheKey:function(t){var e=t.execContext;if(e.contextValue.store instanceof Gn)return i.lookup(e.contextValue.store,t.field,t.array,JSON.stringify(e.variableValues))}})}return t.prototype.readQueryFromStore=function(t){return this.diffQueryAgainstStore(At({},t,{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(t){var e,n=t.store,r=t.query,i=t.variables,s=t.previousResult,o=t.returnPartialData,a=void 0===o||o,u=t.rootId,c=void 0===u?"ROOT_QUERY":u,h=t.fragmentMatcherFunction,l=t.config;i=ue({},ge((Bt((e=he(r))&&"query"===e.operation,12),e)),i);var f=this.executeStoreQuery({query:r,rootValue:{type:"id",id:c,generated:!0,typename:"Query"},contextValue:{store:n,dataIdFromObject:l&&l.dataIdFromObject,cacheRedirects:l&&l.cacheRedirects||{}},variableValues:i,fragmentMatcher:h}),d=f.missing&&f.missing.length>0;return d&&!a&&f.missing.forEach(function(t){if(!t.tolerable)throw new jt(8)}),s&&zt(s,f.result)&&(f.result=s),{result:f.result,complete:!d}},t.prototype.executeStoreQuery=function(t){var e=t.query,n=t.rootValue,r=t.contextValue,i=t.variableValues,s=t.fragmentMatcher,o=void 0===s?tr:s,a=de(e),u=pe(fe(e));return this.executeSelectionSet({selectionSet:a.selectionSet,rootValue:n,execContext:{query:e,fragmentMap:u,contextValue:r,variableValues:i,fragmentMatcher:o}})},t.prototype.executeSelectionSet=function(t){var e=this,n=t.selectionSet,r=t.rootValue,i=t.execContext,s=i.fragmentMap,o=i.contextValue,a=i.variableValues,u={result:null},c=[],h=o.store.get(r.id),l=h&&h.__typename||"ROOT_QUERY"===r.id&&"Query"||void 0;function f(t){var e;return t.missing&&(u.missing=u.missing||[],(e=u.missing).push.apply(e,t.missing)),t.result}return n.selections.forEach(function(t){var n;if(re(t,a))if(Xt(t)){var u=f(e.executeField(h,l,t,i));void 0!==u&&c.push(((n={})[Jt(t)]=u,n))}else{var d=void 0;if(Zt(t))d=t;else if(!(d=s[t.name.value]))throw new jt(9);var p=d.typeCondition&&d.typeCondition.name.value,g=!p||i.fragmentMatcher(r,p,o);if(g){var v=e.executeSelectionSet({selectionSet:d.selectionSet,rootValue:r,execContext:i});"heuristic"===g&&v.missing&&(v=At({},v,{missing:v.missing.map(function(t){return At({},t,{tolerable:!0})})})),c.push(f(v))}}}),u.result=Ie(c),u},t.prototype.executeField=function(t,e,n,r){var i=r.variableValues,s=r.contextValue,o=function(t,e,r,s,o){var a={resultKey:Jt(n),directives:ne(n,i)}.directives,u=r;(s||a)&&(u=Yt(u,s,a));var c,h=void 0;if(t&&void 0===(h=t[u])&&o.cacheRedirects&&"string"==typeof e){var l=o.cacheRedirects[e];if(l){var f=l[r];f&&(h=f(t,s,{getCacheKey:function(t){var e=o.dataIdFromObject(t);return e&&ee({id:e,typename:t.__typename})}}))}}return void 0===h?{result:h,missing:[{object:t,fieldName:u,tolerable:!1}]}:(null!=(c=h)&&"object"==typeof c&&"json"===c.type&&(h=h.json),{result:h})}(t,e,n.name.value,Gt(n,i),s);return Array.isArray(o.result)?this.combineExecResults(o,this.executeSubSelectedArray({field:n,array:o.result,execContext:r})):n.selectionSet?null==o.result?o:this.combineExecResults(o,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:o.result,execContext:r})):(Zn(n,o.result),o)},t.prototype.combineExecResults=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){e.missing&&(t=t||[]).push.apply(t,e.missing)}),{result:e.pop().result,missing:t}},t.prototype.executeSubSelectedArray=function(t){var e,n=this,r=t.field,i=t.array,s=t.execContext;function o(t){return t.missing&&(e=e||[]).push.apply(e,t.missing),t.result}return{result:i=i.map(function(t){return null===t?null:Array.isArray(t)?o(n.executeSubSelectedArray({field:r,array:t,execContext:s})):r.selectionSet?o(n.executeSelectionSet({selectionSet:r.selectionSet,rootValue:t,execContext:s})):(Zn(r,t),t)}),missing:e}},t}();function Zn(t,e){if(!t.selectionSet&&te(e))throw new jt(10)}function tr(){return!0}var er=function(){function t(t){void 0===t&&(t=Object.create(null)),this.data=t}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){this.data[t]=e},t.prototype.delete=function(t){this.data[t]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(t){this.data=t||Object.create(null)},t}(),nr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="WriteError",e}return xt(e,t),e}(Error),rr=function(){function t(){}return t.prototype.writeQueryToStore=function(t){var e=t.query,n=t.result,r=t.store,i=void 0===r?Jn():r;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:e,store:i,variables:t.variables,dataIdFromObject:t.dataIdFromObject,fragmentMatcherFunction:t.fragmentMatcherFunction})},t.prototype.writeResultToStore=function(t){var e=t.dataId,n=t.result,r=t.document,i=t.store,s=void 0===i?Jn():i,o=t.variables,a=t.dataIdFromObject,u=t.fragmentMatcherFunction,c=he(r);try{return this.writeSelectionSetToStore({result:n,dataId:e,selectionSet:c.selectionSet,context:{store:s,processedData:{},variables:ue({},ge(c),o),dataIdFromObject:a,fragmentMap:pe(fe(r)),fragmentMatcherFunction:u}})}catch(t){throw function(t,e){var n=new nr("Error writing result to store for query:\n "+JSON.stringify(e));return n.message+="\n"+t.message,n.stack=t.stack,n}(t,r)}},t.prototype.writeSelectionSetToStore=function(t){var e=this,n=t.result,r=t.dataId,i=t.context,s=i.variables,o=i.store,a=i.fragmentMap;return t.selectionSet.selections.forEach(function(t){var o;if(re(t,s))if(Xt(t)){var u=Jt(t),c=n[u];void 0!==c?e.writeFieldToStore({dataId:r,value:c,field:t,context:i}):t.directives&&t.directives.length&&(t.directives.some(function(t){return t.name&&"defer"===t.name.value}),t.directives.some(function(t){return t.name&&"client"===t.name.value}))}else{var h=void 0;Zt(t)?h=t:Bt(h=(a||{})[t.name.value],2);var l=!0;if(i.fragmentMatcherFunction&&h.typeCondition){var f=r||"self",d=ee({id:f,typename:void 0}),p={store:new er((o={},o[f]=n,o)),cacheRedirects:{}};l=!!i.fragmentMatcherFunction(d,h.typeCondition.name.value,p)}l&&e.writeSelectionSetToStore({result:n,selectionSet:h.selectionSet,dataId:r,context:i})}}),o},t.prototype.writeFieldToStore=function(t){var e,n,r,i=t.field,s=t.value,o=t.dataId,a=t.context,u=a.dataIdFromObject,c=a.store,h=function(t,e){var n=null;t.directives&&(n={},t.directives.forEach(function(t){n[t.name.value]={},t.arguments&&t.arguments.forEach(function(r){return Wt(n[t.name.value],r.name,r.value,e)})}));var r=null;return t.arguments&&t.arguments.length&&(r={},t.arguments.forEach(function(t){return Wt(r,t.name,t.value,e)})),Yt(t.name.value,r,n)}(i,a.variables);if(i.selectionSet&&null!==s)if(Array.isArray(s))n=this.processArrayValue(s,o+"."+h,i.selectionSet,a);else{var l=o+"."+h,f=!0;if(ir(l)||(l="$"+l),u){var d=u(s);Bt(!d||!ir(d),3),(d||"number"==typeof d&&0===d)&&(l=d,f=!1)}sr(l,i,a.processedData)||this.writeSelectionSetToStore({dataId:l,result:s,selectionSet:i.selectionSet,context:a});var p=s.__typename;n=ee({id:l,typename:p},f);var g=(r=c.get(o))&&r[h];if(g!==n&&te(g)){var v=void 0!==g.typename,y=void 0!==p,m=v&&y&&g.typename!==p;Bt(!f||g.generated||m,4),Bt(!v||y,5),g.generated&&(m?f||c.delete(g.id):function t(e,n,r){if(e===n)return!1;var i=r.get(e),s=r.get(n),o=!1;Object.keys(i).forEach(function(e){var n=i[e],a=s[e];te(n)&&ir(n.id)&&te(a)&&!zt(n,a)&&t(n.id,a.id,r)&&(o=!0)}),r.delete(e);var a=At({},i,s);return zt(a,s)?o:(r.set(n,a),!0)}(g.id,n.id,c))}}else n=null!=s&&"object"==typeof s?{type:"json",json:s}:s;(r=c.get(o))&&zt(n,r[h])||c.set(o,At({},r,((e={})[h]=n,e)))},t.prototype.processArrayValue=function(t,e,n,r){var i=this;return t.map(function(t,s){if(null===t)return null;var o=e+"."+s;if(Array.isArray(t))return i.processArrayValue(t,o,n,r);var a=!0;if(r.dataIdFromObject){var u=r.dataIdFromObject(t);u&&(o=u,a=!1)}return sr(o,n,r.processedData)||i.writeSelectionSetToStore({dataId:o,result:t,selectionSet:n,context:r}),ee({id:o,typename:t.__typename},a)})},t}();function ir(t){return"$"===t[0]}function sr(t,e,n){if(!n)return!1;if(n[t]){if(n[t].indexOf(e)>=0)return!0;n[t].push(e)}else n[t]=[e];return!1}var or={fragmentMatcher:new $n,dataIdFromObject:function(t){if(t.__typename){if(void 0!==t.id)return t.__typename+":"+t.id;if(void 0!==t._id)return t.__typename+":"+t._id}return null},addTypename:!0,resultCaching:!0,freezeResults:!1},ar=Object.prototype.hasOwnProperty,ur=function(t){function e(e,n,r){var i=t.call(this,Object.create(null))||this;return i.optimisticId=e,i.parent=n,i.transaction=r,i}return xt(e,t),e.prototype.toObject=function(){return At({},this.parent.toObject(),this.data)},e.prototype.get=function(t){return ar.call(this.data,t)?this.data[t]:this.parent.get(t)},e}(er),cr=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new qn(xe),n.silenceBroadcast=!1,n.config=At({},or,e),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new Gn:new er,n.optimisticData=n.data,n.storeWriter=new rr,n.storeReader=new Xn({cacheKeyRoot:n.cacheKeyRoot,freezeResults:e.freezeResults});var r=n,i=r.maybeBroadcastWatch;return n.maybeBroadcastWatch=Wn(function(t){return i.call(n,t)},{makeCacheKey:function(t){if(!t.optimistic&&!t.previousResult)return r.data instanceof Gn?r.cacheKeyRoot.lookup(t.query,JSON.stringify(t.variables)):void 0}}),n}return xt(e,t),e.prototype.restore=function(t){return t&&this.data.replace(t),this},e.prototype.extract=function(t){return void 0===t&&(t=!1),(t?this.optimisticData:this.data).toObject()},e.prototype.read=function(t){if("string"==typeof t.rootId&&void 0===this.data.get(t.rootId))return null;var e=this.config.fragmentMatcher,n=e&&e.match;return this.storeReader.readQueryFromStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,rootId:t.rootId,fragmentMatcherFunction:n,previousResult:t.previousResult,config:this.config})||null},e.prototype.write=function(t){var e=this.config.fragmentMatcher,n=e&&e.match;this.storeWriter.writeResultToStore({dataId:t.dataId,result:t.result,variables:t.variables,document:this.transformDocument(t.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:n}),this.broadcastWatches()},e.prototype.diff=function(t){var e=this.config.fragmentMatcher,n=e&&e.match;return this.storeReader.diffQueryAgainstStore({store:t.optimistic?this.optimisticData:this.data,query:this.transformDocument(t.query),variables:t.variables,returnPartialData:t.returnPartialData,previousResult:t.previousResult,fragmentMatcherFunction:n,config:this.config})},e.prototype.watch=function(t){var e=this;return this.watches.add(t),function(){e.watches.delete(t)}},e.prototype.evict=function(){throw new jt(1)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){for(var e=[],n=0,r=this.optimisticData;r instanceof ur;)r.optimisticId===t?++n:e.push(r),r=r.parent;if(n>0){for(this.optimisticData=r;e.length>0;){var i=e.pop();this.performTransaction(i.transaction,i.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(t,e){var n=this.data,r=this.silenceBroadcast;this.silenceBroadcast=!0,"string"==typeof e&&(this.data=this.optimisticData=new ur(e,this.optimisticData,t));try{t(this)}finally{this.silenceBroadcast=r,this.data=n}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(t,e){return this.performTransaction(t,e)},e.prototype.transformDocument=function(t){if(this.addTypename){var e=this.typenameDocumentCache.get(t);return e||(e=Ot(ce(t),{SelectionSet:{enter:function(t,e,n){if(!n||"OperationDefinition"!==n.kind){var r=t.selections;if(r&&!r.some(function(t){return Xt(t)&&("__typename"===t.name.value||0===t.name.value.lastIndexOf("__",0))})){var i=n;if(!(Xt(i)&&i.directives&&i.directives.some(function(t){return"export"===t.name.value})))return At({},t,{selections:r.concat([ye])})}}}}}),this.typenameDocumentCache.set(t,e),this.typenameDocumentCache.set(e,e)),e}return t},e.prototype.broadcastWatches=function(){var t=this;this.silenceBroadcast||this.watches.forEach(function(e){return t.maybeBroadcastWatch(e)})},e.prototype.maybeBroadcastWatch=function(t){t.callback(this.diff({query:t.query,variables:t.variables,previousResult:t.previousResult&&t.previousResult(),optimistic:t.optimistic}))},e}(yn),hr={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return fr(t.definitions,"\n\n")+"\n"},OperationDefinition:function(t){var e=t.operation,n=t.name,r=pr("(",fr(t.variableDefinitions,", "),")"),i=fr(t.directives," "),s=t.selectionSet;return n||i||r||"query"!==e?fr([e,fr([n,r]),i,s]," "):s},VariableDefinition:function(t){var e=t.directives;return t.variable+": "+t.type+pr(" = ",t.defaultValue)+pr(" ",fr(e," "))},SelectionSet:function(t){return dr(t.selections)},Field:function(t){var e=t.name,n=t.arguments,r=t.directives,i=t.selectionSet;return fr([pr("",t.alias,": ")+e+pr("(",fr(n,", "),")"),fr(r," "),i]," ")},Argument:function(t){return t.name+": "+t.value},FragmentSpread:function(t){return"..."+t.name+pr(" ",fr(t.directives," "))},InlineFragment:function(t){var e=t.directives,n=t.selectionSet;return fr(["...",pr("on ",t.typeCondition),fr(e," "),n]," ")},FragmentDefinition:function(t){var e=t.typeCondition,n=t.variableDefinitions,r=t.directives,i=t.selectionSet;return"fragment ".concat(t.name).concat(pr("(",fr(n,", "),")")," ")+"on ".concat(e," ").concat(pr("",fr(r," ")," "))+i},IntValue:function(t){return t.value},FloatValue:function(t){return t.value},StringValue:function(t,e){var n=t.value;return t.block?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===t.indexOf("\n"),i=!r||'"'===t[t.length-1]||n,s="";return!i||r&&(" "===t[0]||"\t"===t[0])||(s+="\n"+e),s+=e?t.replace(/\n/g,"\n"+e):t,i&&(s+="\n"),'"""'+s.replace(/"""/g,'\\"""')+'"""'}(n,"description"===e?"":"  "):JSON.stringify(n)},BooleanValue:function(t){return t.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){return t.value},ListValue:function(t){return"["+fr(t.values,", ")+"]"},ObjectValue:function(t){return"{"+fr(t.fields,", ")+"}"},ObjectField:function(t){return t.name+": "+t.value},Directive:function(t){return"@"+t.name+pr("(",fr(t.arguments,", "),")")},NamedType:function(t){return t.name},ListType:function(t){return"["+t.type+"]"},NonNullType:function(t){return t.type+"!"},SchemaDefinition:function(t){var e=t.operationTypes;return fr(["schema",fr(t.directives," "),dr(e)]," ")},OperationTypeDefinition:function(t){return t.operation+": "+t.type},ScalarTypeDefinition:lr(function(t){return fr(["scalar",t.name,fr(t.directives," ")]," ")}),ObjectTypeDefinition:lr(function(t){var e=t.directives,n=t.fields;return fr(["type",t.name,pr("implements ",fr(t.interfaces," & ")),fr(e," "),dr(n)]," ")}),FieldDefinition:lr(function(t){var e=t.arguments,n=t.type,r=t.directives;return t.name+(yr(e)?pr("(\n",gr(fr(e,"\n")),"\n)"):pr("(",fr(e,", "),")"))+": "+n+pr(" ",fr(r," "))}),InputValueDefinition:lr(function(t){var e=t.directives;return fr([t.name+": "+t.type,pr("= ",t.defaultValue),fr(e," ")]," ")}),InterfaceTypeDefinition:lr(function(t){var e=t.fields;return fr(["interface",t.name,fr(t.directives," "),dr(e)]," ")}),UnionTypeDefinition:lr(function(t){var e=t.types;return fr(["union",t.name,fr(t.directives," "),e&&0!==e.length?"= "+fr(e," | "):""]," ")}),EnumTypeDefinition:lr(function(t){var e=t.values;return fr(["enum",t.name,fr(t.directives," "),dr(e)]," ")}),EnumValueDefinition:lr(function(t){return fr([t.name,fr(t.directives," ")]," ")}),InputObjectTypeDefinition:lr(function(t){var e=t.fields;return fr(["input",t.name,fr(t.directives," "),dr(e)]," ")}),DirectiveDefinition:lr(function(t){var e=t.arguments,n=t.repeatable,r=t.locations;return"directive @"+t.name+(yr(e)?pr("(\n",gr(fr(e,"\n")),"\n)"):pr("(",fr(e,", "),")"))+(n?" repeatable":"")+" on "+fr(r," | ")}),SchemaExtension:function(t){var e=t.operationTypes;return fr(["extend schema",fr(t.directives," "),dr(e)]," ")},ScalarTypeExtension:function(t){return fr(["extend scalar",t.name,fr(t.directives," ")]," ")},ObjectTypeExtension:function(t){var e=t.directives,n=t.fields;return fr(["extend type",t.name,pr("implements ",fr(t.interfaces," & ")),fr(e," "),dr(n)]," ")},InterfaceTypeExtension:function(t){var e=t.fields;return fr(["extend interface",t.name,fr(t.directives," "),dr(e)]," ")},UnionTypeExtension:function(t){var e=t.types;return fr(["extend union",t.name,fr(t.directives," "),e&&0!==e.length?"= "+fr(e," | "):""]," ")},EnumTypeExtension:function(t){var e=t.values;return fr(["extend enum",t.name,fr(t.directives," "),dr(e)]," ")},InputObjectTypeExtension:function(t){var e=t.fields;return fr(["extend input",t.name,fr(t.directives," "),dr(e)]," ")}};function lr(t){return function(e){return fr([e.description,t(e)],"\n")}}function fr(t,e){return t?t.filter(function(t){return t}).join(e||""):""}function dr(t){return t&&0!==t.length?"{\n"+gr(fr(t,"\n"))+"\n}":""}function pr(t,e,n){return e?t+e+(n||""):""}function gr(t){return t&&"  "+t.replace(/\n/g,"\n  ")}function vr(t){return-1!==t.indexOf("\n")}function yr(t){return t&&t.some(vr)}var mr={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},br=function(t,e,n){var r=new Error(n);throw r.name="ServerError",r.response=t,r.statusCode=t.status,r.result=e,r},wr=function(t){var e;try{e=JSON.stringify(t)}catch(t){var n=new jt(2);throw n.parseError=t,n}return e},Sr=function(t){void 0===t&&(t={});var e=t.uri,n=void 0===e?"/graphql":e,r=t.fetch,i=t.includeExtensions,s=t.useGETForQueries,o=Ft(t,["uri","fetch","includeExtensions","useGETForQueries"]);!function(t){if(!t&&"undefined"==typeof fetch)throw new jt(1)}(r),r||(r=fetch);var a={http:{includeExtensions:i},options:o.fetchOptions,credentials:o.credentials,headers:o.headers};return new Ke(function(t){var e=function(t,e){return t.getContext().uri||("function"==typeof e?e(t):e||"/graphql")}(t,n),i=t.getContext(),o={};if(i.clientAwareness){var u=i.clientAwareness,c=u.name,h=u.version;c&&(o["apollographql-client-name"]=c),h&&(o["apollographql-client-version"]=h)}var l,f=At({},o,i.headers),d=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=At({},e.options,{headers:e.headers,credentials:e.credentials}),s=e.http;n.forEach(function(t){i=At({},i,t.options,{headers:At({},i.headers,t.headers)}),t.credentials&&(i.credentials=t.credentials),s=At({},s,t.http)});var o=t.query,a={operationName:t.operationName,variables:t.variables};return s.includeExtensions&&(a.extensions=t.extensions),s.includeQuery&&(a.query=Ot(o,{leave:hr})),{options:i,body:a}}(t,mr,a,{http:i.http,options:i.fetchOptions,credentials:i.credentials,headers:f}),p=d.options,g=d.body;if(!p.signal){var v=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var t=new AbortController;return{controller:t,signal:t.signal}}();(l=v.controller)&&(p.signal=v.signal)}if(s&&!t.query.definitions.some(function(t){return"OperationDefinition"===t.kind&&"mutation"===t.operation})&&(p.method="GET"),"GET"===p.method){var y=function(t,e){var n=[],r=function(t,e){n.push(t+"="+encodeURIComponent(e))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var i=void 0;try{i=wr(e.variables)}catch(t){return{parseError:t}}r("variables",i)}if(e.extensions){var s=void 0;try{s=wr(e.extensions)}catch(t){return{parseError:t}}r("extensions",s)}var o="",a=t,u=t.indexOf("#");-1!==u&&(o=t.substr(u),a=t.substr(0,u));var c=-1===a.indexOf("?")?"?":"&";return{newURI:a+c+n.join("&")+o}}(e,g),m=y.newURI,b=y.parseError;if(b)return Be(b);e=m}else try{p.body=wr(g)}catch(b){return Be(b)}return new Pe(function(n){var i;return r(e,p).then(function(e){return t.setContext({response:e}),e}).then((i=t,function(t){return t.text().then(function(e){try{return JSON.parse(e)}catch(r){var n=r;return n.name="ServerParseError",n.response=t,n.statusCode=t.status,n.bodyText=e,Promise.reject(n)}}).then(function(e){return t.status>=300&&br(t,e,"Response not successful: Received status code "+t.status),Array.isArray(e)||e.hasOwnProperty("data")||e.hasOwnProperty("errors")||br(t,e,"Server response was missing for query '"+(Array.isArray(i)?i.map(function(t){return t.operationName}):i.operationName)+"'."),e})})).then(function(t){return n.next(t),n.complete(),t}).catch(function(t){"AbortError"!==t.name&&(t.result&&t.result.errors&&t.result.data&&n.next(t.result),n.error(t))}),function(){l&&l.abort()}})})};(function(t){xt(function(e){return t.call(this,Sr(e).request)||this},t)})(Ke),H(function(t,e){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,e.default=n.fetch.bind(n),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response});var Er=!1;function xr(t){const e=Sr(Object.assign({uri:void 0},Er)),n=(r=(e,{headers:n})=>({headers:Object.assign({},n,{authorization:t})}),new Ke(function(t,e){var n=Ft(t,[]);return new Pe(function(i){var s;return Promise.resolve(n).then(function(){return r(0,t.getContext())}).then(t.setContext).then(function(){s=e(t).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){s&&s.unsubscribe()}})}));var r;return new dn({link:n.concat(e),defaultOptions:{watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}},cache:new cr})}class Ar{constructor(e){t(this,e),this.user=null,this.displayName=null}authTokenHandler(t,e){t!==e&&(this.apolloClient=xr(t),this.getUser())}componentWillLoad(){this.apolloClient=xr(this.authToken)}componentWillRender(){if(this.authToken)return this.getUser()}componentDidRender(){const t=new CustomEvent("component rendered",{detail:this.host});document.dispatchEvent(t),setTimeout(()=>{this.host.shadowRoot.querySelector(".greeting").classList.add("fade-in")},0)}getUser(){return this.apolloClient.query({query:Y}).then(t=>{this.user=t.data.user,this.getDisplayName()}).catch(t=>{this.getDisplayName(),this.logError(t)})}getDisplayName(){this.displayName=this.user&&(this.user.nickName||this.user.firstName)||this.defaultName||""}parseTimeBasedGreetings(t){return t>=17?"Good evening":t>=12?"Good afternoon":"Good morning"}renderGreeting(){const t=new Date;return`${this.parseTimeBasedGreetings(t.getHours())}, ${this.displayName}`}logError(t){console.error(t)}render(){return this.displayName?e("div",{class:"greeting"},e("h3",{class:"font-size-large flush"},this.renderGreeting()),e("p",{class:"flush"},"This place was made for you!")):""}get host(){return n(this)}static get watchers(){return{authToken:["authTokenHandler"]}}static get style(){return"*{-webkit-box-sizing:border-box;box-sizing:border-box}.relative{position:relative}.overflow-hidden{overflow:hidden}.d-flex{display:-ms-flexbox;display:flex}.d-block{display:block}.d-inline{display:inline}.d-none{display:none}.align-items-center{-ms-flex-align:center;align-items:center}.w-100{width:100%}.img-responsive{display:block;height:auto;max-width:100%}hr{border:0;border-top:1px solid #e7e7e7;margin-bottom:1rem;margin-top:1rem}.font-family-base{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important}.text-white{color:#fff!important}.text-gray-light{color:#979797!important}.text-gray{color:#737373!important}.text-center{text-align:center}.text-uppercase{text-transform:uppercase}.text-uppercase.font-size-smaller{font-size:13px!important;letter-spacing:.5px}.font-size-base{font-size:16px!important}\@media (min-width:480px){.font-size-base{font-size:19px!important}}.font-size-large{font-size:19px!important}\@media (min-width:480px){.font-size-large{font-size:22px!important}}.font-size-smaller{font-size:14px!important}.font-size-smallest{font-size:10px}.font-weight-mid{font-weight:500}.bg-charcoal{background-color:#171717}.flush{margin:0!important}.flush-bottom{margin-bottom:0!important}.flush-top{margin-top:0!important}.push-half-bottom{margin-bottom:12px!important}.push-bottom{margin-bottom:24px!important}.push-top{margin-top:24px}.push-half-top{margin-top:12px!important}.soft-quarter-top{padding-top:6px}.component-header{font-family:acumin-pro-extra-condensed;font-size:2rem;font-weight:500;line-height:.95;text-transform:uppercase}\@media (min-width:480px){.component-header{font-size:2.125rem}}.card>a{color:inherit;display:block;text-decoration:none}.card img{width:100%}.color-gray{color:#737373}.media-label{display:-ms-flexbox;display:flex;position:absolute;right:0;bottom:0;padding:6px 8px}.media-label>:not(:last-child){margin-right:5px}.media-label .icon{fill:#fff;height:16px;width:12px}.btn{display:inline-block;margin-bottom:0;font-weight:300;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;padding:8px 10px;font-size:16px;line-height:1.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:4px;line-height:1;margin-top:5px;margin-bottom:5px;font-size:14px;padding:13px 16px}.btn.btn-gray-light{color:#fff;background-color:#979797;border-color:#979797}.btn.btn-gray-light.btn-outline{background:transparent;border-style:solid;border-width:1px;color:#979797}.btn.btn-gray-light.btn-outline:hover{background-color:#979797;color:#fff}.btn.btn-sm{font-size:13px;padding:10px 16px 11px}.greeting{opacity:0;-webkit-transition:opacity .45s ease-in-out .25s;transition:opacity .45s ease-in-out .25s}.greeting.fade-in{opacity:1}"}}var Fr=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t,s=!0,o=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var h=u.value;if(null==i)return;i="function"==typeof h?h(i):i[h]}}catch(t){o=!0,a=t}finally{try{!s&&c.return&&c.return()}finally{if(o)throw a}}return i},Tr=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},Cr=Object.prototype.toString;function kr(t){return"[object Array]"===Cr.call(t)}function Ir(t){return null!==t&&"object"==typeof t}function Or(t){return"[object Function]"===Cr.call(t)}function Rr(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),kr(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var Dr={isArray:kr,isArrayBuffer:function(t){return"[object ArrayBuffer]"===Cr.call(t)},isBuffer:function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:Ir,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===Cr.call(t)},isFile:function(t){return"[object File]"===Cr.call(t)},isBlob:function(t){return"[object Blob]"===Cr.call(t)},isFunction:Or,isStream:function(t){return Ir(t)&&Or(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Rr,merge:function t(){var e={};function n(n,r){e[r]="object"==typeof e[r]&&"object"==typeof n?t(e[r],n):n}for(var r=0,i=arguments.length;r<i;r++)Rr(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){e[r]="object"==typeof e[r]&&"object"==typeof n?t(e[r],n):"object"==typeof n?t({},n):n}for(var r=0,i=arguments.length;r<i;r++)Rr(arguments[r],n);return e},extend:function(t,e,n){return Rr(e,function(e,r){t[r]=n&&"function"==typeof e?Tr(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function Nr(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _r=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(Dr.isURLSearchParams(e))r=e.toString();else{var i=[];Dr.forEach(e,function(t,e){null!=t&&(Dr.isArray(t)?e+="[]":t=[t],Dr.forEach(t,function(t){Dr.isDate(t)?t=t.toISOString():Dr.isObject(t)&&(t=JSON.stringify(t)),i.push(Nr(e)+"="+Nr(t))}))}),r=i.join("&")}if(r){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function Pr(){this.handlers=[]}Pr.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},Pr.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Pr.prototype.forEach=function(t){Dr.forEach(this.handlers,function(e){null!==e&&t(e)})};var jr=Pr,Br=function(t,e,n){return Dr.forEach(n,function(n){t=n(t,e)}),t},Lr=function(t){return!(!t||!t.__CANCEL__)},Hr=function(t,e){Dr.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})},Mr=function(t,e,n,r,i){return function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,n,r,i)},Vr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ur=Dr.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=Dr.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},qr=Dr.isStandardBrowserEnv()?{write:function(t,e,n,r,i,s){var o=[];o.push(t+"="+encodeURIComponent(e)),Dr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Dr.isString(r)&&o.push("path="+r),Dr.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Kr=function(t){return new Promise(function(e,n){var r=t.data,i=t.headers;Dr.isFormData(r)&&delete i["Content-Type"];var s=new XMLHttpRequest;if(t.auth&&(i.Authorization="Basic "+btoa((t.auth.username||"")+":"+(t.auth.password||""))),s.open(t.method.toUpperCase(),_r(t.url,t.params,t.paramsSerializer),!0),s.timeout=t.timeout,s.onreadystatechange=function(){if(s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in s?function(t){var e,n,r,i={};return t?(Dr.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=Dr.trim(t.substr(0,r)).toLowerCase(),n=Dr.trim(t.substr(r+1)),e){if(i[e]&&Vr.indexOf(e)>=0)return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([n]):i[e]?i[e]+", "+n:n}}),i):i}(s.getAllResponseHeaders()):null;!function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(Mr("Request failed with status code "+n.status,n.config,null,n.request,n))}(e,n,{data:t.responseType&&"text"!==t.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:t,request:s}),s=null}},s.onabort=function(){s&&(n(Mr("Request aborted",t,"ECONNABORTED",s)),s=null)},s.onerror=function(){n(Mr("Network Error",t,null,s)),s=null},s.ontimeout=function(){n(Mr("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",s)),s=null},Dr.isStandardBrowserEnv()){var o=qr,a=(t.withCredentials||Ur(t.url))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;a&&(i[t.xsrfHeaderName]=a)}if("setRequestHeader"in s&&Dr.forEach(i,function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete i[e]:s.setRequestHeader(e,t)}),t.withCredentials&&(s.withCredentials=!0),t.responseType)try{s.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&s.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){s&&(s.abort(),n(t),s=null)}),void 0===r&&(r=null),s.send(r)})},zr={"Content-Type":"application/x-www-form-urlencoded"};function Qr(t,e){!Dr.isUndefined(t)&&Dr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var Wr,$r={adapter:(void 0!==St&&"[object process]"===Object.prototype.toString.call(St)?Wr=Kr:"undefined"!=typeof XMLHttpRequest&&(Wr=Kr),Wr),transformRequest:[function(t,e){return Hr(e,"Accept"),Hr(e,"Content-Type"),Dr.isFormData(t)||Dr.isArrayBuffer(t)||Dr.isBuffer(t)||Dr.isStream(t)||Dr.isFile(t)||Dr.isBlob(t)?t:Dr.isArrayBufferView(t)?t.buffer:Dr.isURLSearchParams(t)?(Qr(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Dr.isObject(t)?(Qr(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Dr.forEach(["delete","get","head"],function(t){$r.headers[t]={}}),Dr.forEach(["post","put","patch"],function(t){$r.headers[t]=Dr.merge(zr)});var Yr=$r;function Gr(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Jr=function(t){var e,n;return Gr(t),t.baseURL&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t.url)&&(t.url=(e=t.baseURL,(n=t.url)?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e)),t.headers=t.headers||{},t.data=Br(t.data,t.headers,t.transformRequest),t.headers=Dr.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),Dr.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||Yr.adapter)(t).then(function(e){return Gr(t),e.data=Br(e.data,e.headers,t.transformResponse),e},function(e){return Lr(e)||(Gr(t),e&&e.response&&(e.response.data=Br(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})},Xr=function(t,e){e=e||{};var n={};return Dr.forEach(["url","method","params","data"],function(t){void 0!==e[t]&&(n[t]=e[t])}),Dr.forEach(["headers","auth","proxy"],function(r){Dr.isObject(e[r])?n[r]=Dr.deepMerge(t[r],e[r]):void 0!==e[r]?n[r]=e[r]:Dr.isObject(t[r])?n[r]=Dr.deepMerge(t[r]):void 0!==t[r]&&(n[r]=t[r])}),Dr.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])}),n};function Zr(t){this.defaults=t,this.interceptors={request:new jr,response:new jr}}Zr.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Xr(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[Jr,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},Zr.prototype.getUri=function(t){return t=Xr(this.defaults,t),_r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Dr.forEach(["delete","get","head","options"],function(t){Zr.prototype[t]=function(e,n){return this.request(Dr.merge(n||{},{method:t,url:e}))}}),Dr.forEach(["post","put","patch"],function(t){Zr.prototype[t]=function(e,n,r){return this.request(Dr.merge(r||{},{method:t,url:e,data:n}))}});var ti=Zr;function ei(t){this.message=t}ei.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ei.prototype.__CANCEL__=!0;var ni=ei;function ri(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new ni(t),e(n.reason))})}ri.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ri.source=function(){var t;return{token:new ri(function(e){t=e}),cancel:t}};var ii=ri;function si(t){var e=new ti(t),n=Tr(ti.prototype.request,e);return Dr.extend(n,ti.prototype,e),Dr.extend(n,e),n}var oi=si(Yr);oi.Axios=ti,oi.create=function(t){return si(Xr(oi.defaults,t))},oi.Cancel=ni,oi.CancelToken=ii,oi.isCancel=Lr,oi.all=function(t){return Promise.all(t)},oi.spread=function(t){return function(e){return t.apply(null,e)}};var ai=oi;ai.default=oi;var ui=ai;class ci{constructor(e){t(this,e),this.debug=!1,this.storageKey="crds-hearts",this._likes=[]}componentWillLoad(){this.console=new r(this.debug),this.config=new i,this.isLiked=this.likes().includes(this.contentfulId),this.getCount().then(t=>{this.count=t})}getCount(){let t=`${this.config.endpoint()}/entries/${this.contentfulId}`;return ui.get(t,{params:{access_token:this.config.token()}}).then(t=>Fr(t,"data","fields","interaction_count")||0)}abbrevCount(){return this.count>1e3?`${Math.round(this.count/1e3*4)/4}K`:(this.count||0).toString()}likes(){const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}toggle(t){this.console.log("toggle()"),t.preventDefault(),this.isLiked=!this.isLiked,this.isLiked?(this.add(),this.count++):(this.remove(),this.count>0&&this.count--)}remove(){this.console.log("removeFromStore()"),this._likes=this.likes().filter(t=>{if(t.toString()!==this.contentfulId)return t}),this.save(this._likes)}add(){this._likes=this.likes(),this._likes.push(this.contentfulId),this.save(this.removeDuplicates(this._likes))}removeDuplicates(t){return Array.from(new Set(t))}save(t){this.console.log("save()"),localStorage.setItem(this.storageKey,JSON.stringify(t)),ui.post(`${this.endpoint()}/content-interactions`,{entry_id:this.contentfulId,action:this.isLiked?"add":"subtract"})}endpoint(){return s.getMeta("crds:interactions-endpoint")||"https://8k97vbzbrk.execute-api.us-east-1.amazonaws.com/int"}render(){return e("a",{href:"#",onClick:t=>this.toggle(t),class:this.isLiked?"on":"off"},e("span",{innerHTML:'<svg width="256px" height="256px" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="heart"><path d="M222.944078,39.3395243 C232.469215,47.3270078 239.075354,57.1577642 242.762502,68.8317796 C246.449652,80.505795 246.987363,92.2566154 244.37563,104.084241 C241.763898,115.911866 236.156363,126.126627 227.553015,134.728537 L138.600552,226.891836 C135.527926,229.963948 131.994414,231.5 128,231.5 C124.005586,231.5 120.472074,229.963948 117.399448,226.891836 L28.4469857,135.189353 C19.8436364,126.280238 14.2361025,115.911866 11.6243699,104.084241 C9.01263721,92.2566154 9.55034867,80.505795 13.2374974,68.8317796 C16.924646,57.1577642 23.5307851,47.3270078 33.0559215,39.3395243 C41.3520061,32.2736738 50.7235066,27.8191121 61.1704302,25.9758461 C71.6173538,24.1325802 81.9106415,24.90061 92.0503004,28.2799285 C102.189959,31.6592471 111.100566,37.3426551 118.782129,45.3301387 L128,54.5464684 L137.217871,45.3301387 C144.899434,37.3426551 153.810041,31.6592471 163.9497,28.2799285 C174.089359,24.90061 184.382646,24.1325802 194.82957,25.9758461 C205.276493,27.8191121 214.647994,32.2736738 222.944078,39.3395243 Z" id="Path"></path></g></svg>',class:"icon heart"}),e("span",{innerHTML:'<svg width="256px" height="256px" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="heart-o"><path d="M218.116413,43.6103959 C227.157221,51.1917362 233.427455,60.5226236 236.927121,71.603045 C240.426788,82.6834664 240.937158,93.8367875 238.458225,105.063008 C235.979293,116.289229 230.656887,125.984595 222.490997,134.14912 L138.061541,221.626149 C135.14515,224.542052 131.791308,226 128,226 C124.208692,226 120.85485,224.542052 117.938459,221.626149 L33.5090034,134.586505 C25.3431125,126.130395 20.0207075,116.289229 17.5417748,105.063008 C15.0628421,93.8367875 15.5732123,82.6834664 19.0728789,71.603045 C22.5725454,60.5226236 28.7698738,51.1917362 37.6648574,43.6103959 C46.559841,36.0290557 56.4026531,31.6552043 67.1932938,30.4888417 C76.8173768,29.3224791 86.587277,30.6346345 96.5030011,34.425308 C105.543809,37.9243891 113.126417,42.8814185 119.250834,49.2964028 L128,58.4814907 L136.749166,49.2964028 C144.040141,41.7150625 152.570578,36.3206413 162.340478,33.1131525 C172.110378,29.9056637 181.95319,29.1766863 191.868914,30.9262268 C201.784638,32.6757674 210.533805,36.903826 218.116413,43.6103959 Z M212.429455,124.526647 C218.262231,118.694847 222.272267,111.477993 224.459559,102.876083 C226.646851,94.2741726 226.573939,85.8909618 224.24083,77.726437 C221.61608,68.3955562 216.585309,60.5955167 209.148518,54.3263319 C201.711727,48.0571471 193.47293,44.630959 184.432123,44.0477811 C177.141149,43.7561888 169.704357,45.3599365 162.121749,48.8590176 C155.705691,51.4833285 150.602015,54.9824096 146.810708,59.356261 L128,78.6012073 L109.189292,59.356261 C105.10635,54.9824096 100.002668,51.3375357 93.8782512,48.4216325 C86.2956426,44.9225514 78.8588512,43.4646031 71.567877,44.0477811 C62.5270696,44.630959 54.2882735,48.0571471 46.8514821,54.3263319 C39.4146907,60.5955167 34.38392,68.3955562 31.7591701,77.726437 C29.4260613,85.8909618 29.3531494,94.2741726 31.5404409,102.876083 C33.7277325,111.477993 37.7377693,118.694847 43.5705447,124.526647 L128,212.003675 L212.429455,124.526647 Z"></path></g></svg>',class:"icon heart-o"}),e("span",{class:"count"},this.abbrevCount()))}static get style(){return"a{font-family:sans-serif;display:block;color:#979797;font-size:80%;text-decoration:none}a>*{vertical-align:middle}a.on>span.heart-o.heart,a.on>span.heart.heart{display:inline-block}a.on>span.heart-o.heart-o,a.on>span.heart.heart-o{display:none}a.on>span.heart-o>svg,a.on>span.heart>svg{fill:#c05c04}a span.count{padding-left:.5rem}a span.heart,a span.heart-o{display:inline-block;border:1px solid;border-radius:50%;width:42px;height:42px}a span.heart-o svg,a span.heart svg{margin:9px;width:24px;height:24px;fill:currentColor}a span.heart{display:none}a span.heart-o{display:inline-block}"}}class hi{constructor(e){t(this,e),this.isActive=!1,this.handleInnerClick=t=>{t.stopPropagation()},this.closeModal=()=>{this.isActive=!1,"function"==typeof this.onModalClose&&this.onModalClose()}}componentDidUpdate(){document.body.appendChild(this.element)}render(){return e("div",{class:`modal ${this.isActive?"is-active":""}`,id:"subscribeModalForm",tabindex:"-1",onClick:this.closeModal},e("div",{class:"modal-content",onClick:this.handleInnerClick},e("div",{class:"modal-header"},e("button",{type:"button",class:"modal-close",onClick:this.closeModal})),e("div",{class:"modal-body"},this.label&&e("h3",{class:"modal-title"},this.label),e("slot",null))))}get element(){return n(this)}static get style(){return".modal{background-color:rgba(0,0,0,.8);bottom:0;left:0;opacity:0;position:fixed;right:0;top:0;-webkit-transition:opacity .3s ease,visibility .3s ease;transition:opacity .3s ease,visibility .3s ease;visibility:hidden;will-change:opacity,visibility}.modal.is-active{opacity:1;visibility:visible;z-index:11}.modal.is-active .modal-content{-webkit-transform:translateY(0);transform:translateY(0)}.modal-content{background:#fff;font-size:16px;margin:45px auto;max-width:600px;position:relative;-webkit-transform:translateY(-50px);transform:translateY(-50px);-webkit-transition:-webkit-transform .35s ease;transition:-webkit-transform .35s ease;transition:transform .35s ease;transition:transform .35s ease,-webkit-transform .35s ease;will-change:transform}.modal-body{padding:40px}.modal-title{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:36px!important;margin:0;text-transform:uppercase}\@media screen and (min-width:480px){.modal-title{font-size:52.2px!important}}input{background-image:none;-webkit-box-shadow:none;box-shadow:none}input[type=text]{background-color:#f4f4f4;border:1px solid #f4f4f4;border-radius:0;color:#4d4d4d;display:block;font-size:16px;line-height:1.5;padding:8px 10px;-webkit-transition:border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;width:100%}input:focus{border-color:#8bceed;-webkit-box-shadow:inset 0 0 0 1px rgba(139,206,237,.5);box-shadow:inset 0 0 0 1px rgba(139,206,237,.5)}input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;background-color:#0095d9;border:1px solid #0095d9;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;line-height:1;margin-top:24px;padding:14px 20px 16px}input[type=submit],label{display:inline-block;margin-bottom:5px}label{font-weight:700;max-width:100%}.modal-close{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:hsla(0,0%,73.3%,.6);-o-border-image:none;border-image:none;border-radius:50%;border-style:none;color:#fff;cursor:pointer;height:25px;position:absolute;right:15px;top:15px;width:25px}.modal-close:after{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;bottom:3px;content:\"x\";display:inline-block;font-size:16px;position:relative}.modal-close:focus{outline:none}"}}class li{static articleIcon(){return e("path",{d:"M118.96 18.175c0 1.376-.481 2.547-1.445 3.51-.964.964-2.134 1.446-3.511 1.446H4.957c-1.377 0-2.547-.482-3.511-1.445C.482 20.722 0 19.55 0 18.175V4.957C0 3.58.482 2.41 1.446 1.446S3.58 0 4.956 0h109.048c1.377 0 2.547.482 3.51 1.446.965.964 1.447 2.134 1.447 3.51v13.219zM4.958 76.003c-1.377 0-2.547-.482-3.511-1.446S0 72.423 0 71.046V57.828c0-1.377.482-2.547 1.446-3.51.964-.965 2.134-1.447 3.51-1.447h175.137c1.377 0 2.547.482 3.511 1.446s1.446 2.134 1.446 3.511v13.218c0 1.377-.482 2.547-1.446 3.51-.964.965-2.134 1.447-3.51 1.447H4.956zm0 105.742c-1.377 0-2.547-.482-3.511-1.445C.482 179.336 0 178.166 0 176.789V163.57c0-1.377.482-2.547 1.446-3.511s2.134-1.446 3.51-1.446h175.137c1.377 0 2.547.482 3.511 1.446s1.446 2.134 1.446 3.51v13.219c0 1.377-.482 2.547-1.446 3.51-.964.964-2.134 1.446-3.51 1.446H4.956zm109.047-76.002c1.377 0 2.547.482 3.51 1.445.965.964 1.447 2.135 1.447 3.511v13.218c0 1.377-.482 2.547-1.446 3.511s-2.134 1.446-3.511 1.446H4.957c-1.377 0-2.547-.482-3.511-1.446S0 125.294 0 123.918v-13.219c0-1.376.482-2.547 1.446-3.51.964-.964 2.134-1.446 3.51-1.446h109.048z"})}static podcastIcon(){return e("path",{d:"M30.857 41.151c0-11.43 4-21.147 12-29.149C50.857 4.001 60.571 0 72 0c11.428 0 21.143 4 29.143 12.002s12 17.718 12 29.149v68.585c0 11.43-4 21.147-12 29.149-8 8.001-17.715 12.002-29.143 12.002-11.429 0-21.143-4-29.143-12.002s-12-17.718-12-29.15V41.152zm108 44.58c1.428 0 2.643.5 3.643 1.5s1.5 2.215 1.5 3.644v18.86c0 12.003-2.715 23.077-8.143 33.222-5.429 10.145-12.857 18.575-22.286 25.29-9.428 6.716-19.857 10.931-31.285 12.646v19.718h29.142c1.429 0 2.643.5 3.643 1.5s1.5 2.215 1.5 3.644v8.573c0 1.429-.5 2.643-1.5 3.644-1 1-2.214 1.5-3.643 1.5H32.571c-1.428 0-2.643-.5-3.642-1.5-1-1-1.5-2.215-1.5-3.644v-8.573c0-1.429.5-2.643 1.5-3.644 1-1 2.214-1.5 3.642-1.5h29.143v-19.718c-11.428-1.715-21.857-5.93-31.286-12.645-9.428-6.716-16.857-15.146-22.285-25.291C2.714 132.812 0 121.738 0 109.736v-18.86c0-1.43.5-2.644 1.5-3.644s2.214-1.5 3.643-1.5h10.286c1.428 0 2.642.5 3.642 1.5s1.5 2.214 1.5 3.643v18.86c0 9.431 2.358 18.076 7.072 25.935 4.714 7.858 11 14.074 18.857 18.646 7.857 4.573 16.428 6.859 25.714 6.859 9.286 0 17.857-2.358 25.714-7.073 7.857-4.715 14.072-11.074 18.643-19.075 4.572-8.002 6.857-16.575 6.857-25.72V90.875c0-1.429.5-2.643 1.5-3.643s2.215-1.5 3.643-1.5h10.286z"})}static videoIcon(){return e("path",{d:"M168.209 84.996c4.231 2.371 7.075 5.665 8.53 9.88 1.454 4.217 1.454 8.433 0 12.649-1.455 4.216-4.299 7.51-8.53 9.88L28.564 199.619c-3.967 2.371-8.2 3.162-12.695 2.371-4.496-.79-8.265-2.898-11.307-6.324C1.521 192.24 0 188.155 0 183.412V18.99c0-5.27 1.587-9.552 4.76-12.845C7.935 2.85 11.77.874 16.266.214c4.497-.658 8.596.198 12.299 2.57l139.645 82.212z"})}static bullseyeIcon(t,n,r){return e("svg",{width:t,height:n,"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"},e("path",{fill:r,d:"M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm0 432c-101.69 0-184-82.29-184-184 0-101.69 82.29-184 184-184 101.69 0 184 82.29 184 184 0 101.69-82.29 184-184 184zm0-312c-70.69 0-128 57.31-128 128s57.31 128 128 128 128-57.31 128-128-57.31-128-128-128zm0 192c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64z"}))}}const fi=$`
{
    user {
        lifeStage {
            id
            title
        }
    }
}
`,di=$`
{
  lifeStages{
    title
    description
    id
    imageUrl
    contentType
    contentTotal
    content {
        id
        title
        authors {
            fullName
            qualifiedUrl
        }
        duration
        contentType
        category
        slug
        qualifiedUrl
        imageUrl
    }
  }
}
`,pi=$`
mutation setLifeStage($lifeStage: LifeStageInput)
 {
  setLifeStage(lifeStage: $lifeStage) {
    lifeStage {
      title
      id
    }
  }
}`;class gi{constructor(e){t(this,e),this.analytics=window.analytics||{},this.crdsDefaultImg="https://crds-cms-uploads.imgix.net/content/images/cr-social-sharing-still-bg.jpg",this.recommendedContent=[],this.lifeStages=[],this.user={name:"",lifeStage:null}}authTokenHandler(t,e){t!==e&&(this.apolloClient=xr(t),this.getUser())}componentWillLoad(){this.apolloClient=xr(this.authToken),this.getLifeStages(),this.getUser()}componentDidLoad(){s.trackInView(this.host,"RecommendedContentComponent",this.getLifeStageId.bind(this))}componentWillRender(){if(this.user.lifeStage&&null!==this.user.lifeStage.id&&this.lifeStages.length)return this.filterContent(this.user.lifeStage.id)}getLifeStageId(){return this.user.lifeStage&&this.user.lifeStage.id}getUser(){return this.authToken?this.apolloClient.query({query:fi}).then(t=>{this.user=Object.assign({},this.user,{lifeStage:{id:t.data.user.lifeStage&&t.data.user.lifeStage.id,title:t.data.user.lifeStage&&t.data.user.lifeStage.title}}),this.host.forceUpdate()}):null}getLifeStages(){return this.apolloClient.query({query:di}).then(t=>{this.lifeStages=t.data.lifeStages,this.host.forceUpdate()})}filterContent(t){return this.recommendedContent=this.lifeStages.find(e=>e.id===t).content}handleBackClick(t){this.recommendedContent=[],this.user=Object.assign({},this.user,{lifeStage:{id:null,title:null}}),t.target.parentNode.scrollLeft=0}handleContentClicked(t){try{this.analytics.track("RecommendedContentClicked",{parent:this.host.tagName,title:t.currentTarget.querySelector(".component-header").innerText,targetUrl:t.target.parentElement.href,lifeStageId:this.user.lifeStage.id,lifeStageName:this.user.lifeStage.title})}catch(t){console.error(t)}}setLifeStage(t,e){return this.apolloClient.mutate({variables:{lifeStage:t?{id:t,title:e}:null},mutation:pi}).catch(t=>console.error(t))}handleLifeStageClicked(t){const e=t.target,n=this.host.shadowRoot.querySelectorAll("[data-life-stage-id]");n.forEach(t=>t.classList.add("disabled")),this.user=Object.assign({},this.user,{lifeStage:{id:e.dataset.lifeStageId,title:e.dataset.lifeStageName}});try{this.analytics.track("LifeStageUpdated",{lifeStageId:this.user.lifeStage.id,lifeStageName:this.user.lifeStage.title})}catch(t){console.error(t)}this.filterContent(this.user.lifeStage.id),e.parentNode.scrollLeft=0,n.forEach(t=>t.classList.remove("disabled")),this.setLifeStage(this.user.lifeStage.id,this.user.lifeStage.title)}renderCardSkeleton(){return[1,2,3,4,5].map(()=>e("div",{class:"skeleton skeleton-life-stage"},e("div",{class:"content"},e("div",{class:"text title shimmer shimmer-reverse"}),e("div",{class:"text subtitle shimmer shimmer-reverse"}))))}renderTextSkeleton(){return e("div",{class:"skeleton text-skeleton"},e("div",{class:"title shimmer"}),e("div",{class:"subtitle shimmer"}))}renderLifeStages(){return this.lifeStages.map((t,n)=>e("div",{class:`card ${this.recommendedContent.length?"d-none":""}`,key:n,style:{backgroundImage:`url(${s.imgixify(t.imageUrl+"?auto=format&h=400")}`,backgroundSize:"cover",backgroundPosition:"center"},"data-life-stage-name":t.title,"data-life-stage-id":t.id,onClick:t=>this.handleLifeStageClicked(t)},e("div",{class:"bg-overlay"}),e("div",{class:"card-content"},e("h2",{class:"card-title component-header"},t.title),e("h3",{class:"card-subtitle"},`${t.contentTotal} items`))))}renderMediaLabel(t,n){if("series"!==t)return e("div",{class:"media-label bg-charcoal text-white align-items-center"},n&&e("span",{class:"font-size-smallest"},n),this.renderIcon(t))}renderIcon(t){let n;switch(t){case"video":case"message":n=li.videoIcon();break;case"podcast":case"episode":n=li.podcastIcon();break;case"article":n=li.articleIcon()}return e("svg",{class:"icon",viewBox:"0 0 256 256"},n)}renderRecommendedContent(){const t=window.innerWidth>767?"?auto=format&w=400&h=225&fit=crop":"?auto=format&w=262&h=196.5&fit=crop";return this.recommendedContent.map((n,r)=>e("div",{class:"card",key:r,onClick:t=>this.handleContentClicked(t)},e("a",{class:"relative d-block",href:n.qualifiedUrl},this.renderMediaLabel(n.contentType,n.duration),e("img",{src:(n.imageUrl||this.crdsDefaultImg)+t,class:"img-responsive"})),e("a",{href:n.qualifiedUrl},e("h4",{class:"text-gray font-size-smaller font-weight-mid text-uppercase soft-quarter-top"},n.category),e("h3",{class:"component-header"},n.title),n.authors&&e("p",{class:"soft-quarter-top"},n.authors.map((t,r)=>e("a",{class:"text-gray-light font-size-smaller",href:t.qualifiedUrl,style:{color:"inherit",display:"inline-block",textDecoration:"none"}},t.fullName,r<n.authors.length-1?e("span",null,","):""))))))}renderText(){const t=this.lifeStages.find(t=>t.id===(this.user.lifeStage&&this.user.lifeStage.id));return e("div",null,e("h2",{class:"component-header flush-bottom"},this.recommendedContent.length&&t?"Recommended For You":"Personalize Your Experience"),e("p",{class:"push-half-top push-half-bottom color-gray"},this.recommendedContent.length&&t?t.description:"Which of these best describes your stage of life? (Pick one)"))}render(){const t=this.lifeStages.length&&this.user.lifeStage&&!this.user.lifeStage.id,n=this.recommendedContent.length,r=`cards ${this.recommendedContent.length?"media-cards":""}`;return e("div",{class:"life-stages"},e("div",{class:"life-stages-inner"},e("div",{class:"life-stages-header"},(()=>t||n?this.renderText():this.renderTextSkeleton())(),!!this.recommendedContent.length&&e("div",{class:"life-stage-selected"},e("a",{class:"btn btn-gray-light btn-outline btn-sm back-btn flush",onClick:t=>this.handleBackClick(t)},"change"))),e("div",{class:r},(()=>t?this.renderLifeStages():n?this.renderRecommendedContent():this.renderCardSkeleton())())))}get host(){return n(this)}static get watchers(){return{authToken:["authTokenHandler"]}}static get style(){return"*{-webkit-box-sizing:border-box;box-sizing:border-box}.relative{position:relative}.overflow-hidden{overflow:hidden}.d-flex{display:-ms-flexbox;display:flex}.d-block{display:block}.d-inline{display:inline}.d-none{display:none}.align-items-center{-ms-flex-align:center;align-items:center}.w-100{width:100%}.img-responsive{display:block;height:auto;max-width:100%}hr{border:0;border-top:1px solid #e7e7e7;margin-bottom:1rem;margin-top:1rem}.font-family-base{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important}.text-white{color:#fff!important}.text-gray-light{color:#979797!important}.text-gray{color:#737373!important}.text-center{text-align:center}.text-uppercase{text-transform:uppercase}.text-uppercase.font-size-smaller{font-size:13px!important;letter-spacing:.5px}.font-size-base{font-size:16px!important}\@media (min-width:480px){.font-size-base{font-size:19px!important}}.font-size-large{font-size:19px!important}\@media (min-width:480px){.font-size-large{font-size:22px!important}}.font-size-smaller{font-size:14px!important}.font-size-smallest{font-size:10px}.font-weight-mid{font-weight:500}.bg-charcoal{background-color:#171717}.flush{margin:0!important}.flush-bottom{margin-bottom:0!important}.flush-top{margin-top:0!important}.push-half-bottom{margin-bottom:12px!important}.push-bottom{margin-bottom:24px!important}.push-top{margin-top:24px}.push-half-top{margin-top:12px!important}.soft-quarter-top{padding-top:6px}.component-header{font-family:acumin-pro-extra-condensed;font-size:2rem;font-weight:500;line-height:.95;text-transform:uppercase}\@media (min-width:480px){.component-header{font-size:2.125rem}}.card>a{color:inherit;display:block;text-decoration:none}.card img{width:100%}.color-gray{color:#737373}.media-label{display:-ms-flexbox;display:flex;position:absolute;right:0;bottom:0;padding:6px 8px}.media-label>:not(:last-child){margin-right:5px}.media-label .icon{fill:#fff;height:16px;width:12px}.btn{display:inline-block;margin-bottom:0;font-weight:300;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;padding:8px 10px;font-size:16px;line-height:1.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:4px;line-height:1;margin-top:5px;margin-bottom:5px;font-size:14px;padding:13px 16px}.btn.btn-gray-light{color:#fff;background-color:#979797;border-color:#979797}.btn.btn-gray-light.btn-outline{background:transparent;border-style:solid;border-width:1px;color:#979797}.btn.btn-gray-light.btn-outline:hover{background-color:#979797;color:#fff}.btn.btn-sm{font-size:13px;padding:10px 16px 11px}.skeleton{position:relative}.skeleton,.skeleton .shimmer{overflow:hidden}.skeleton .shimmer:after{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-transform:translateX(-100%);transform:translateX(-100%);background-image:linear-gradient(100deg,#f0f0f0 20%,hsla(0,0%,100%,.3) 30%,hsla(0,0%,100%,.7) 40%,#f0f0f0 50%);-webkit-animation:shimmer 1.5s infinite;animation:shimmer 1.5s infinite;-webkit-animation-timing-function:ease;animation-timing-function:ease;content:\"\"}.skeleton .shimmer-reverse:after{background-image:linear-gradient(100deg,#fff 20%,hsla(0,0%,94.1%,.3) 30%,hsla(0,0%,94.1%,.7) 40%,#fff 50%)}\@-webkit-keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}\@keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}h1,h2,h3,h4,h5,p{margin:0}.disabled{opacity:.5;pointer-events:none}.life-stages{background-color:#fff;min-height:300px;overflow:hidden}\@media (min-width:768px){.life-stages{min-height:500px}}.life-stages .life-stages-inner{-webkit-transition:all .45s ease;transition:all .45s ease}.life-stages .life-stages-header{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-bottom:1.875rem}\@media (min-width:768px){.life-stages .life-stages-header{-ms-flex-direction:row;flex-direction:row}}.life-stages .life-stages-header .life-stage-selected{font-size:.875rem}\@media (min-width:768px){.life-stages .life-stages-header .life-stage-selected{margin-left:auto}}.cards{display:grid;grid-auto-columns:180px;grid-auto-flow:column;grid-column:1/-1;grid-gap:1rem;-webkit-overflow-scrolling:touch;overflow-x:scroll;padding-bottom:1.875rem;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;scrollbar-base-color:transparent}.cards.media-cards{grid-auto-columns:262px}\@media (min-width:768px){.cards{grid-auto-columns:220px;grid-gap:1.875rem}.cards.media-cards{grid-auto-columns:400px}}.cards .card,.cards .skeleton-life-stage{cursor:pointer;height:340px;overflow:hidden;position:relative;scroll-snap-align:start}.cards .card:hover,.cards .skeleton-life-stage:hover{cursor:pointer}.cards .card:hover .bg-overlay,.cards .skeleton-life-stage:hover .bg-overlay{opacity:.75}.cards .card .bg-overlay,.cards .card .card-content,.cards .skeleton-life-stage .bg-overlay,.cards .skeleton-life-stage .card-content{bottom:0;pointer-events:none;position:absolute;width:100%}.cards .card .bg-overlay,.cards .skeleton-life-stage .bg-overlay{background:-webkit-gradient(linear,left bottom,left top,from(#000),color-stop(50%,transparent));background:linear-gradient(0deg,#000,transparent 50%);height:100%;-webkit-transition:all .45s ease;transition:all .45s ease}.cards .card .card-content,.cards .skeleton-life-stage .card-content{bottom:0;left:0;padding:1rem}.cards .card .card-content .card-subtitle,.cards .card .card-content .card-title,.cards .skeleton-life-stage .card-content .card-subtitle,.cards .skeleton-life-stage .card-content .card-title{letter-spacing:.5px;margin:0;text-transform:uppercase}.cards .card .card-content .card-title,.cards .skeleton-life-stage .card-content .card-title{color:#fff}.cards .card .card-content .card-subtitle,.cards .skeleton-life-stage .card-content .card-subtitle{color:hsla(0,0%,100%,.75);font-size:.75rem}.skeleton-life-stage{background-color:#f0f0f0}.skeleton-life-stage .content{bottom:0;padding:1rem;position:absolute;width:100%}.skeleton-life-stage .content .text{background-color:#fff;margin-top:.5rem;overflow:hidden;position:relative}.skeleton-life-stage .content .title{height:24px;width:90%}.skeleton-life-stage .content .subtitle{height:16px;width:55%}.text-skeleton{width:100%}.text-skeleton .subtitle,.text-skeleton .title{background-color:#f0f0f0;overflow:hidden;position:relative}.text-skeleton .title{height:24px;margin-bottom:1rem;width:35%}.text-skeleton .subtitle{height:16px;width:50%}"}}const vi=(t,e)=>[...e];class yi{constructor(e){t(this,e),this.env="prod",this.data=[]}componentWillLoad(){ui.get(this.src||`https://crds-data.netlify.com/shared-footer/${this.env}.json`).then(t=>this.data=t.data)}componentDidLoad(){this.element.parentElement.classList.add("shared-footer"),this.element.parentElement.classList.remove("shared-footer-skeleton")}renderElement(t){if(!t.href)return t.title;let n={target:t.href.match(/:\/\//)?"_blank":"",href:t.href};return t["automation-id"]&&(n["data-automation-id"]=t["automation-id"]),e("a",Object.assign({},n),t.img?e("img",{src:t.img,alt:t.title,title:t.title}):t.title)}renderGroups(t){const n=t.map(t=>t.children?e(vi,null,e("p",null,t.title),e("ul",null,t.children.map(t=>e("li",null,this.renderElement(t))))):e("li",null,this.renderElement(t))),r=t.filter(t=>t.children).length>0?"Fragment":"ul";return e(r,null,n)}renderColumns(){return this.data.map(t=>e("div",{class:t.class},e("h5",null,this.renderElement(t)),this.renderGroups(t.children)))}render(){return 0===this.data.length?null:e("footer",null,e("div",{class:"container"},this.renderColumns()))}get element(){return n(this)}static get style(){return"footer{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#737373;background-color:#e7e7e7;overflow:hidden;padding:3.125rem 0}footer .container{margin:0 auto;max-width:1170px}\@media only screen and (min-width:768px){footer .container{display:-ms-flexbox;display:flex}}footer .container div{padding-left:15px;padding-right:15px;margin-bottom:24px;vertical-align:top}\@media only screen and (min-width:768px){footer .container div{-ms-flex:1;flex:1;width:16.66667%}}footer .container div p{margin-bottom:0;font-weight:700}footer .container div ul{list-style-type:none;margin:0;padding-left:0}footer .container div.social-icons{padding-left:0}\@media only screen and (min-width:768px){footer .container div.social-icons{-ms-flex:2;flex:2;text-align:right;width:33.33333%}}footer .container div.social-icons li{display:inline}footer .container div.social-icons li a{-webkit-box-sizing:border-box;box-sizing:border-box;margin-left:.75rem;background:#737373;border-radius:50%;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-pack:center;justify-content:center;height:36px;width:36px;padding:10px}footer .container div.social-icons li a img{max-width:100%}footer .container a{color:#737373;text-decoration:none}footer .container h5{font-size:16.1px!important;line-height:1.1;margin:12px 0}"}}class mi{constructor(e){t(this,e),this.env="prod",this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,this.giveNavIsShowing=!1,this.data=[]}componentWillLoad(){return ui.get(this.src||`https://crds-data.netlify.com/shared-header/${this.env}.json`).then(t=>this.data=t.data).catch(t=>console.error(t))}componentDidLoad(){this.element.parentElement.classList.add("shared-header"),this.element.parentElement.classList.remove("shared-header-skeleton")}onClick(t,e){t.preventDefault(),this.active=e}renderSections(t){return t?t.map(t=>{const n=s.parameterize(t.title);return e("nav-section",{slug:n,onActivate:this.onClick.bind(this),isActive:this.active==n},e("h2",null,t.title),e("p",null,t.description))}):null}handleBackClick(t){t.preventDefault(),this.active=null}renderSubnavs(t){if(!t)return null;const n=t.map(t=>e("nav-section-subnav",{onBack:this.handleBackClick.bind(this),active:this.active,slug:s.parameterize(t.title)},this.renderChildren(t)));return e("div",{class:"subnavigation"},n)}renderChildren(t){const n=t.children.map(t=>{if("string"==typeof t)return e("h4",null,t);{const n=t.map(t=>e("li",{class:t.top_level?"top-level":null},e("a",{href:t.href||"#","data-automation-id":t["automation-id"]},t.title)));return e("ul",null,n)}});return e(vi,null,e("h2",null,t.title),n)}toggleMenu(t,e){if(t.preventDefault(),t.stopPropagation(),"main-nav"==e)this.giveNavIsShowing=!1,this.mainNavIsShowing=!this.mainNavIsShowing,this.profileNavIsShowing=!1,this.mainNavIsShowing?document.body.setAttribute("style","overflow: hidden; position: absolute; width: 100vw;"):document.body.setAttribute("style","overflow: scroll;");else{if("profile-nav"==e)return this.giveNavIsShowing=!1,this.mainNavIsShowing=!1,this.profileNavIsShowing=!this.profileNavIsShowing,this.profileNavIsShowing?document.body.setAttribute("style","overflow: hidden; position: absolute; width: 100vw;"):document.body.setAttribute("style","overflow: scroll;");if("give-nav"==e)return this.giveNavIsShowing=!this.giveNavIsShowing,this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,this.giveNavIsShowing?document.body.setAttribute("style","overflow: hidden; position: absolute; width: 100vw;"):document.body.setAttribute("style","overflow: scroll; ")}}closeMenus(t){return t.preventDefault(),this.giveNavIsShowing=!1,this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,document.body.setAttribute("style","overflow: scroll;")}navClasses(){let t=[];return this.mainNavIsShowing&&t.push("is-showing"),this.active&&t.push(`section--${this.active}`),(this.profileNavIsShowing||this.giveNavIsShowing)&&(t=[]),t.join(" ")}navCloseClasses(){let t=["close"];return(this.mainNavIsShowing||this.profileNavIsShowing||this.giveNavIsShowing)&&t.push("is-showing"),t.join(" ")}handleScroll(t){if(this.mainNavIsShowing||this.giveNavIsShowing||this.profileNavIsShowing)return document.body.setAttribute("style","overflow: scroll;"),this.closeMenus(t)}render(){return e(vi,null,e("global-nav",{mainNavIsShowing:this.mainNavIsShowing,profileNavIsShowing:this.profileNavIsShowing,giveNavIsShowing:this.giveNavIsShowing,navClickHandler:this.toggleMenu.bind(this),giveData:this.data.give,profileData:this.data.profile,config:this.data.config,env:this.env}),e("nav",{class:this.navClasses(),onClick:t=>t.stopPropagation()},e("div",{class:"content"},e("div",{class:"navigation"},e("ul",null,this.renderSections(this.data.nav))),this.renderSubnavs(this.data.nav),e("nav-ctas",{active:this.active,data:this.data.promos}))),e("div",{class:this.navCloseClasses()},e("div",{class:"close-icon",innerHTML:'<svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" class="svg-inline--fa fa-times fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"></path></svg>',onClick:this.closeMenus.bind(this)})))}get element(){return n(this)}static get style(){return"\@media (max-width:992px){.subnavigation{left:100vw;padding-bottom:125px;position:absolute;top:0}}\@media (min-width:992px){.subnavigation{padding-top:47px}}.subnavigation h3{color:#fff;font-size:11px;opacity:.5;text-transform:uppercase}nav{background-color:#000;background-repeat:no-repeat;background-size:cover;color:#fff;display:none;font-family:acumin-pro,helvetica,arial,sans-serif;height:calc(100% - 47px);overflow-x:hidden;overflow-y:scroll;position:fixed;top:47px;-webkit-transform:translateX(0);transform:translateX(0);width:100vw;z-index:2;background-image:url(https://crds-media.imgix.net/7B6MoNNiWMZOtdusfRpipl/651049926b72990ae4f510a725cc2b26/nav-section-default-mobile.jpg?auto=format%2Ccompress)}nav.is-showing{display:block}\@media (min-width:768px){nav{height:100vh}}\@media (min-width:992px){nav{background-size:100%;background-image:url(https://crds-media.imgix.net/1OTqm9FjFl6wtjCXAkA04V/d44f06765e1fe0cf6a33ac3222b29302/nav-section-default.jpg?auto=format%2Ccompress)}}nav.section--come-visit{background-image:url(https://crds-media.imgix.net/7tP5INZjs0NUsWUlUDRpKv/6af5b40c0caf555a52876d51037de2a2/nav-section-locations-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--come-visit{background-image:url(https://crds-media.imgix.net/49tv3Wjdt28dPnim7TbR89/6e9931a3700a3894510faa32d6dcea0f/nav-section-locations.jpg?auto=format%2Ccompress)}}nav.section--find-community{background-image:url(https://crds-media.imgix.net/67LrfkAcGom2zu23JncnA0/6e3c9b52f38f455d69f8b441d0d60726/nav-section-community-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--find-community{background-image:url(https://crds-media.imgix.net/zEx1Ajg3dIlh5SpvzQ1qI/981c79df660b3dc5b393338a7640b2a1/nav-section-community.jpg?auto=format%2Ccompress)}}nav.section--get-support{background-image:url(https://crds-media.imgix.net/Cx02UnQr9sbVzjpXIcuqY/92b73ec270bf84af99c590bbd0173c54/nav-section-support-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--get-support{background-image:url(https://crds-media.imgix.net/7i7YFUv6uY8MpwztZwIZE0/d093954885a5af29757040281c3b7e4c/nav-section-support.jpg?auto=format%2Ccompress)}}nav.section--watch-listen-read{background-image:url(https://crds-media.imgix.net/5lMvnR6A9cavGG4aS0zzO8/bcff1c0f42284f027a411b22a85bfb55/nav-section-media-mobile.jpg?auto=format%2Ccompress)}\@media (min-width:992px){nav.section--watch-listen-read{background-image:url(https://crds-media.imgix.net/59liSAMGW8dBCeUza5NUvj/b43c1e158ac599fd6debc40b916997d9/nav-section-media.jpg?auto=format%2Ccompress)}}nav .content{position:relative;width:200vw;z-index:3;margin:0 auto;max-width:1170px}\@media (max-width:992px){nav .content{padding-bottom:125px;-webkit-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform .2s linear;transition:-webkit-transform .2s linear;transition:transform .2s linear;transition:transform .2s linear,-webkit-transform .2s linear}}\@media (min-width:992px){nav .content{display:-ms-flexbox;display:flex;padding-bottom:0}}\@media (max-width:992px){nav[class*=section--] .content{-webkit-transform:translateX(-100vw);transform:translateX(-100vw);-webkit-transition:-webkit-transform .2s linear;transition:-webkit-transform .2s linear;transition:transform .2s linear;transition:transform .2s linear,-webkit-transform .2s linear}}\@media (min-width:992px){nav[class*=section--] .ctas{display:none}}\@media (min-width:992px){nav[class*=section--] .subnavigation{width:calc(50% - 40px)}}.navigation{position:relative;width:100vw}\@media (min-width:992px){.navigation{margin-right:1.2%;width:50%}}.navigation ul{padding-left:0;margin:0;padding:30px 0 20px}.navigation ul li{list-style:none}\@media (min-width:992px){.navigation ul{padding:50px 20px 0;position:relative;z-index:1}}.navigation li{width:100%}.navigation:after{background-color:#d8d8d8;bottom:0;content:\"\";height:2px;left:20px;margin:0 auto;opacity:.2;position:absolute;width:calc(100vw - 40px)}\@media (min-width:992px){.navigation:after{background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(hsla(0,0%,100%,0)));background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0));height:100%;left:auto;right:56px;top:50px;width:2px}}.close{background:-webkit-gradient(linear,left top,left bottom,from(transparent),to(rgba(0,0,0,.9)));background:linear-gradient(180deg,transparent,rgba(0,0,0,.9));bottom:0;display:none;height:125px;padding-left:22px;position:fixed;width:100%;z-index:3}\@media (max-width:992px){.close.is-showing{display:block}}.close-icon{background-color:#0095d9;border-radius:50%;bottom:22px;-webkit-box-shadow:0 5px 24px -5px rgba(0,0,0,.75);box-shadow:0 5px 24px -5px rgba(0,0,0,.75);cursor:pointer;height:64px;position:absolute;width:64px}.close svg{fill:#fff;height:30px;left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:30px}"}}var bi=H(function(t){!function(){var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:g,table:g,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function n(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||S.defaults,this.rules=e.normal,this.options.pedantic?this.rules=e.pedantic:this.options.gfm&&(this.rules=e.gfm)}e._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,e._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,e.def=l(e.def).replace("label",e._label).replace("title",e._title).getRegex(),e.bullet=/(?:[*+-]|\d{1,9}\.)/,e.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,e.item=l(e.item,"gm").replace(/bull/g,e.bullet).getRegex(),e.list=l(e.list).replace(/bull/g,e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+e.def.source+")").getRegex(),e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",e._comment=/<!--(?!-?>)[\s\S]*?-->/,e.html=l(e.html,"i").replace("comment",e._comment).replace("tag",e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),e.paragraph=l(e._paragraph).replace("hr",e.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",e._tag).getRegex(),e.blockquote=l(e.blockquote).replace("paragraph",e.paragraph).getRegex(),e.normal=v({},e),e.gfm=v({},e.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),e.pedantic=v({},e.normal,{html:l("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:g,paragraph:l(e.normal._paragraph).replace("hr",e.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",e.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),n.rules=e,n.lex=function(t,e){return new n(e).lex(t)},n.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},n.prototype.token=function(t,n){var r,i,s,o,a,u,h,l,f,d,p,g,v,b,w,S;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t)){var E=this.tokens[this.tokens.length-1];t=t.substring(s[0].length),E&&"paragraph"===E.type?E.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:m(s,"\n")}))}else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(t))&&(u={type:"table",header:y(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===u.align.length){for(t=t.substring(s[0].length),p=0;p<u.align.length;p++)u.align[p]=/^ *-+: *$/.test(u.align[p])?"right":/^ *:-+: *$/.test(u.align[p])?"center":/^ *:-+ *$/.test(u.align[p])?"left":null;for(p=0;p<u.cells.length;p++)u.cells[p]=y(u.cells[p],u.header.length);this.tokens.push(u)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,n),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),this.tokens.push(h={type:"list_start",ordered:b=(o=s[2]).length>1,start:b?+o:"",loose:!1}),l=[],r=!1,v=(s=s[0].match(this.rules.item)).length,p=0;p<v;p++)d=(u=s[p]).length,~(u=u.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(d-=u.length,u=u.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+d+"}","gm"),"")),p!==v-1&&(a=e.bullet.exec(s[p+1])[0],(o.length>1?1===a.length:a.length>1||this.options.smartLists&&a!==o)&&(t=s.slice(p+1).join("\n")+t,p=v-1)),i=r||/\n\n(?!\s*$)/.test(u),p!==v-1&&(r="\n"===u.charAt(u.length-1),i||(i=r)),i&&(h.loose=!0),S=void 0,(w=/^\[[ xX]\] /.test(u))&&(S=" "!==u[1],u=u.replace(/^\[[ xX]\] +/,"")),l.push(f={type:"list_item_start",task:w,checked:S,loose:i}),this.tokens.push(f),this.token(u,!1),this.tokens.push({type:"list_item_end"});if(h.loose)for(v=l.length,p=0;p<v;p++)l[p].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):c(s[0]):s[0]});else if(n&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),g=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(t))&&(u={type:"table",header:y(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===u.align.length){for(t=t.substring(s[0].length),p=0;p<u.align.length;p++)u.align[p]=/^ *-+: *$/.test(u.align[p])?"right":/^ *:-+: *$/.test(u.align[p])?"center":/^ *:-+ *$/.test(u.align[p])?"left":null;for(p=0;p<u.cells.length;p++)u.cells[p]=y(u.cells[p].replace(/^ *\| *| *\| *$/g,""),u.header.length);this.tokens.push(u)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(n&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var r={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:g,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:g,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function i(t,e){if(this.options=e||S.defaults,this.links=t,this.rules=r.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.rules=this.options.breaks?r.breaks:r.gfm)}function s(t){this.options=t||S.defaults}function o(){}function a(t){this.tokens=[],this.token=null,this.options=t||S.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new u}function u(){this.seen={}}function c(t,e){if(e){if(c.escapeTest.test(t))return t.replace(c.escapeReplace,function(t){return c.replacements[t]})}else if(c.escapeTestNoEncode.test(t))return t.replace(c.escapeReplaceNoEncode,function(t){return c.replacements[t]});return t}function h(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function l(t,e){return t=t.source||t,e=e||"",{replace:function(e,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,n),this},getRegex:function(){return new RegExp(t,e)}}}function f(t,e,n){if(t){try{var r=decodeURIComponent(h(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!p.test(n)&&(n=function(t,e){return d[" "+t]||(d[" "+t]=/^[^:]+:\/*[^\/]*$/.test(t)?t+"/":m(t,"/",!0)),t=d[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}r._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",r.em=l(r.em).replace(/punctuation/g,r._punctuation).getRegex(),r._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=l(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=l(r.tag).replace("comment",e._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,r._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=l(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=l(r.reflink).replace("label",r._label).getRegex(),r.normal=v({},r),r.pedantic=v({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:l(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:l(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=v({},r.normal,{escape:l(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),r.gfm.url=l(r.gfm.url,"i").replace("email",r.gfm._extended_email).getRegex(),r.breaks=v({},r.gfm,{br:l(r.br).replace("{2,}","*").getRegex(),text:l(r.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),i.rules=r,i.output=function(t,e,n){return new i(e,n).output(t)},i.prototype.output=function(t){for(var e,n,r,s,o,a,u="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),u+=c(o[1]);else if(o=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(o[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(o[0])&&(this.inRawBlock=!1),t=t.substring(o[0].length),u+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):c(o[0]):o[0];else if(o=this.rules.link.exec(t)){var h=b(o[2],"()");if(h>-1){var l=4+o[1].length+h;o[2]=o[2].substring(0,h),o[0]=o[0].substring(0,l).trim(),o[3]=""}t=t.substring(o[0].length),this.inLink=!0,r=o[2],this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=e[1],s=e[3]):s="":s=o[3]?o[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),u+=this.outputLink(o,{href:i.escapes(r),title:i.escapes(s)}),this.inLink=!1}else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){u+=o[0].charAt(0),t=o[0].substring(1)+t;continue}this.inLink=!0,u+=this.outputLink(o,e),this.inLink=!1}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),u+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),u+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),u+=this.renderer.codespan(c(o[2].trim(),!0));else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),u+=this.renderer.br();else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),u+=this.renderer.del(this.output(o[1]));else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),r="@"===o[2]?"mailto:"+(n=c(this.mangle(o[1]))):n=c(o[1]),u+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(t))){if(o=this.rules.text.exec(t))t=t.substring(o[0].length),u+=this.renderer.text(this.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):c(o[0]):o[0]:c(this.smartypants(o[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===o[2])r="mailto:"+(n=c(o[0]));else{do{a=o[0],o[0]=this.rules._backpedal.exec(o[0])[0]}while(a!==o[0]);n=c(o[0]),r="www."===o[1]?"http://"+n:n}t=t.substring(o[0].length),u+=this.renderer.link(r,null,n)}return u},i.escapes=function(t){return t?t.replace(i.rules._escapes,"$1"):t},i.prototype.outputLink=function(t,e){var n=e.href,r=e.title?c(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,c(t[1]))},i.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):t},i.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",r=t.length,i=0;i<r;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},s.prototype.code=function(t,e,n){var r=(e||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(t,r);null!=i&&i!==t&&(n=!0,t=i)}return r?'<pre><code class="'+this.options.langPrefix+c(r,!0)+'">'+(n?t:c(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:c(t,!0))+"</code></pre>"},s.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},s.prototype.html=function(t){return t},s.prototype.heading=function(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(t,e,n){var r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"},s.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},s.prototype.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},s.prototype.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},s.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},s.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},s.prototype.strong=function(t){return"<strong>"+t+"</strong>"},s.prototype.em=function(t){return"<em>"+t+"</em>"},s.prototype.codespan=function(t){return"<code>"+t+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(t){return"<del>"+t+"</del>"},s.prototype.link=function(t,e,n){if(null===(t=f(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<a href="'+c(t)+'"';return e&&(r+=' title="'+e+'"'),r+">"+n+"</a>"},s.prototype.image=function(t,e,n){if(null===(t=f(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+(this.options.xhtml?"/>":">")},s.prototype.text=function(t){return t},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(t){return t},o.prototype.link=o.prototype.image=function(t,e,n){return""+n},o.prototype.br=function(){return""},a.parse=function(t,e){return new a(e).parse(t)},a.prototype.parse=function(t){this.inline=new i(t.links,this.options),this.inlineText=new i(t.links,v({},this.options,{renderer:new o})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},a.prototype.next=function(){return this.token=this.tokens.pop(),this.token},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,h(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,i="",s="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var o=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,o,a);case"list_item_start":s="";var u=this.token.loose,c=this.token.checked,l=this.token.task;for(this.token.task&&(s+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)s+=u||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(s,l,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:if(!this.options.silent)throw new Error('Token with "'+this.token.type+'" type was not found.')}},u.prototype.slug=function(t){var e=t.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){var n=e;do{this.seen[n]++,e=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e},c.escapeTest=/[&<>"']/,c.escapeReplace=/[&<>"']/g,c.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,c.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var d={},p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function g(){}function v(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function y(t,e){var n=t.replace(/\|/g,function(t,e,n){for(var r=!1,i=e;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function m(t,e,n){if(0===t.length)return"";for(var r=0;r<t.length;){var i=t.charAt(t.length-r-1);if(i!==e||n){if(i===e||!n)break;r++}else r++}return t.substr(0,t.length-r)}function b(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=0,r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&--n<0)return r;return-1}function w(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function S(t,e,r){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(r||"function"==typeof e){r||(r=e,e=null),w(e=v({},S.defaults,e||{}));var i,s,o=e.highlight,u=0;try{i=n.lex(t,e)}catch(t){return r(t)}s=i.length;var h=function(t){if(t)return e.highlight=o,r(t);var n;try{n=a.parse(i,e)}catch(e){t=e}return e.highlight=o,t?r(t):r(null,n)};if(!o||o.length<3)return h();if(delete e.highlight,!s)return h();for(;u<i.length;u++)!function(t){"code"!==t.type?--s||h():o(t.text,t.lang,function(e,n){return e?h(e):null==n||n===t.text?--s||h():(t.text=n,t.escaped=!0,void(--s||h()))})}(i[u])}else try{return e&&(e=v({},S.defaults,e)),w(e),a.parse(n.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||S.defaults).silent)return"<p>An error occurred:</p><pre>"+c(t.message+"",!0)+"</pre>";throw t}}g.exec=g,S.options=S.setOptions=function(t){return v(S.defaults,t),S},S.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new s,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},S.defaults=S.getDefaults(),S.Parser=a,S.parser=a.parse,S.Renderer=s,S.TextRenderer=o,S.Lexer=n,S.lexer=n.lex,S.InlineLexer=i,S.inlineLexer=i.output,S.Slugger=u,S.parse=S,t.exports=S}()});const wi=$`
  {
    sites(filter: "Available_Online = 1") {
      name
      id
    }
  }
`,Si=$`
  {
    user {
      site {
        id
        name
      }
    }
  }
`,Ei=$`
  {
    promos {
      targetAudience
      title
      description
      qualifiedUrl
      imageUrl
    }
  }
`,xi=$`
  mutation setSite($siteId: ID!) {
    setSite(siteId: $siteId) {
      site {
        id
        name
      }
    }
  }
`,Ai=($`
  {
    contentBlocks(filters: { category: "site happenings" }) {
      content
      slug
    }
  }
`,$`
query contentBlocks($componentName: String) {
  contentBlocks(filters: { category: $componentName }) {
    content
    slug
  }
}
`);class Fi{constructor(t,e){this.copy=[],this.apolloClient=t,this.componentName=e}getCopy(){return this.apolloClient.query({query:Ai,variables:{componentName:this.componentName}}).then(t=>(this.copy=t.data.contentBlocks,t.data.contentBlocks))}getContentBlock(t){if(!this.copy)return null;const n=this.copy.find(e=>e.slug===t);return n?e("div",{innerHTML:n.content.toString()}):void 0}}class Ti{constructor(e){t(this,e),this.analytics=window.analytics||{},this.contentfulSites=[],this.sites=[],this.happenings=[],this.user=null}watchHandler(t,e){t!==e&&(this.apolloClient=xr(t),this.getUser())}logError(t){console.error(t)}getInViewDetails(){return{selectedSite:this.selectedSite}}componentDidLoad(){s.trackInView(this.host,"HappeningComponent",this.getInViewDetails.bind(this))}componentWillLoad(){this.apolloClient=xr(this.authToken),this.contentBlockHandler=new Fi(this.apolloClient,"site happenings"),Promise.all([this.getSites(),this.getPromos(),this.contentBlockHandler.getCopy(),this.getUser()]).then(()=>{this.validateSelectedSite(this.user&&this.user.site||"Churchwide")})}componentDidRender(){this.handleParentElementWidthBasedOnText(this.host.shadowRoot.querySelector(".happenings-dropdown-select"),this.selectedSite)}getSites(){return this.apolloClient.query({query:wi}).then(t=>{this.validateSites(t.data.sites)}).catch(t=>{this.logError(t)})}getUser(){return this.authToken?this.apolloClient.query({query:Si}).then(t=>{const e=t.data.user;this.validateUserSite(e.site&&e.site.name),this.validateSelectedSite(this.user.site)}).catch(t=>{this.resetUser(),this.logError(t)}):Promise.resolve(this.resetUser())}getPromos(){return this.apolloClient.query({query:Ei}).then(t=>{this.setHappenings(t.data.promos),this.setContentfulSites(),this.renderHappenings()}).catch(t=>this.logError(t))}setUserSite(t){return this.apolloClient.mutate({variables:{siteId:t},mutation:xi}).catch(t=>{this.logError(t)})}resetUser(){this.user=null,this.validateSelectedSite("Churchwide")}validateSites(t){const e=t.filter(t=>"string"==typeof t.name&&"Not site specific"!==t.name&&"Xroads Church"!==t.name);this.sites=e.sort((t,e)=>t.name>e.name?1:e.name>t.name?-1:0)}validateUserSite(t){"string"==typeof t&&""!==t&&(this.user={site:t})}validateSelectedSite(t){"Not site specific"!==t&&"I do not attend Crossroads"!==t&&"Anywhere"!==t&&""!==t||(t="Churchwide"),this.contentfulSites.includes(t)&&(this.selectedSite=t)}setHappenings(t){this.happenings=t.filter(t=>null!==t.targetAudience)}setContentfulSites(){const t=new Set;this.happenings.forEach(e=>e.targetAudience.forEach(e=>t.add(e))),this.contentfulSites=Array.from(t).sort((t,e)=>t>e?1:e>t?-1:0)}handleSiteSelection(t){this.validateSelectedSite(t.target.value),this.analytics.track("HappeningSiteFiltered",{site:this.selectedSite})}handleParentElementWidthBasedOnText(t,e){let n=document.createElement("select"),r=window.getComputedStyle(t);n.style.visibility="hidden",n.style.margin=r.margin,n.style.padding=r.padding,n.style.fontSize=r.fontSize,n.style.fontFamily=r.fontFamily,n.style.webkitAppearance="none";let i=document.createElement("option");i.innerText=e,n.appendChild(i),this.host.shadowRoot.appendChild(n),t.parentNode.style.width=`${n.offsetWidth+12}px`,this.host.shadowRoot.removeChild(n)}handleHappeningsClicked(t){let e=t.target,n={title:"A"===e.tagName?e.innerText.toLowerCase():e.alt.toLowerCase(),url:"A"===e.tagName?e.href:e.parentNode.href,userSite:this.user&&this.user.site||"logged out",selectedSite:this.selectedSite};this.analytics.track("HappeningCardClicked",{params:n})}handleSetSiteInput(t){const e=t.target.options[t.target.selectedIndex].text;this.validateUserSite(e),this.validateSelectedSite(e),this.handleSetSiteModalClose();const n=t.target.value;this.setUserSite(n),this.analytics.track("HappeningSiteUpdated",{id:n,name:this.selectedSite})}handleSetSiteModalClose(){this.host.shadowRoot.querySelector(".site-select-message").classList.add("hidden")}renderHappeningsSkeleton(){let t=[];return window.innerWidth<768?t.push(1,2):window.innerWidth<960?t.push(1,2,3):t.push(1,2,3,4),t.map(()=>e("div",{class:"skeleton skeleton-happenings"},e("div",{class:"image shimmer"}),e("div",{class:"content"},e("div",{class:"overlap"},e("div",{class:"text title shimmer"}),e("div",{class:"text title shimmer"})),e("div",{class:"text subtitle shimmer"}),e("div",{class:"text subtitle shimmer"}),e("div",{class:"text subtitle shimmer"}),e("div",{class:"text subtitle shimmer"}))))}renderHappenings(){return this.selectedSite?this.happenings.filter(t=>t.targetAudience.find(t=>t===this.selectedSite)).map((t,n)=>e("div",{class:"card carousel-cell",key:n},e("a",{class:"relative",href:t.qualifiedUrl,onClick:t=>this.handleHappeningsClicked(t)},e("img",{alt:t.title,class:"img-responsive",src:s.imgixify(t.imageUrl)+"?auto=format&w=400&h=300&fit=crop"})),e("div",{class:"card-block"},e("h4",{class:"card-title card-title--overlap text-uppercase"},e("a",{href:t.qualifiedUrl,onClick:t=>this.handleHappeningsClicked(t)},t.title)),e("div",{class:"card-text",innerHTML:bi(t.description||"")})))):this.renderHappeningsSkeleton()}maybeRenderSetSiteModal(){return this.user&&!this.isUserSiteSet()?this.renderSetSiteModal():""}renderSetSiteModal(){return e("div",{class:"site-select-message"},e("button",{type:"button",class:"close","aria-label":"Close",onClick:()=>this.handleSetSiteModalClose()},e("svg",{xmlns:"http://www.w3.org/2000/svg"},e("line",{x1:"1",y1:"10",x2:"10",y2:"1",stroke:"#fff",strokeWidth:"2"}),e("line",{x1:"1",y1:"1",x2:"10",y2:"10",stroke:"#fff",strokeWidth:"2"}))),e("div",{class:"text-center push-top w-100"},this.contentBlockHandler.getContentBlock("SiteHappeningsPrompt"),e("div",{class:"happenings-dropdown","data-automation-id":"happenings-choose-site"},e("select",{class:"dropdown w-100",onInput:t=>this.handleSetSiteInput(t)},e("option",{disabled:!0,selected:!0},"Choose a site"),this.sites.map(t=>e("option",{value:t.id,"data-name":t.name},t.name))),e("svg",{class:"dropdown-caret icon icon-1 pull-right push-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 237 152"},e("path",{d:"M200.731 135.586L92.136 244.182c-1.854 1.853-4.05 2.78-6.587 2.78s-4.731-.927-6.586-2.78l-24.295-24.295c-1.854-1.854-2.781-4.05-2.781-6.587s.927-4.732 2.78-6.586L132.385 129 54.669 51.285c-1.854-1.853-2.781-4.05-2.781-6.586 0-2.537.927-4.732 2.78-6.587l24.296-24.295c1.854-1.853 4.05-2.78 6.586-2.78 2.537 0 4.732.927 6.587 2.78L200.73 122.414c1.854 1.853 2.781 4.049 2.781 6.586s-.927 4.732-2.78 6.586z",transform:"translate(-9 -53) rotate(90 127.7 129)"}))),e("p",null,e("small",null,"*This will update the site field in your profile"))))}isUserSiteSet(){return this.user.site&&"Not site specific"!==this.user.site}render(){return e("div",{class:"container push-top"},e("div",{class:"relative"},this.maybeRenderSetSiteModal(),e("hr",{class:"push-half-bottom"}),e("div",{class:"happenings-dropdown-container push-half-bottom"},e("h4",{id:"happening-filter-label",class:"flush font-size-base font-family-base text-gray-light"},"happening at crossroads"),e("div",{class:"happenings-dropdown","data-automation-id":"happenings-dropdown"},e("select",{class:"happenings-dropdown-select font-family-base",onInput:t=>this.handleSiteSelection(t)},this.contentfulSites.map(t=>e("option",{value:t,selected:this.selectedSite===t},t))),e("svg",{class:"dropdown-caret icon icon-1 pull-right push-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 237 152"},e("path",{d:"M200.731 135.586L92.136 244.182c-1.854 1.853-4.05 2.78-6.587 2.78s-4.731-.927-6.586-2.78l-24.295-24.295c-1.854-1.854-2.781-4.05-2.781-6.587s.927-4.732 2.78-6.586L132.385 129 54.669 51.285c-1.854-1.853-2.781-4.05-2.781-6.586 0-2.537.927-4.732 2.78-6.587l24.296-24.295c1.854-1.853 4.05-2.78 6.586-2.78 2.537 0 4.732.927 6.587 2.78L200.73 122.414c1.854 1.853 2.781 4.049 2.781 6.586s-.927 4.732-2.78 6.586z",transform:"translate(-9 -53) rotate(90 127.7 129)"})),this.selectedSite===(this.user&&this.user.site)?e("span",{class:"my-site-label"},"(my site)"):"")),e("div",{class:"card-deck carousel","data-crds-carousel":"mobile-scroll"},e("div",{id:"section-what-s-happening",class:"feature-cards card-deck--expanded-layout carousel","data-automation-id":"happenings-cards","data-crds-carousel":"mobile-scroll"},this.renderHappenings()))))}get host(){return n(this)}static get watchers(){return{authToken:["watchHandler"]}}static get style(){return"\@charset \"UTF-8\";*{-webkit-box-sizing:border-box;box-sizing:border-box}.relative{position:relative}.overflow-hidden{overflow:hidden}.d-flex{display:-ms-flexbox;display:flex}.d-block{display:block}.d-inline{display:inline}.d-none{display:none}.align-items-center{-ms-flex-align:center;align-items:center}.w-100{width:100%}hr{border:0;border-top:1px solid #e7e7e7;margin-bottom:1rem;margin-top:1rem}.font-family-base{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important}.text-white{color:#fff!important}.text-gray-light{color:#979797!important}.text-gray{color:#737373!important}.text-center{text-align:center}.text-uppercase{text-transform:uppercase}.text-uppercase.font-size-smaller{font-size:13px!important;letter-spacing:.5px}.font-size-base{font-size:16px!important}\@media (min-width:480px){.font-size-base{font-size:19px!important}}.font-size-large{font-size:19px!important}\@media (min-width:480px){.font-size-large{font-size:22px!important}}.font-size-smaller{font-size:14px!important}.font-size-smallest{font-size:10px}.font-weight-mid{font-weight:500}.bg-charcoal{background-color:#171717}.flush{margin:0!important}.flush-bottom{margin-bottom:0!important}.flush-top{margin-top:0!important}.push-half-bottom{margin-bottom:12px!important}.push-bottom{margin-bottom:24px!important}.push-top{margin-top:24px}.push-half-top{margin-top:12px!important}.soft-quarter-top{padding-top:6px}.component-header{font-family:acumin-pro-extra-condensed;line-height:.95}\@media (min-width:480px){.component-header{font-size:2.125rem}}.card>a{color:inherit;display:block;text-decoration:none}.card img{width:100%}.color-gray{color:#737373}.media-label{display:-ms-flexbox;display:flex;position:absolute;right:0;bottom:0;padding:6px 8px}.media-label>:not(:last-child){margin-right:5px}.media-label .icon{fill:#fff;height:16px;width:12px}.btn{display:inline-block;margin-bottom:0;font-weight:300;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;padding:8px 10px;font-size:16px;line-height:1.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:4px;line-height:1;margin-top:5px;margin-bottom:5px;font-size:14px;padding:13px 16px}.btn.btn-gray-light{color:#fff;background-color:#979797;border-color:#979797}.btn.btn-gray-light.btn-outline{background:transparent;border-style:solid;border-width:1px;color:#979797}.btn.btn-gray-light.btn-outline:hover{background-color:#979797;color:#fff}.btn.btn-sm{font-size:13px;padding:10px 16px 11px}.skeleton{position:relative}.skeleton,.skeleton .shimmer{overflow:hidden}.skeleton .shimmer:after{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-transform:translateX(-100%);transform:translateX(-100%);background-image:linear-gradient(100deg,#f0f0f0 20%,hsla(0,0%,100%,.3) 30%,hsla(0,0%,100%,.7) 40%,#f0f0f0 50%);-webkit-animation:shimmer 1.5s infinite;animation:shimmer 1.5s infinite;-webkit-animation-timing-function:ease;animation-timing-function:ease;content:\"\"}.skeleton .shimmer-reverse:after{background-image:linear-gradient(100deg,#fff 20%,hsla(0,0%,94.1%,.3) 30%,hsla(0,0%,94.1%,.7) 40%,#fff 50%)}\@-webkit-keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}\@keyframes shimmer{to{-webkit-transform:translateX(100%);transform:translateX(100%)}}.happenings-dropdown-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}\@media (min-width:480px){.happenings-dropdown-container{-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}}.happenings-dropdown{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.happenings-dropdown .happenings-dropdown-select{font-size:19px;position:relative;background:0;border:0;margin:0;color:#0095d9;padding:.5rem 0;-webkit-appearance:none;-moz-appearance:none;width:100%}.happenings-dropdown .happenings-dropdown-select:hover{cursor:pointer}.happenings-dropdown .happenings-dropdown-select:focus{outline:0}\@media (min-width:480px){.happenings-dropdown .happenings-dropdown-select{padding:.5rem}}.happenings-dropdown .dropdown-caret{fill:#0095d9;position:absolute;width:.75rem;right:0;padding-top:4px;pointer-events:none}\@media (min-width:480px){.happenings-dropdown .dropdown-caret{right:6px}}.happenings-dropdown .my-site-label{position:absolute;width:100%;left:calc(100% + .625rem);font-size:.875rem;color:#979797}.site-select-message{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;height:100%;background-color:#fff;-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out;opacity:1;z-index:1}.site-select-message,.site-select-message .happenings-dropdown{-ms-flex-pack:center;justify-content:center}\@media (min-width:768px){.site-select-message .happenings-dropdown{margin:0 auto;width:33.333333%}}.site-select-message .happenings-dropdown .dropdown{display:inline-block;font-weight:300;text-align:center;font-size:14px;line-height:1;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;font-size:16px;line-height:1.5;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-top:5px;margin-bottom:5px;padding:10px;background:transparent;border:1px solid #0095d9;color:#0095d9;-webkit-appearance:none}.site-select-message .happenings-dropdown .dropdown:focus{outline:0}\@media (max-width:480px){.site-select-message .happenings-dropdown .dropdown{width:100%}}.site-select-message .happenings-dropdown .dropdown-caret{right:20px}.site-select-message .close{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;top:1rem;right:1rem;background-color:hsla(0,0%,73.3%,.6);border-radius:50%;width:1.5rem;height:1.5rem;font-weight:unset;opacity:1;padding:0;cursor:pointer;border:0}.site-select-message .close:hover{cursor:pointer}.site-select-message .close svg{width:10px;height:10px;stroke:#fff}.hidden{visibility:hidden;opacity:0}.card-deck .card{-webkit-box-flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.card-deck--expanded-layout,.card-deck .card{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.card-deck--expanded-layout{-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-overflow-scrolling:touch;overflow-x:scroll;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory}\@media (min-width:768px){.card-deck--expanded-layout{-ms-flex-wrap:wrap;flex-wrap:wrap}}.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{cursor:auto;-webkit-flex:1 0 270px;-ms-flex:1 0 270px;flex:1 0 270px;-ms-flex-preferred-size:270px;flex-basis:270px;margin-bottom:1.5rem;padding:0 .5rem;position:relative;max-width:100%;scroll-snap-align:start}.card-deck--expanded-layout .card:first-child,.card-deck--expanded-layout .skeleton-happenings:first-child{padding-left:0}.card-deck--expanded-layout .card:last-child,.card-deck--expanded-layout .skeleton-happenings:last-child{padding-right:0}\@media (min-width:480px){.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{max-width:50%}}\@media (min-width:768px){.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{max-width:33.333333%}}\@media (min-width:960px){.card-deck--expanded-layout .card,.card-deck--expanded-layout .skeleton-happenings{max-width:25%}}.card-deck--expanded-layout .card a,.card-deck--expanded-layout .skeleton-happenings a{color:inherit;text-decoration:none}.card-deck--expanded-layout .card .card-text,.card-deck--expanded-layout .skeleton-happenings .card-text{font-size:.9375rem;position:relative}.card-deck--expanded-layout .card .card-text p,.card-deck--expanded-layout .skeleton-happenings .card-text p{margin:0}.card-deck--expanded-layout .card .card-block,.card-deck--expanded-layout .skeleton-happenings .card-block{font-family:acumin-pro,helvetica,arial,sans-serif;padding:1rem}.card-deck--expanded-layout .card .card-block .component-header,.card-deck--expanded-layout .skeleton-happenings .card-block .component-header{line-height:.95}.skeleton-happenings{height:500px;margin:0}.skeleton-happenings .image{height:75%;max-height:200px;width:100%}.skeleton-happenings .image,.skeleton-happenings .text{background-color:#f0f0f0;position:relative}.skeleton-happenings .content{padding:.5rem}.skeleton-happenings .content .overlap{background:#fff;padding:.5rem;-webkit-transform:translateY(-40%);transform:translateY(-40%)}.skeleton-happenings .content .title{height:24px;margin-bottom:.5rem}.skeleton-happenings .content .title:nth-child(2){width:75%}.skeleton-happenings .content .subtitle{height:16px;margin:.5rem}.skeleton-happenings .content .subtitle:nth-child(3){width:75%}.skeleton-happenings .content .subtitle:nth-child(4){width:85%}.skeleton-happenings .content .subtitle:nth-child(5){width:50%}.img-responsive{display:block;height:auto;max-width:100%}.card-title--overlap{background-color:#fff;display:inline-block;font-family:acumin-pro-extra-condensed,sans-serif;font-size:2.125rem;margin:-2rem -.5rem 0;padding:.25rem .5rem;position:relative}.card-title--overlap:after{color:#979797;content:\"\";display:block;font-family:acumin-pro,helvetica,arial,sans-serif;font-size:1.25rem;font-weight:100;line-height:1.5}.card-title{color:#4d4d4d;line-height:1;font-weight:600}.text-uppercase{text-transform:uppercase!important}.component-header{font-family:acumin-pro-extra-condensed,sans-serif;font-size:2rem;font-weight:500;line-height:1.1;text-transform:uppercase}"}}class Ci{constructor(e){t(this,e),this.env="prod",this.data={}}componentWillLoad(){(this.src||this.name&&this.env)&&ui.get(this.src||`https://crds-data.netlify.com/snail-trails/${this.name}/${this.env}.json`).then(t=>this.data=t.data)}listItem(t){return t.subscribe&&t.src?e("crds-subscribe",{src:t.src,label:t.title}):t.href?e("crds-snail-trail-link",{href:t.href,automationId:t["data-automation-id"]},t.title):e("strong",null,t.title)}list(t){return t.map(t=>e("li",null,this.listItem(t)))}navSections(){if(this.data.nav)return this.data.nav.map(t=>e("ul",null,this.list(t)))}render(){if(this.data.nav||0!=this.element.childElementCount)return e(vi,null,e("nav",null,e("div",null,this.element.childElementCount>0&&e("slot",null),0==this.element.childElementCount&&e(vi,null,this.navSections()))))}get element(){return n(this)}static get style(){return"nav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;background-color:#fff;-webkit-box-shadow:0 1px 6px 0 rgba(0,0,0,.14);box-shadow:0 1px 6px 0 rgba(0,0,0,.14);font-size:14px;padding-left:20px;position:relative}\@media (min-width:1170px){nav{padding-left:0}}nav>div{display:-ms-flexbox;display:flex;-webkit-overflow-scrolling:touch;overflow-x:auto;overflow-y:hidden;position:relative;scrollbar-width:none;margin:0 auto;max-width:1170px}\@media (max-width:992px){nav:after{background:-webkit-gradient(linear,left top,right top,from(hsla(0,0%,100%,0)),to(rgba(0,0,0,.8)));background:linear-gradient(90deg,hsla(0,0%,100%,0),rgba(0,0,0,.8));content:\"\";display:inline-block;height:100%;opacity:.3;position:absolute;right:0;top:0;width:20px}}strong{color:#4d4d4d;display:inline-block;font-weight:600;margin-right:15px;padding:11px 0;text-transform:capitalize;white-space:nowrap}ul{padding-left:0;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;margin-bottom:0;margin-top:0}ul li{list-style:none}ul:not(:last-of-type):after{border-right:1px solid #d8d8d8;content:\"\";height:calc(100% - 22px);width:1px}li{display:inline-block;text-transform:capitalize;white-space:nowrap}"}}var ki=2147483647,Ii=36,Oi=1,Ri=26,Di=38,Ni=700,_i=72,Pi=128,ji="-",Bi=/[^\x20-\x7E]/,Li=/[\x2E\u3002\uFF0E\uFF61]/g,Hi={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Mi=Ii-Oi,Vi=Math.floor,Ui=String.fromCharCode;function qi(t){throw new RangeError(Hi[t])}function Ki(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function zi(t,e,n){var r=0;for(t=n?Vi(t/Ni):t>>1,t+=Vi(t/e);t>Mi*Ri>>1;r+=Ii)t=Vi(t/Mi);return Vi(r+(Mi+1)*t/(t+Di))}function Qi(t){return function(t){var e=t.split("@"),n="";e.length>1&&(n=e[0]+"@",t=e[1]);var r=function(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}((t=t.replace(Li,".")).split("."),function(t){return Bi.test(t)?"xn--"+function(t){var e,n,r,i,s,o,a,u,c,h,l,f,d,p,g,v=[];for(f=(t=function(t){for(var e,n,r=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}(t)).length,e=Pi,n=0,s=_i,o=0;o<f;++o)(l=t[o])<128&&v.push(Ui(l));for(r=i=v.length,i&&v.push(ji);r<f;){for(a=ki,o=0;o<f;++o)(l=t[o])>=e&&l<a&&(a=l);for(a-e>Vi((ki-n)/(d=r+1))&&qi("overflow"),n+=(a-e)*d,e=a,o=0;o<f;++o)if((l=t[o])<e&&++n>ki&&qi("overflow"),l==e){for(u=n,c=Ii;!(u<(h=c<=s?Oi:c>=s+Ri?Ri:c-s));c+=Ii)v.push(Ui(Ki(h+(g=u-h)%(p=Ii-h),0))),u=Vi(g/p);v.push(Ui(Ki(u,0))),s=zi(n,d,r==i),n=0,++r}++n,++e}return v.join("")}(t):t}).join(".");return n+r}(t)}var Wi=[],$i=[],Yi="undefined"!=typeof Uint8Array?Uint8Array:Array,Gi=!1;function Ji(){Gi=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Wi[e]=t[e],$i[t.charCodeAt(e)]=e;$i["-".charCodeAt(0)]=62,$i["_".charCodeAt(0)]=63}function Xi(t,e,n){for(var r,i=[],s=e;s<n;s+=3)i.push(Wi[(r=(t[s]<<16)+(t[s+1]<<8)+t[s+2])>>18&63]+Wi[r>>12&63]+Wi[r>>6&63]+Wi[63&r]);return i.join("")}function Zi(t,e,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?i-1:0,f=n?-1:1,d=t[e+l];for(l+=f,s=d&(1<<-h)-1,d>>=-h,h+=a;h>0;s=256*s+t[e+l],l+=f,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=256*o+t[e+l],l+=f,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=c}return(d?-1:1)*o*Math.pow(2,s-r)}function ts(t,e,n,r,i,s){var o,a,u,c=8*s-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(e*u-1)*Math.pow(2,i),o+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+d]=255&o,d+=p,o/=256,c-=8);t[n+d-p]|=128*g}var es={}.toString;const ns=Array.isArray||function(t){return"[object Array]"==es.call(t)};function rs(){return ss.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function is(t,e){if(rs()<e)throw new RangeError("Invalid typed array length");return ss.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ss.prototype:(null===t&&(t=new ss(e)),t.length=e),t}function ss(t,e,n){if(!(ss.TYPED_ARRAY_SUPPORT||this instanceof ss))return new ss(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return us(this,t)}return os(this,t,e,n)}function os(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),ss.TYPED_ARRAY_SUPPORT?(t=e).__proto__=ss.prototype:t=cs(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!ss.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|fs(e,n),i=(t=is(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(ls(e)){var n=0|hs(e.length);return 0===(t=is(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?is(t,0):cs(t,e);if("Buffer"===e.type&&ns(e.data))return cs(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function as(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function us(t,e){if(as(e),t=is(t,e<0?0:0|hs(e)),!ss.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function cs(t,e){var n=e.length<0?0:0|hs(e.length);t=is(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function hs(t){if(t>=rs())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+rs().toString(16)+" bytes");return 0|t}function ls(t){return!(null==t||!t._isBuffer)}function fs(t,e){if(ls(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Ls(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Hs(t).length;default:if(r)return Ls(t).length;e=(""+e).toLowerCase(),r=!0}}function ds(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ps(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=ss.from(e,r)),ls(e))return 0===e.length?-1:gs(t,e,n,r,i);if("number"==typeof e)return e&=255,ss.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):gs(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function gs(t,e,n,r,i){var s,o=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var h=-1;for(s=n;s<a;s++)if(c(t,s)===c(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*o}else-1!==h&&(s-=s-h),h=-1}else for(n+u>a&&(n=a-u),s=n;s>=0;s--){for(var l=!0,f=0;f<u;f++)if(c(t,s+f)!==c(e,f)){l=!1;break}if(l)return s}return-1}function vs(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function ys(t,e,n,r){return Ms(Ls(e,t.length-n),t,n,r)}function ms(t,e,n,r){return Ms(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function bs(t,e,n,r){return ms(t,e,n,r)}function ws(t,e,n,r){return Ms(Hs(e),t,n,r)}function Ss(t,e,n,r){return Ms(function(t,e){for(var n,r,i=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function Es(t,e,n){return function(t){var e;Gi||Ji();for(var n=t.length,r=n%3,i="",s=[],o=0,a=n-r;o<a;o+=16383)s.push(Xi(t,o,o+16383>a?a:o+16383));return 1===r?(i+=Wi[(e=t[n-1])>>2],i+=Wi[e<<4&63],i+="=="):2===r&&(i+=Wi[(e=(t[n-2]<<8)+t[n-1])>>10],i+=Wi[e>>4&63],i+=Wi[e<<2&63],i+="="),s.push(i),s.join("")}(0===e&&n===t.length?t:t.slice(e,n))}function xs(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(s=t[i+1]))&&(u=(31&c)<<6|63&s)>127&&(h=u);break;case 3:o=t[i+2],128==(192&(s=t[i+1]))&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+2],a=t[i+3],128==(192&(s=t[i+1]))&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(r.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function(t){var e=t.length;if(e<=As)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=As));return n}(r)}ss.TYPED_ARRAY_SUPPORT=void 0===G.TYPED_ARRAY_SUPPORT||G.TYPED_ARRAY_SUPPORT,ss.poolSize=8192,ss._augment=function(t){return t.__proto__=ss.prototype,t},ss.from=function(t,e,n){return os(null,t,e,n)},ss.TYPED_ARRAY_SUPPORT&&(ss.prototype.__proto__=Uint8Array.prototype,ss.__proto__=Uint8Array),ss.alloc=function(t,e,n){return function(t,e,n,r){return as(e),e<=0?is(null,e):void 0!==n?"string"==typeof r?is(null,e).fill(n,r):is(null,e).fill(n):is(null,e)}(0,t,e,n)},ss.allocUnsafe=function(t){return us(null,t)},ss.allocUnsafeSlow=function(t){return us(null,t)},ss.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Vs(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Vs(t.slice(0,0))}(t))},ss.compare=function(t,e){if(!ls(t)||!ls(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},ss.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ss.concat=function(t,e){if(!ns(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ss.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=ss.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!ls(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},ss.byteLength=fs,ss.prototype._isBuffer=!0,ss.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ds(this,e,e+1);return this},ss.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ds(this,e,e+3),ds(this,e+1,e+2);return this},ss.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ds(this,e,e+7),ds(this,e+1,e+6),ds(this,e+2,e+5),ds(this,e+3,e+4);return this},ss.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?xs(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Cs(this,e,n);case"utf8":case"utf-8":return xs(this,e,n);case"ascii":return Fs(this,e,n);case"latin1":case"binary":return Ts(this,e,n);case"base64":return Es(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ks(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},ss.prototype.equals=function(t){if(!ls(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ss.compare(this,t)},ss.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ss.prototype.compare=function(t,e,n,r,i){if(!ls(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),u=this.slice(r,i),c=t.slice(e,n),h=0;h<a;++h)if(u[h]!==c[h]){s=u[h],o=c[h];break}return s<o?-1:o<s?1:0},ss.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},ss.prototype.indexOf=function(t,e,n){return ps(this,t,e,n,!0)},ss.prototype.lastIndexOf=function(t,e,n){return ps(this,t,e,n,!1)},ss.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return vs(this,t,e,n);case"utf8":case"utf-8":return ys(this,t,e,n);case"ascii":return ms(this,t,e,n);case"latin1":case"binary":return bs(this,t,e,n);case"base64":return ws(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ss(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},ss.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var As=4096;function Fs(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function Ts(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function Cs(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=Bs(t[s]);return i}function ks(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Is(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Os(t,e,n,r,i,s){if(!ls(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Rs(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Ds(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Ns(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function _s(t,e,n,r,i){return i||Ns(t,0,n,4),ts(t,e,n,r,23,4),n+4}function Ps(t,e,n,r,i){return i||Ns(t,0,n,8),ts(t,e,n,r,52,8),n+8}ss.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ss.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ss.prototype;else{var i=e-t;n=new ss(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},ss.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Is(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},ss.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Is(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},ss.prototype.readUInt8=function(t,e){return e||Is(t,1,this.length),this[t]},ss.prototype.readUInt16LE=function(t,e){return e||Is(t,2,this.length),this[t]|this[t+1]<<8},ss.prototype.readUInt16BE=function(t,e){return e||Is(t,2,this.length),this[t]<<8|this[t+1]},ss.prototype.readUInt32LE=function(t,e){return e||Is(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ss.prototype.readUInt32BE=function(t,e){return e||Is(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ss.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Is(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},ss.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Is(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},ss.prototype.readInt8=function(t,e){return e||Is(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ss.prototype.readInt16LE=function(t,e){e||Is(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},ss.prototype.readInt16BE=function(t,e){e||Is(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},ss.prototype.readInt32LE=function(t,e){return e||Is(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ss.prototype.readInt32BE=function(t,e){return e||Is(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ss.prototype.readFloatLE=function(t,e){return e||Is(t,4,this.length),Zi(this,t,!0,23,4)},ss.prototype.readFloatBE=function(t,e){return e||Is(t,4,this.length),Zi(this,t,!1,23,4)},ss.prototype.readDoubleLE=function(t,e){return e||Is(t,8,this.length),Zi(this,t,!0,52,8)},ss.prototype.readDoubleBE=function(t,e){return e||Is(t,8,this.length),Zi(this,t,!1,52,8)},ss.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Os(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},ss.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Os(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},ss.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,1,255,0),ss.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ss.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,2,65535,0),ss.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Rs(this,t,e,!0),e+2},ss.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,2,65535,0),ss.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Rs(this,t,e,!1),e+2},ss.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,4,4294967295,0),ss.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Ds(this,t,e,!0),e+4},ss.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,4,4294967295,0),ss.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ds(this,t,e,!1),e+4},ss.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Os(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},ss.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Os(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},ss.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,1,127,-128),ss.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ss.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,2,32767,-32768),ss.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Rs(this,t,e,!0),e+2},ss.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,2,32767,-32768),ss.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Rs(this,t,e,!1),e+2},ss.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,4,2147483647,-2147483648),ss.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Ds(this,t,e,!0),e+4},ss.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Os(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ss.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Ds(this,t,e,!1),e+4},ss.prototype.writeFloatLE=function(t,e,n){return _s(this,t,e,!0,n)},ss.prototype.writeFloatBE=function(t,e,n){return _s(this,t,e,!1,n)},ss.prototype.writeDoubleLE=function(t,e,n){return Ps(this,t,e,!0,n)},ss.prototype.writeDoubleBE=function(t,e,n){return Ps(this,t,e,!1,n)},ss.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!ss.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},ss.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!ss.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=ls(t)?t:Ls(new ss(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var js=/[^+\/0-9A-Za-z-_]/g;function Bs(t){return t<16?"0"+t.toString(16):t.toString(16)}function Ls(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function Hs(t){return function(t){var e,n,r,i,s,o;Gi||Ji();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=new Yi(3*a/4-(s="="===t[a-2]?2:"="===t[a-1]?1:0)),r=s>0?a-4:a;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)i=$i[t.charCodeAt(e)]<<18|$i[t.charCodeAt(e+1)]<<12|$i[t.charCodeAt(e+2)]<<6|$i[t.charCodeAt(e+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===s?(i=$i[t.charCodeAt(e)]<<2|$i[t.charCodeAt(e+1)]>>4,o[u++]=255&i):1===s&&(i=$i[t.charCodeAt(e)]<<10|$i[t.charCodeAt(e+1)]<<4|$i[t.charCodeAt(e+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(js,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Ms(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Vs(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function Us(t){return null===t}function qs(t){return"string"==typeof t}function Ks(t){return"object"==typeof t&&null!==t}function zs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Qs=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Ws(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function $s(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var Ys=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e};function Gs(t,e,n,r){n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e=e||"&");var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var a=t.length;o>0&&a>o&&(a=o);for(var u=0;u<a;++u){var c,h,l,f,d=t[u].replace(s,"%20"),p=d.indexOf(n);p>=0?(c=d.substr(0,p),h=d.substr(p+1)):(c=d,h=""),l=decodeURIComponent(c),f=decodeURIComponent(h),zs(i,l)?Qs(i[l])?i[l].push(f):i[l]=[i[l],f]:i[l]=f}return i}function Js(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Xs=/^([a-z0-9.+-]+:)/i,Zs=/:[0-9]*$/,to=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,eo=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),no=["'"].concat(eo),ro=["%","/","?",";","#"].concat(no),io=["/","?","#"],so=/^[+a-z0-9A-Z_-]{0,63}$/,oo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ao={javascript:!0,"javascript:":!0},uo={javascript:!0,"javascript:":!0},co={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ho(t,e,n){if(t&&Ks(t)&&t instanceof Js)return t;var r=new Js;return r.parse(t,e,n),r}function lo(t){var e=t.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var n,r,i,s=t.protocol||"",o=t.pathname||"",a=t.hash||"",u=!1,c="";t.host?u=e+t.host:t.hostname&&(u=e+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(u+=":"+t.port)),t.query&&Ks(t.query)&&Object.keys(t.query).length&&(r=r||"&",i=i||"=",null===(n=t.query)&&(n=void 0),c="object"==typeof n?$s(Ys(n),function(t){var e=encodeURIComponent(Ws(t))+i;return Qs(n[t])?$s(n[t],function(t){return e+encodeURIComponent(Ws(t))}).join(r):e+encodeURIComponent(Ws(n[t]))}).join(r):"");var h=t.search||c&&"?"+c||"";return s&&":"!==s.substr(-1)&&(s+=":"),t.slashes||(!s||co[s])&&!1!==u?(u="//"+(u||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):u||(u=""),a&&"#"!==a.charAt(0)&&(a="#"+a),h&&"?"!==h.charAt(0)&&(h="?"+h),s+u+(o=o.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(h=h.replace("#","%23"))+a}function fo(t){var e=t.host,n=Zs.exec(e);n&&(":"!==(n=n[0])&&(t.port=n.substr(1)),e=e.substr(0,e.length-n.length)),e&&(t.hostname=e)}Js.prototype.parse=function(t,e,n){return function(t,e,n,r){if(!qs(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",o=e.split(s);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(s);if(a=a.trim(),!r&&1===e.split("#").length){var u=to.exec(a);if(u)return t.path=a,t.href=a,t.pathname=u[1],u[2]?(t.search=u[2],t.query=n?Gs(t.search.substr(1)):t.search.substr(1)):n&&(t.search="",t.query={}),t}var c,h,l,f=Xs.exec(a);if(f){var d=(f=f[0]).toLowerCase();t.protocol=d,a=a.substr(f.length)}if(r||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===a.substr(0,2);!p||f&&uo[f]||(a=a.substr(2),t.slashes=!0)}if(!uo[f]&&(p||f&&!co[f])){var g,v,y=-1;for(c=0;c<io.length;c++)-1!==(h=a.indexOf(io[c]))&&(-1===y||h<y)&&(y=h);for(-1!==(v=-1===y?a.lastIndexOf("@"):a.lastIndexOf("@",y))&&(g=a.slice(0,v),a=a.slice(v+1),t.auth=decodeURIComponent(g)),y=-1,c=0;c<ro.length;c++)-1!==(h=a.indexOf(ro[c]))&&(-1===y||h<y)&&(y=h);-1===y&&(y=a.length),t.host=a.slice(0,y),a=a.slice(y),fo(t),t.hostname=t.hostname||"";var m="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1];if(!m){var b=t.hostname.split(/\./);for(c=0,l=b.length;c<l;c++){var w=b[c];if(w&&!w.match(so)){for(var S="",E=0,x=w.length;E<x;E++)w.charCodeAt(E)>127?S+="x":S+=w[E];if(!S.match(so)){var A=b.slice(0,c),F=b.slice(c+1),T=w.match(oo);T&&(A.push(T[1]),F.unshift(T[2])),F.length&&(a="/"+F.join(".")+a),t.hostname=A.join(".");break}}}}t.hostname=t.hostname.length>255?"":t.hostname.toLowerCase(),m||(t.hostname=Qi(t.hostname)),t.host=(t.hostname||"")+(t.port?":"+t.port:""),t.href+=t.host,m&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!ao[d])for(c=0,l=no.length;c<l;c++){var C=no[c];if(-1!==a.indexOf(C)){var k=encodeURIComponent(C);k===C&&(k=escape(C)),a=a.split(C).join(k)}}var I=a.indexOf("#");-1!==I&&(t.hash=a.substr(I),a=a.slice(0,I));var O=a.indexOf("?");(-1!==O?(t.search=a.substr(O),t.query=a.substr(O+1),n&&(t.query=Gs(t.query)),a=a.slice(0,O)):n&&(t.search="",t.query={}),a&&(t.pathname=a),co[d]&&t.hostname&&!t.pathname&&(t.pathname="/"),t.pathname||t.search)&&(t.path=(t.pathname||"")+(t.search||""));return t.href=lo(t),t}(this,t,e,n)},Js.prototype.format=function(){return lo(this)},Js.prototype.resolve=function(t){return this.resolveObject(ho(t,!1,!0)).format()},Js.prototype.resolveObject=function(t){if(qs(t)){var e=new Js;e.parse(t,!1,!0),t=e}for(var n,r=new Js,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(r[c]=t[c])}return co[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!co[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var f=h[l];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||uo[t.protocol])r.pathname=t.pathname;else{for(n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}return r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,(r.pathname||r.search)&&(r.path=(r.pathname||"")+(r.search||"")),r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var d,p=r.pathname&&"/"===r.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=g||p||r.host&&t.pathname,y=v,m=r.pathname&&r.pathname.split("/")||[],b=r.protocol&&!co[r.protocol];if(n=t.pathname&&t.pathname.split("/")||[],b&&(r.hostname="",r.port=null,r.host&&(""===m[0]?m[0]=r.host:m.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),v=v&&(""===n[0]||""===m[0])),g)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,m=n;else if(n.length)m||(m=[]),m.pop(),m=m.concat(n),r.search=t.search,r.query=t.query;else if(null!=t.search)return b&&(r.hostname=r.host=m.shift(),(d=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=d.shift(),r.host=r.hostname=d.shift())),r.search=t.search,r.query=t.query,Us(r.pathname)&&Us(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!m.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var w=m.slice(-1)[0],S=(r.host||t.host||m.length>1)&&("."===w||".."===w)||""===w,E=0,x=m.length;x>=0;x--)"."===(w=m[x])?m.splice(x,1):".."===w?(m.splice(x,1),E++):E&&(m.splice(x,1),E--);if(!v&&!y)for(;E--;E)m.unshift("..");!v||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),S&&"/"!==m.join("/").substr(-1)&&m.push("");var A=""===m[0]||m[0]&&"/"===m[0].charAt(0);return b&&(r.hostname=r.host=A?"":m.length?m.shift():"",(d=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=d.shift(),r.host=r.hostname=d.shift())),(v=v||r.host&&m.length)&&!A&&m.unshift(""),m.length?r.pathname=m.join("/"):(r.pathname=null,r.path=null),Us(r.pathname)&&Us(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Js.prototype.parseHost=function(){return fo(this)};class po{constructor(e){t(this,e),this.href="#"}componentWillLoad(){const t=ho(this.href),e=this.stripTrailingSlash(t.pathname),n=this.stripTrailingSlash(window.location.pathname);this.isActive=null==this.isActive?e==n:this.isActive}stripTrailingSlash(t){try{return t.replace(/^(.+?)\/*?$/,"$1")}catch(e){return t}}clicked(){this.element.parentNode.parentElement.querySelectorAll("crds-snail-trail-link").forEach(t=>t.isActive=!1),this.isActive=!0}render(){let t={href:this.href,onClick:this.clicked.bind(this),class:this.isActive?"active":""};return e("a",Object.assign({"data-automation-id":this.automationId},t),e("slot",null))}get element(){return n(this)}static get style(){return"a{color:#4d4d4d;display:block;font-weight:300;padding:11px 15px;position:relative;text-decoration:none}a.active:before{border:10px solid transparent;border-bottom:0;border-top-color:#0095d9;content:\"\";left:50%;position:absolute;top:0;-webkit-transform:translateX(-50%);transform:translateX(-50%)}\@media (hover){a:hover:after{background-color:#0095d9;bottom:0;content:\"\";display:inline-block;height:2px;left:15px;position:absolute;width:calc(100% - 30px)}}"}}var go={iframeResizer:H(function(t){!function(e){if("undefined"!=typeof window){var n,r=0,i=!1,s=!1,o="message".length,a="[iFrameSizer]",u=a.length,c=null,h=window.requestAnimationFrame,l={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},f={},d=null,p={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClosed:function(){},onInit:function(){},onMessage:function(){E("onMessage function not defined")},onResized:function(){},onScroll:function(){return!0}},g={};window.jQuery&&((n=window.jQuery).fn?n.fn.iFrameResize||(n.fn.iFrameResize=function(t){return this.filter("iframe").each(function(e,n){j(n,t)}).end()}):S("","Unable to bind to jQuery, it is not fully loaded.")),"function"==typeof e&&e.amd?e([],M):t.exports=M(),window.iFrameResize=window.iFrameResize||M()}function v(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function y(t,e,n){t.addEventListener(e,n,!1)}function m(t,e,n){t.removeEventListener(e,n,!1)}function b(t){return f[t]?f[t].log:i}function w(t,e){x("log",t,e,b(t))}function S(t,e){x("info",t,e,b(t))}function E(t,e){x("warn",t,e,!0)}function x(t,e,n,r){!0===r&&"object"==typeof window.console&&console[t](function(t){return a+"["+function(t){var e="Host page: "+t;return window.top!==window.self&&(e=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+t:"Nested host page: "+t),e}(t)+"]"}(e),n)}function A(t){function e(){n("Height"),n("Width"),N(function(){D(A),I(T),d("onResized",A)},A,"init")}function n(t){var e=Number(f[T]["max"+t]),n=Number(f[T]["min"+t]),r=t.toLowerCase(),i=Number(A[r]);w(T,"Checking "+r+" is in range "+n+"-"+e),i<n&&(i=n,w(T,"Set "+r+" to min value")),i>e&&(i=e,w(T,"Set "+r+" to max value")),A[r]=""+i}function r(t){return x.substr(x.indexOf(":")+o+t)}function i(t,e){var n,r;n=function(){var n,r;_("Send Page Info","pageInfo:"+(n=document.body.getBoundingClientRect(),r=A.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:r.height,iframeWidth:r.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(r.top-n.top,10),offsetLeft:parseInt(r.left-n.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),t,e)},g[r=e]||(g[r]=setTimeout(function(){g[r]=null,n()},32))}function s(t){var e=t.getBoundingClientRect();return k(T),{x:Math.floor(Number(e.left)+Number(c.x)),y:Math.floor(Number(e.top)+Number(c.y))}}function h(t){var e=t?s(A.iframe):{x:0,y:0},n={x:Number(A.width)+e.x,y:Number(A.height)+e.y};w(T,"Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(t?"Offset":"")](n.x,n.y):E(T,"Unable to scroll to requested position, window.parentIFrame not found"):(c=n,l(),w(T,"--"))}function l(){!1!==d("onScroll",c)?I(T):O()}function d(t,e){return F(T,t,e)}var p,v,b,x=t.data,A={},T=null;"[iFrameResizerChild]Ready"===x?function(){for(var t in f)_("iFrame requested init",P(t),document.getElementById(t),t)}():a===(""+x).substr(0,u)&&x.substr(u).split(":")[0]in f?(b=x.substr(u).split(":"),f[T=(A={iframe:f[b[0]]&&f[b[0]].iframe,id:b[0],height:b[1],width:b[2],type:b[3]}).id]&&(f[T].loaded=!0),(v=A.type in{true:1,false:1,undefined:1})&&w(T,"Ignoring init message from meta parent page"),!v&&function(t){var e=!0;return f[t]||(e=!1,E(A.type+" No settings for "+t+". Message was: "+x)),e}(T)&&(w(T,"Received: "+x),p=!0,null===A.iframe&&(E(T,"IFrame ("+A.id+") not found"),p=!1),p&&function(){var e,n=t.origin,r=f[T]&&f[T].checkOrigin;if(r&&""+n!="null"&&!(r.constructor===Array?function(){var t=0,e=!1;for(w(T,"Checking connection is from allowed list of origins: "+r);t<r.length;t++)if(r[t]===n){e=!0;break}return e}():(w(T,"Checking connection is from: "+(e=f[T]&&f[T].remoteHost)),n===e)))throw new Error("Unexpected message received from: "+n+" for "+A.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(f[T]&&f[T].firstRun&&f[T]&&(f[T].firstRun=!1),A.type){case"close":f[T].closeRequeston?F(T,"onCloseRequest",f[T].iframe):C(A.iframe);break;case"message":u=r(6),w(T,"onMessage passed: {iframe: "+A.iframe.id+", message: "+u+"}"),d("onMessage",{iframe:A.iframe,message:JSON.parse(u)}),w(T,"--");break;case"scrollTo":h(!1);break;case"scrollToOffset":h(!0);break;case"pageInfo":i(f[T]&&f[T].iframe,T),function(){function t(t,r){function s(){f[n]?i(f[n].iframe,n):e()}["scroll","resize"].forEach(function(e){w(n,t+e+" listener for sendPageInfo"),r(window,e,s)})}function e(){t("Remove ",m)}var n=T;t("Add ",y),f[n]&&(f[n].stopPageInfo=e)}();break;case"pageInfoStop":f[T]&&f[T].stopPageInfo&&(f[T].stopPageInfo(),delete f[T].stopPageInfo);break;case"inPageLink":n=r(9).split("#")[1]||"",o=decodeURIComponent(n),(a=document.getElementById(o)||document.getElementsByName(o)[0])?(t=s(a),w(T,"Moving to in page link (#"+n+") at x: "+t.x+" y: "+t.y),c={x:t.x,y:t.y},l(),w(T,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(n):w(T,"In page link #"+n+" not found and window.parentIFrame not found"):w(T,"In page link #"+n+" not found");break;case"reset":R(A);break;case"init":e(),d("onInit",A.iframe);break;default:e()}var t,n,o,a,u}())):S(T,"Ignored: "+x)}function F(t,e,n){var r=null,i=null;if(f[t]){if("function"!=typeof(r=f[t][e]))throw new TypeError(e+" on iFrame["+t+"] is not a function");i=r(n)}return i}function T(t){delete f[t.id]}function C(t){var e=t.id;w(e,"Removing iFrame: "+e);try{t.parentNode&&t.parentNode.removeChild(t)}catch(t){E(t)}F(e,"onClosed",e),w(e,"--"),T(t)}function k(t){null===c&&w(t,"Get page position: "+(c={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop}).x+","+c.y)}function I(t){null!==c&&(window.scrollTo(c.x,c.y),w(t,"Set page position: "+c.x+","+c.y),O())}function O(){c=null}function R(t){w(t.id,"Size reset requested by "+("init"===t.type?"host page":"iFrame")),k(t.id),N(function(){D(t),_("reset","reset",t.iframe,t.id)},t,"reset")}function D(t){function e(e){!function(e){t.id?(t.iframe.style[e]=t[e]+"px",w(t.id,"IFrame ("+n+") "+e+" set to "+t[e]+"px")):w("undefined","messageData id not set")}(e),function(e){s||"0"!==t[e]||(s=!0,w(n,"Hidden iFrame detected, creating visibility listener"),function(){function t(){Object.keys(f).forEach(function(t){!function(t){function e(e){return"0px"===(f[t]&&f[t].iframe.style[e])}f[t]&&null!==f[t].iframe.offsetParent&&(e("height")||e("width"))&&_("Visibility change","resize",f[t].iframe,t)}(f[t])})}var e,n=v();n&&(e=document.querySelector("body"),new n(function(e){w("window","Mutation observed: "+e[0].target+" "+e[0].type),B(t,16)}).observe(e,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}))}())}(e)}var n=t.iframe.id;f[n]&&(f[n].sizeHeight&&e("height"),f[n].sizeWidth&&e("width"))}function N(t,e,n){n!==e.type&&h?(w(e.id,"Requesting animation frame"),h(t)):t()}function _(t,e,n,r,i){var s,o=!1;f[r=r||n.id]&&(n&&"contentWindow"in n&&null!==n.contentWindow?(w(r,"["+t+"] Sending msg to iframe["+r+"] ("+e+") targetOrigin: "+(s=f[r]&&f[r].targetOrigin)),n.contentWindow.postMessage(a+e,s)):E(r,"["+t+"] IFrame("+r+") not found"),i&&f[r]&&f[r].warningTimeout&&(f[r].msgTimeout=setTimeout(function(){!f[r]||f[r].loaded||o||(o=!0,E(r,"IFrame has not responded within "+f[r].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},f[r].warningTimeout)))}function P(t){return t+":"+f[t].bodyMarginV1+":"+f[t].sizeWidth+":"+f[t].log+":"+f[t].interval+":"+f[t].enablePublicMethods+":"+f[t].autoResize+":"+f[t].bodyMargin+":"+f[t].heightCalculationMethod+":"+f[t].bodyBackground+":"+f[t].bodyPadding+":"+f[t].tolerance+":"+f[t].inPageLinks+":"+f[t].resizeFrom+":"+f[t].widthCalculationMethod}function j(t,n){function s(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],E(u,"Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}var o,a,u=function(e){var s;return""===e&&(t.id=(s=n&&n.id||p.id+r++,null!==document.getElementById(s)&&(s+=r++),e=s),i=(n||{}).log,w(e,"Added missing iframe ID: "+e+" ("+t.src+")")),e}(t.id);u in f&&"iFrameResizer"in t?E(u,"Ignored iFrame, already setup."):(function(e){var n;e=e||{},f[u]={firstRun:!0,iframe:t,remoteHost:t.src.split("/").slice(0,3).join("/")},function(t){if("object"!=typeof t)throw new TypeError("Options is not an object")}(e),Object.keys(e).forEach(s,e),function(t){for(var e in p)Object.prototype.hasOwnProperty.call(p,e)&&(f[u][e]=Object.prototype.hasOwnProperty.call(t,e)?t[e]:p[e])}(e),f[u]&&(f[u].targetOrigin=!0===f[u].checkOrigin?""===(n=f[u].remoteHost)||"file://"===n?"*":n:"*")}(n),function(){switch(w(u,"IFrame scrolling "+(f[u]&&f[u].scrolling?"enabled":"disabled")+" for "+u),t.style.overflow=!1===(f[u]&&f[u].scrolling)?"hidden":"auto",f[u]&&f[u].scrolling){case"omit":break;case!0:t.scrolling="yes";break;case!1:t.scrolling="no";break;default:t.scrolling=f[u]?f[u].scrolling:"no"}}(),function(){function e(e){1/0!==f[u][e]&&0!==f[u][e]&&(t.style[e]=f[u][e]+"px",w(u,"Set "+e+" = "+f[u][e]+"px"))}function n(t){if(f[u]["min"+t]>f[u]["max"+t])throw new Error("Value for min"+t+" can not be greater than max"+t)}n("Height"),n("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),"number"!=typeof(f[u]&&f[u].bodyMargin)&&"0"!==(f[u]&&f[u].bodyMargin)||(f[u].bodyMarginV1=f[u].bodyMargin,f[u].bodyMargin=f[u].bodyMargin+"px"),o=P(u),(a=v())&&function(e){t.parentNode&&new e(function(e){e.forEach(function(e){Array.prototype.slice.call(e.removedNodes).forEach(function(e){e===t&&C(t)})})}).observe(t.parentNode,{childList:!0})}(a),y(t,"load",function(){_("iFrame.onload",o,t,e,!0),(!f[u]||!f[u].firstRun)&&f[u]&&f[u].heightCalculationMethod in l&&R({iframe:t,height:0,width:0,type:"init"})}),_("init",o,t,e,!0),f[u]&&(f[u].iframe.iFrameResizer={close:C.bind(null,f[u].iframe),removeListeners:T.bind(null,f[u].iframe),resize:_.bind(null,"Window resize","resize",f[u].iframe),moveToAnchor:function(t){_("Move to anchor","moveToAnchor:"+t,f[u].iframe,u)},sendMessage:function(t){_("Send Message","message:"+(t=JSON.stringify(t)),f[u].iframe,u)}}))}function B(t,e){null===d&&(d=setTimeout(function(){d=null,t()},e))}function L(){"hidden"!==document.visibilityState&&(w("document","Trigger event: Visiblity change"),B(function(){H("Tab Visable","resize")},16))}function H(t,e){Object.keys(f).forEach(function(n){(function(t){return f[t]&&"parent"===f[t].resizeFrom&&f[t].autoResize&&!f[t].firstRun})(n)&&_(t,e,document.getElementById(n),n)})}function M(){function t(t,e){e&&(function(){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">")}(),j(e,t),n.push(e))}var n;return function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!h;t+=1)h=window[e[t]+"RequestAnimationFrame"];h||w("setup","RequestAnimationFrame not supported")}(),y(window,"message",A),y(window,"resize",function(){w("window","Trigger event: resize"),B(function(){H("Window resize","resize")},16)}),y(document,"visibilitychange",L),y(document,"-webkit-visibilitychange",L),function(r,i){switch(n=[],function(t){t&&t.enablePublicMethods&&E("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(r),typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),t.bind(e,r));break;case"object":t(r,i);break;default:throw new TypeError("Unexpected data type ("+typeof i+")")}return n}}}()}),iframeResizerContentWindow:H(function(t){!function(e){if("undefined"!=typeof window){var n=!0,r=10,i="",s=0,o="",a=null,u="",c=!1,h={resize:1,click:1},l=128,f=!0,d=1,p="bodyOffset",g=p,v=!0,y="",m={},b=32,w=null,S=!1,E="[iFrameSizer]",x=E.length,A="",F={max:1,min:1,bodyScroll:1,documentElementScroll:1},T="child",C=!0,k=window.parent,I="*",O=0,R=!1,D=null,N=16,_=1,P="scroll",j=P,B=window,L=function(){et("onMessage function not defined")},H=function(){},M=function(){},V={height:function(){return et("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return et("Custom width calculation function not defined"),document.body.scrollWidth}},U={},q=!1;try{var K=Object.create({},{passive:{get:function(){q=!0}}});window.addEventListener("test",Y,K),window.removeEventListener("test",Y,K)}catch(t){}var z=Date.now||function(){return(new Date).getTime()},Q={bodyOffset:function(){return document.body.offsetHeight+dt("marginTop")+dt("marginBottom")},offset:function(){return Q.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return V.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,gt(Q))},min:function(){return Math.min.apply(null,gt(Q))},grow:function(){return Q.max()},lowestElement:function(){return Math.max(Q.bodyOffset()||Q.documentElementOffset(),pt("bottom",yt()))},taggedElement:function(){return vt("bottom","data-iframe-height")}},W={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return V.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(W.bodyScroll(),W.documentElementScroll())},max:function(){return Math.max.apply(null,gt(W))},min:function(){return Math.min.apply(null,gt(W))},rightMostElement:function(){return pt("right",yt())},taggedElement:function(){return vt("right","data-iframe-width")}},$=function(t){var e,n,r,i=null,s=0,o=function(){s=z(),i=null,r=t.apply(e,n),i||(e=n=null)};return function(){var a=z();s||(s=a);var u=N-(a-s);return e=this,n=arguments,u<=0||u>N?(i&&(clearTimeout(i),i=null),s=a,r=t.apply(e,n),i||(e=n=null)):i||(i=setTimeout(o,u)),r}}(mt);G(window,"message",At),G(window,"readystatechange",Ft),Ft()}function Y(){}function G(t,e,n,r){t.addEventListener(e,n,!!q&&(r||{}))}function J(t,e,n){t.removeEventListener(e,n,!1)}function X(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Z(t){return E+"["+A+"] "+t}function tt(t){S&&"object"==typeof window.console&&Z(t)}function et(t){"object"==typeof window.console&&console.warn(Z(t))}function nt(){var t,r;!function(){function t(t){return"true"===t}var r=y.substr(x).split(":");A=r[0],s=e!==r[1]?Number(r[1]):s,c=e!==r[2]?t(r[2]):c,S=e!==r[3]?t(r[3]):S,b=e!==r[4]?Number(r[4]):b,n=e!==r[6]?t(r[6]):n,o=r[7],g=e!==r[8]?r[8]:g,i=r[9],u=r[10],O=e!==r[11]?Number(r[11]):O,m.enable=e!==r[12]&&t(r[12]),T=e!==r[13]?r[13]:T,j=e!==r[14]?r[14]:j}(),tt("Initialising iFrame ("+location.href+")"),function(){function t(t,e){return"function"==typeof t&&(tt("Setup custom "+e+"CalcMethod"),V[e]=t,t="custom"),t}var e;"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(e=window.iFrameResizer,tt("Reading data from page: "+JSON.stringify(e)),Object.keys(e).forEach(rt,e),L="onMessage"in e?e.onMessage:L,H="onReady"in e?e.onReady:H,I="targetOrigin"in e?e.targetOrigin:I,j="widthCalculationMethod"in e?e.widthCalculationMethod:j,g=t(g="heightCalculationMethod"in e?e.heightCalculationMethod:g,"height"),j=t(j,"width")),tt("TargetOrigin for parent set to: "+I)}(),e===o&&(o=s+"px"),it("margin",(-1!==(r=o).indexOf("-")&&(et("Negative CSS value ignored for margin"),r=""),r)),it("background",i),it("padding",u),(t=document.createElement("div")).style.clear="both",t.style.display="block",t.style.height="0",document.body.appendChild(t),ut(),ct(),document.documentElement.style.height="",document.body.style.height="",tt('HTML & body height set to "auto"'),tt("Enable public methods"),B.parentIFrame={autoResize:function(t){return!0===t&&!1===n?(n=!0,ht()):!1===t&&!0===n&&(n=!1,lt()),n},close:function(){xt(0,0,"close"),tt("Disable outgoing messages"),C=!1,tt("Remove event listener: Message"),J(window,"message",At),!0===n&&lt()},getId:function(){return A},getPageInfo:function(t){"function"==typeof t?(M=t,xt(0,0,"pageInfo")):(M=function(){},xt(0,0,"pageInfoStop"))},moveToAnchor:function(t){m.findTarget(t)},reset:function(){Et("parentIFrame.reset")},scrollTo:function(t,e){xt(e,t,"scrollTo")},scrollToOffset:function(t,e){xt(e,t,"scrollToOffset")},sendMessage:function(t,e){xt(0,0,"message",JSON.stringify(t),e)},setHeightCalculationMethod:function(t){g=t,ut()},setWidthCalculationMethod:function(t){j=t,ct()},setTargetOrigin:function(t){tt("Set targetOrigin: "+t),I=t},size:function(t,e){bt("size","parentIFrame.size("+((t||"")+(e?","+e:""))+")",t,e)}},ht(),m=function(){function t(t){var n=t.split("#")[1]||t,r=decodeURIComponent(n),i=document.getElementById(r)||document.getElementsByName(r)[0];e!==i?function(t){var r,i,s=(r=t.getBoundingClientRect(),i={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop},{x:parseInt(r.left,10)+parseInt(i.x,10),y:parseInt(r.top,10)+parseInt(i.y,10)});tt("Moving to in page link (#"+n+") at x: "+s.x+" y: "+s.y),xt(s.y,s.x,"scrollToOffset")}(i):(tt("In page link (#"+n+") not found in iFrame, so sending to parent"),xt(0,0,"inPageLink","#"+n))}function n(){""!==location.hash&&"#"!==location.hash&&t(location.href)}return m.enable?Array.prototype.forEach&&document.querySelectorAll?(tt("Setting up location.hash handlers"),Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),function(e){"#"!==e.getAttribute("href")&&G(e,"click",function(e){e.preventDefault(),t(this.getAttribute("href"))})}),G(window,"hashchange",n),setTimeout(n,l)):et("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):tt("In page linking not enabled"),{findTarget:t}}(),bt("init","Init message from host page"),H()}function rt(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],et("Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}function it(t,n){e!==n&&""!==n&&"null"!==n&&(document.body.style[t]=n,tt("Body "+t+' set to "'+n+'"'))}function st(t){var e={add:function(e){function n(){bt(t.eventName,t.eventType)}U[e]=n,G(window,e,n,{passive:!0})},remove:function(t){var e=U[t];delete U[t],J(window,t,e)}};t.eventNames&&Array.prototype.map?(t.eventName=t.eventNames[0],t.eventNames.map(e[t.method])):e[t.method](t.eventName),tt(X(t.method)+" event listener: "+t.eventType)}function ot(t){st({method:t,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),st({method:t,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),st({method:t,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),st({method:t,eventType:"Input",eventName:"input"}),st({method:t,eventType:"Mouse Up",eventName:"mouseup"}),st({method:t,eventType:"Mouse Down",eventName:"mousedown"}),st({method:t,eventType:"Orientation Change",eventName:"orientationchange"}),st({method:t,eventType:"Print",eventName:["afterprint","beforeprint"]}),st({method:t,eventType:"Ready State Change",eventName:"readystatechange"}),st({method:t,eventType:"Touch Start",eventName:"touchstart"}),st({method:t,eventType:"Touch End",eventName:"touchend"}),st({method:t,eventType:"Touch Cancel",eventName:"touchcancel"}),st({method:t,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),st({method:t,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),st({method:t,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===T&&st({method:t,eventType:"IFrame Resized",eventName:"resize"})}function at(t,e,n,r){return e!==t&&(t in n||(et(t+" is not a valid option for "+r+"CalculationMethod."),t=e),tt(r+' calculation method set to "'+t+'"')),t}function ut(){g=at(g,p,Q,"height")}function ct(){j=at(j,P,W,"width")}function ht(){!0===n?(ot("add"),window.MutationObserver||window.WebKitMutationObserver?0>b?ft():a=function(){function t(t){function e(t){!1===t.complete&&(tt("Attach listeners to "+t.src),t.addEventListener("load",i,!1),t.addEventListener("error",s,!1),a.push(t))}"attributes"===t.type&&"src"===t.attributeName?e(t.target):"childList"===t.type&&Array.prototype.forEach.call(t.target.querySelectorAll("img"),e)}function n(t){tt("Remove listeners from "+t.src),t.removeEventListener("load",i,!1),t.removeEventListener("error",s,!1),function(t){a.splice(a.indexOf(t),1)}(t)}function r(t,r,i){n(t.target),bt(r,i+": "+t.target.src,e,e)}function i(t){r(t,"imageLoad","Image loaded")}function s(t){r(t,"imageLoadFailed","Image load failed")}function o(e){bt("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}var a=[],u=window.MutationObserver||window.WebKitMutationObserver,c=function(){var t=document.querySelector("body");return c=new u(o),tt("Create body MutationObserver"),c.observe(t,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),c}();return{disconnect:function(){"disconnect"in c&&(tt("Disconnect body MutationObserver"),c.disconnect(),a.forEach(n))}}}():(tt("MutationObserver not supported in this browser!"),ft())):tt("Auto Resize disabled")}function lt(){ot("remove"),null!==a&&a.disconnect(),clearInterval(w)}function ft(){0!==b&&(tt("setInterval: "+b+"ms"),w=setInterval(function(){bt("interval","setInterval: "+b)},Math.abs(b)))}function dt(t,e){var n=0;return e=e||document.body,n=null!==(n=document.defaultView.getComputedStyle(e,null))?n[t]:0,parseInt(n,r)}function pt(t,e){for(var n=e.length,r=0,i=0,s=X(t),o=z(),a=0;a<n;a++)(r=e[a].getBoundingClientRect()[t]+dt("margin"+s,e[a]))>i&&(i=r);return o=z()-o,tt("Parsed "+n+" HTML elements"),tt("Element position calculated in "+o+"ms"),function(t){t>N/2&&tt("Event throttle increased to "+(N=2*t)+"ms")}(o),i}function gt(t){return[t.bodyOffset(),t.bodyScroll(),t.documentElementOffset(),t.documentElementScroll()]}function vt(t,e){var n=document.querySelectorAll("["+e+"]");return 0===n.length&&(et("No tagged elements ("+e+") found on page"),document.querySelectorAll("body *")),pt(t,n)}function yt(){return document.querySelectorAll("body *")}function mt(t,n,r,i){var s,o;!function(){function t(t,e){return!(Math.abs(t-e)<=O)}return s=e!==r?r:Q[g](),o=e!==i?i:W[j](),t(d,s)||c&&t(_,o)}()&&"init"!==t?t in{init:1,interval:1,size:1}||!(g in F||c&&j in F)?t in{interval:1}||tt("No change in size detected"):Et(n):(wt(),xt(d=s,_=o,t))}function bt(t,e,n,r){R&&t in h?tt("Trigger event cancelled: "+t):(t in{reset:1,resetPage:1,init:1}||tt("Trigger event: "+e),"init"===t?mt(t,e,n,r):$(t,e,n,r))}function wt(){R||(R=!0,tt("Trigger event lock on")),clearTimeout(D),D=setTimeout(function(){R=!1,tt("Trigger event lock off"),tt("--")},l)}function St(t){d=Q[g](),_=W[j](),xt(d,_,t)}function Et(t){var e=g;g=p,tt("Reset trigger event: "+t),wt(),St("reset"),g=e}function xt(t,n,r,i,s){var o;!0===C&&(e===s?s=I:tt("Message targetOrigin: "+s),tt("Sending message to host page ("+(o=A+":"+t+":"+n+":"+r+(e!==i?":"+i:""))+")"),k.postMessage(E+o,s))}function At(e){var n,r={init:function(){y=e.data,k=e.source,nt(),f=!1,setTimeout(function(){v=!1},l)},reset:function(){v?tt("Page reset ignored by init"):(tt("Page size reset by host page"),St("resetPage"))},resize:function(){bt("resizeParent","Parent window requested size check")},moveToAnchor:function(){m.findTarget(s())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var t=s();tt("PageInfoFromParent called from parent: "+t),M(JSON.parse(t)),tt(" --")},message:function(){var t=s();tt("onMessage called from parent: "+t),L(JSON.parse(t)),tt(" --")}};function i(){return e.data.split("]")[1].split(":")[0]}function s(){return e.data.substr(e.data.indexOf(":")+1)}function o(){return e.data.split(":")[2]in{true:1,false:1}}E===(""+e.data).substr(0,x)&&(!1===f?(n=i())in r?r[n]():!t.exports&&"iFrameResize"in window||"jQuery"in window&&"iFrameResize"in window.jQuery.prototype||o()||et("Unexpected message ("+e.data+")"):o()?r.init():tt('Ignored message of type "'+i()+'". Received before initialization.'))}function Ft(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}()})};class vo{constructor(e){t(this,e),this.modalIsShowing=!1,this.handleSubscribeClick=()=>{this.modalIsShowing=!0},this.handleModalClose=()=>{this.modalIsShowing=!1}}componentDidUpdate(){go.iframeResizer({},this.frame)}render(){return e(vi,null,e("div",{class:"subscribe-script"}),e("button",{onClick:this.handleSubscribeClick,class:"subscribe-button"},this.label),e("crds-modal",{label:this.label,isActive:this.modalIsShowing,onModalClose:this.handleModalClose},e("iframe",{ref:t=>this.frame=t,src:this.src,class:"subscribe-frame",frameborder:"0"})))}static get style(){return".subscribe-button{background-color:transparent;border:0;color:#0095d9;cursor:pointer;display:inline-block;font:inherit;font-weight:600;line-height:normal;margin:0;padding:11px 15px}.subscribe-button:focus{border:0;outline:none}.subscribe-frame{border:none;height:100%;width:100%}"}}class yo{constructor(t){this.handleSignOut=t}renderSections(t,n){let r=!0;return e("div",null,e("h2",null," ",n," "),Array.isArray(t.children)&&t.children.map(t=>{let n="string"==typeof t,i=n?this.renderSubHeader(t):this.maybeRenderList(t,r);return r=!n,i&&e("div",{style:{padding:"0"}},i)}))}renderSubHeader(t){return e("h4",null,t)}maybeRenderList(t,n){if(!Array.isArray(t))return;const r=t.map(t=>this.maybeRenderListEntry(t,n)).filter(Boolean);return r.length>0&&e("ul",null,r)}maybeRenderListEntry(t,n){return this.isObjectTruthyNonArray(t)&&e("li",{class:this.topLevelClassValue(t,n)},e("nav-link",{href:t.href,automationId:t["automation-id"],handleSignOut:this.handleSignOut},t.title))}topLevelClassValue(t,e){return("boolean"==typeof t.top_level?t.top_level:e)?"top-level":""}isObjectTruthyNonArray(t){return t&&"object"==typeof t&&!Array.isArray(t)}}class mo{constructor(e){t(this,e),this.giveNavIsShowing=!0,this.simpleNav=new yo}navTitle(){const t=this.data;return t&&t.title||""}backgroundImageURL(t){return t.background_img||""}render(){return this.giveNavIsShowing&&this.simpleNav.isObjectTruthyNonArray(this.data)?e("div",{class:"give-nav",style:{backgroundImage:`url(${this.backgroundImageURL(this.data)})`}},this.simpleNav.renderSections(this.data,this.navTitle())):null}static get style(){return".give-nav,.profile-nav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#fff;background-color:#000;background-repeat:no-repeat;background-size:100%;height:100vh;left:0;margin-left:-15px;max-height:100vh;overflow-y:scroll;position:-webkit-sticky;position:sticky;top:48px;width:100vw;z-index:2}.give-nav div,.profile-nav div{height:auto;padding:30px 20px 90px}.give-nav a,.profile-nav a{color:#fff;display:inline-block;font-size:19px;margin-bottom:10px;padding-left:10px;text-decoration:none;text-transform:capitalize}.give-nav a.all,.profile-nav a.all{margin-bottom:30px}.give-nav a:hover,.profile-nav a:hover{color:#ccc}.give-nav h2,.profile-nav h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:48px;line-height:48px;margin:0;text-transform:uppercase;margin-bottom:20px}.give-nav h4,.profile-nav h4{font-size:11px;margin:0 0 10px;opacity:.5;text-transform:uppercase}.give-nav ul,.profile-nav ul{padding-left:0;margin-top:0}.give-nav ul li,.profile-nav ul li{list-style:none}.give-nav ul li.top-level a,.profile-nav ul li.top-level a{padding-left:0}\@media (min-width:992px){.give-nav,.profile-nav{height:auto;left:auto;margin-right:-15px;position:absolute;right:15px;width:375px}}\@media (min-width:1170px){.give-nav,.profile-nav{margin-right:0}}.give-nav::-webkit-scrollbar,.profile-nav::-webkit-scrollbar{width:0}.give-nav ul:last-of-type,.profile-nav ul:last-of-type{padding-bottom:30px}.give-nav{background-image:url(https://crds-media.imgix.net/6sNxa1MWhMOfjhAB47yTCa/0acf1af4109f23abc0199b1e34abeb7a/give-bg_2x.jpg?auto=format%2Ccompress)}.profile-nav:after{background-color:rgba(0,0,0,.75);content:\" \";z-index:-1}.profile-nav .profile-nav-img,.profile-nav:after{height:100%;left:0;position:absolute;top:0;width:100%}.profile-nav .profile-nav-img{background-position:top;background-repeat:no-repeat;background-size:contain;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-filter:blur(2px);filter:blur(2px);z-index:-2}\@media (min-width:992px){.profile-nav div{padding-bottom:0}}"}}function bo(t){return"function"==typeof t}let wo=!1;const So={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}wo=t},get useDeprecatedSynchronousErrorHandling(){return wo}};function Eo(t){setTimeout(()=>{throw t},0)}const xo={closed:!0,next(t){},error(t){if(So.useDeprecatedSynchronousErrorHandling)throw t;Eo(t)},complete(){}},Ao=Array.isArray||(t=>t&&"number"==typeof t.length);function Fo(t){return null!==t&&"object"==typeof t}function To(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}To.prototype=Object.create(Error.prototype);const Co=To;class ko{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_unsubscribe:n,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof ko)e.remove(this);else if(null!==e)for(let t=0;t<e.length;++t)e[t].remove(this);if(bo(n))try{n.call(this)}catch(e){t=e instanceof Co?Io(e.errors):[e]}if(Ao(r)){let e=-1,n=r.length;for(;++e<n;){const n=r[e];if(Fo(n))try{n.unsubscribe()}catch(e){t=t||[],e instanceof Co?t=t.concat(Io(e.errors)):t.push(e)}}}if(t)throw new Co(t)}add(t){let e=t;switch(typeof t){case"function":e=new ko(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof ko)){const t=e;(e=new ko)._subscriptions=[t]}break;default:if(!t)return ko.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof ko){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}function Io(t){return t.reduce((t,e)=>t.concat(e instanceof Co?e.errors:e),[])}ko.EMPTY=function(t){return t.closed=!0,t}(new ko);const Oo="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Ro extends ko{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=xo;break;case 1:if(!t){this.destination=xo;break}if("object"==typeof t){t instanceof Ro?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new Do(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new Do(this,t,e,n)}}[Oo](){return this}static create(t,e,n){const r=new Ro(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class Do extends Ro{constructor(t,e,n,r){let i;super(),this._parentSubscriber=t;let s=this;bo(e)?i=e:e&&(i=e.next,n=e.error,r=e.complete,e!==xo&&(bo((s=Object.create(e)).unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;So.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=So;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Eo(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Eo(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);So.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),So.useDeprecatedSynchronousErrorHandling)throw t;Eo(t)}}__tryOrSetError(t,e,n){if(!So.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return So.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Eo(e),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const No="function"==typeof Symbol&&Symbol.observable||"@@observable";function _o(){}class Po{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const e=new Po;return e.source=this,e.operator=t,e}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof Ro)return t;if(t[Oo])return t[Oo]()}return t||e||n?new Ro(t,e,n):new Ro(xo)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||So.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),So.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){So.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof Ro?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=jo(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(t){n(t),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[No](){return this}pipe(...t){return 0===t.length?this:((e=t)?1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)}:_o)(this);var e}toPromise(t){return new(t=jo(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}function jo(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}function Bo(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}Po.create=t=>new Po(t),Bo.prototype=Object.create(Error.prototype);const Lo=Bo;class Ho extends ko{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class Mo extends Ro{constructor(t){super(t),this.destination=t}}class Vo extends Po{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Oo](){return new Mo(this)}lift(t){const e=new Uo(this,this);return e.operator=t,e}next(t){if(this.closed)throw new Lo;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let e=0;e<n;e++)r[e].next(t)}}error(t){if(this.closed)throw new Lo;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let e=0;e<n;e++)r[e].error(t);this.observers.length=0}complete(){if(this.closed)throw new Lo;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let t=0;t<e;t++)n[t].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new Lo;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new Lo;return this.hasError?(t.error(this.thrownError),ko.EMPTY):this.isStopped?(t.complete(),ko.EMPTY):(this.observers.push(t),new Ho(this,t))}asObservable(){const t=new Po;return t.source=this,t}}Vo.create=(t,e)=>new Uo(t,e);class Uo extends Vo{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):ko.EMPTY}}class qo extends Vo{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Lo;return this._value}next(t){super.next(this._value=t)}}new Po(t=>t.complete());const Ko=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function zo(t,e){return new Po(n=>{const r=new ko;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Qo(...t){let e=t[t.length-1];return(n=e)&&"function"==typeof n.schedule?(t.pop(),zo(t,e)):new Po(Ko(t));var n}function Wo(t){return t}function $o(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}$o.prototype=Object.create(Error.prototype);const Yo=$o;function Go(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Go.prototype=Object.create(Error.prototype);const Jo=Go;function Xo(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Zo(t,e))}}class Zo{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new ta(t,this.project,this.thisArg))}}class ta extends Ro{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)}}class ea extends Ro{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class na extends Ro{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const ra="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ia=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function sa(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const oa=t=>{if(t&&"function"==typeof t[No])return(t=>e=>{const n=t[No]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(ia(t))return Ko(t);if(sa(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Eo),e))(t);if(t&&"function"==typeof t[ra])return(t=>e=>{const n=t[ra]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const e=Fo(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function aa(t,e,n,r,i=new na(t,n,r)){if(!i.closed)return e instanceof Po?e.subscribe(i):oa(e)(i)}function ua(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[No]}(t))return function(t,e){return new Po(n=>{const r=new ko;return r.add(e.schedule(()=>{const i=t[No]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(sa(t))return function(t,e){return new Po(n=>{const r=new ko;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(ia(t))return zo(t,e);if(function(t){return t&&"function"==typeof t[ra]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new Po(n=>{const r=new ko;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[ra](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const r=i.next();t=r.value,e=r.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof Po?t:new Po(oa(t))}function ca(t,e){return new Po(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=ua(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{++s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class ha{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new la(t,this.predicate,this.thisArg))}}class la extends Ro{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)}}var fa;function da(t){return function(e){const n=new pa(t),r=e.lift(n);return n.caught=r}}!function(t){t[t.Mp=1]="Mp",t[t.Okta=2]="Okta"}(fa||(fa={}));class pa{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ga(t,this.selector,this.caught))}}class ga extends ea{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const n=new na(this,void 0,void 0);this.add(n),aa(this,e,void 0,void 0,n)}}}class va{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ya(t,this.defaultValue))}}class ya extends Ro{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}class ma{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ba(t,this.errorFactory))}}class ba extends Ro{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}class wa{constructor(t){if(this.total=t,this.total<0)throw new Yo}call(t,e){return e.subscribe(new Sa(t,this.total))}}class Sa extends Ro{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ea(t,e){const n=arguments.length>=2;return r=>r.pipe(t?function(t){return function(e){return e.lift(new ha(t,void 0))}}((e,n)=>t(e,n,r)):Wo,t=>t.lift(new wa(1)),n?function(t=null){return e=>e.lift(new va(t))}(e):function(t=function(){return new Jo}){return e=>e.lift(new ma(t))}(()=>new Jo))}function xa(t,e){return"function"==typeof e?n=>n.pipe(xa((n,r)=>ua(t(n,r)).pipe(Xo((t,i)=>e(n,t,r,i))))):e=>e.lift(new Aa(t))}class Aa{constructor(t){this.project=t}call(t,e){return e.subscribe(new Fa(t,this.project))}}class Fa extends ea{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new na(this,void 0,void 0);this.destination.add(i),this.innerSubscription=aa(this,t,e,n,i)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function Ta(t,e,n){return function(r){return r.lift(new Ca(t,e,n))}}class Ca{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new ka(t,this.nextOrObserver,this.error,this.complete))}}class ka extends Ro{constructor(t,e,n,r){super(t),this._tapNext=_o,this._tapError=_o,this._tapComplete=_o,this._tapError=n||_o,this._tapComplete=r||_o,bo(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||_o,this._tapError=e.error||_o,this._tapComplete=e.complete||_o)}_next(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Ia{constructor(t=null,e=null){this.provider=fa.Okta,null!=t&&(this.access_token=t),null!=e&&(this.id_token=e)}static From(t){const{access_token:e,id_token:n}=t;return new Ia(e,n)}}class Oa{constructor(t,e){this.log=e,this.oktaAuthClient=t}authenticated(){return this.getTokenDictionary().pipe(xa(t=>t?Qo(t):this.getTokensFromSession()))}signOut(){return ua(this.oktaAuthClient.signOut()).pipe(Ea(),Xo(()=>(this.oktaAuthClient.tokenManager.clear(),this.log.Log("successfully logged out"),!0)),da(t=>(this.log.Error("AUTHENTICATION SERICE: okta signout function returned error",t),Qo(!1))))}subscribeToTokenExpiration(t){this.oktaAuthClient.tokenManager.on("expired",t)}subscribeToTokenRenewed(t){this.oktaAuthClient.tokenManager.on("renewed",t)}subscribeToTokenError(t){this.oktaAuthClient.tokenManager.on("error",t)}getTokenDictionary(){return function(...t){if(1===t.length){const n=t[0];if(Ao(n))return ca(n,null);if(Fo(n)&&(!(e=n)||!(e instanceof Po||"function"==typeof e.lift&&"function"==typeof e.subscribe))){const t=Object.keys(n);return ca(t.map(t=>n[t]),t)}}var e;if("function"==typeof t[t.length-1]){const e=t.pop();return ca(t=1===t.length&&Ao(t[0])?t[0]:t,null).pipe(Xo(t=>e(...t)))}return ca(t,null)}([ua(this.oktaAuthClient.tokenManager.get("id_token")),ua(this.oktaAuthClient.tokenManager.get("access_token"))]).pipe(Ea(),Xo(([t,e])=>t&&e?Ia.From({id_token:t,access_token:e}):null),da(t=>(this.log.Error("AUTHENTICATION SERICE: okta tokenManager get function returned error",t),Qo(null))))}getTokensFromSession(){return ua(this.oktaAuthClient.session.exists()).pipe(Ea(),xa(t=>t?ua(this.oktaAuthClient.token.getWithoutPrompt({scopes:["openid","profile","email"],responseType:["id_token","token"]})).pipe(Ea(),Ta(t=>{this.oktaAuthClient.tokenManager.add("id_token",t[0]),this.oktaAuthClient.tokenManager.add("access_token",t[1])}),Xo(t=>Ia.From({id_token:t[0],access_token:t[1]})),da(t=>(this.log.Error("AUTHENTICATION SERICE: okta get without prompt function returned error",t),Qo(null)))):Qo(null)),da(t=>(this.log.Error("AUTHENTICATION SERICE: okta session exists function returned error",t),Qo(null))))}}class Ra{constructor(t=null,e=null){this.provider=fa.Mp,null!=t&&(this.access_token=t),null!=e&&(this.refresh_token=e)}static From(t){const{access_token:e,refresh_token:n}=t;return new Ra(e,n)}}var Da=H(function(t){t.exports=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function s(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=t({path:"/"},i.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in s)s[u]&&(a+="; "+u,!0!==s[u]&&(a+="="+s[u].split(";")[0]));return document.cookie=e+"="+n+a}}function o(t,n){if("undefined"!=typeof document){for(var i={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var a=s[o].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(a[0]);if(u=(r.read||r)(u,c)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(i[c]=u,t===c)break}catch(t){}}return t?i[t]:i}}return i.set=s,i.get=function(t){return o(t,!1)},i.getJSON=function(t){return o(t,!0)},i.remove=function(e,n){s(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}(function(){})}()}),Na=!1,_a={};if(void 0===Pa)var Pa={};Pa.lang={extend:function(t,e,n){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),n){var i;for(i in n)t.prototype[i]=n[i];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(Na)&&(s=function(t,e){for(i=0;i<o.length;i+=1){var n=o[i],r=e[n];"function"==typeof r&&r!=Object.prototype[n]&&(t[n]=r)}})}catch(t){}s(t.prototype,n)}}};var ja,Ba,La,Ha,Ma,Va,Ua=Ua||function(t){var e={},n=e.lib={},r=n.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=n.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||o).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++)e[r+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(r+s)%4*8;else for(s=0;s<i;s+=4)e[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new i.init(n,e)}}),s=e.enc={},o=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new i.init(n,e/2)}},a=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new i.init(n,e)}},u=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(a.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return a.parse(unescape(encodeURIComponent(t)))}},c=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,s=n.sigBytes,o=this.blockSize,a=s/(4*o),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,c=t.min(4*u,s);if(u){for(var h=0;h<u;h+=o)this._doProcessBlock(r,h);var l=r.splice(0,u);n.sigBytes-=c}return new i.init(l,c)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(n.Hasher=c.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),e.algo={});return e}(Math);!function(){var t,e=(t=Ua).lib,n=e.Base,r=e.WordArray;(t=t.x64={}).Word=n.extend({init:function(t,e){this.high=t,this.low=e}}),t.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],i=0;i<e;i++){var s=t[i];n.push(s.high),n.push(s.low)}return r.create(n,this.sigBytes)},clone:function(){for(var t=n.clone.call(this),e=t.words=this.words.slice(0),r=e.length,i=0;i<r;i++)e[i]=e[i].clone();return t}})}(),Ua.lib.Cipher||function(){var t=(f=Ua).lib,e=t.Base,n=t.WordArray,r=t.BufferedBlockAlgorithm,i=f.enc.Base64,s=f.algo.EvpKDF,o=t.Cipher=r.extend({cfg:e.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?d:l).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?d:l).decrypt(t,e,n,r)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var a=f.mode={},u=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)t[e+i]^=r[i]},c=(t.BlockCipherMode=e.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();c.Encryptor=c.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;u.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),c.Decryptor=c.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=t.slice(e,e+r);n.decryptBlock(t,e),u.call(this,t,e,r),this._prevBlock=i}}),a=a.CBC=c,c=(f.pad={}).Pkcs7={pad:function(t,e){for(var r,i=(r=(r=4*e)-t.sigBytes%r)<<24|r<<16|r<<8|r,s=[],o=0;o<r;o+=4)s.push(i);r=n.create(s,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:a,padding:c}),reset:function(){o.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=t.CipherParams=e.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),l=(a=(f.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?n.create([1398893684,1701076831]).concat(t).concat(e):e).toString(i)},parse:function(t){var e=(t=i.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=n.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:r})}},t.SerializableCipher=e.extend({cfg:e.extend({format:a}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return e=i.finalize(e),h.create({ciphertext:e,key:n,iv:(i=i.cfg).iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),f=(f.kdf={}).OpenSSL={execute:function(t,e,r,i){return i||(i=n.random(8)),t=s.create({keySize:e+r}).compute(t,i),r=n.create(t.words.slice(e),4*r),t.sigBytes=4*e,h.create({key:t,iv:r,salt:i})}},d=t.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:f}),encrypt:function(t,e,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,(t=l.encrypt.call(this,t,e,n.key,r)).mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,l.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=Ua,e=t.lib.BlockCipher,n=t.algo,r=[],i=[],s=[],o=[],a=[],u=[],c=[],h=[],l=[],f=[],d=[],p=0;256>p;p++)d[p]=128>p?p<<1:p<<1^283;var g=0,v=0;for(p=0;256>p;p++){var y;r[g]=y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99,i[y]=g;var m=d[g],b=d[m],w=d[b],S=257*d[y]^16843008*y;s[g]=S<<24|S>>>8,o[g]=S<<16|S>>>16,a[g]=S<<8|S>>>24,u[g]=S,c[y]=(S=16843009*w^65537*b^257*m^16843008*g)<<24|S>>>8,h[y]=S<<16|S>>>16,l[y]=S<<8|S>>>24,f[y]=S,g?(g=m^d[d[d[w^m]]],v^=d[d[v]]):g=v=1}var E=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),i=this._keySchedule=[],s=0;s<n;s++)if(s<e)i[s]=t[s];else{var o=i[s-1];s%e?6<e&&4==s%e&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=E[s/e|0]<<24),i[s]=i[s-e]^o}for(t=this._invKeySchedule=[],e=0;e<n;e++)s=n-e,o=e%4?i[s]:i[s-4],t[e]=4>e||4>=s?o:c[r[o>>>24]]^h[r[o>>>16&255]]^l[r[o>>>8&255]]^f[r[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,o,a,u,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,c,h,l,f,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,s,o,a){for(var u=this._nRounds,c=t[e]^n[0],h=t[e+1]^n[1],l=t[e+2]^n[2],f=t[e+3]^n[3],d=4,p=1;p<u;p++){var g=r[c>>>24]^i[h>>>16&255]^s[l>>>8&255]^o[255&f]^n[d++],v=r[h>>>24]^i[l>>>16&255]^s[f>>>8&255]^o[255&c]^n[d++],y=r[l>>>24]^i[f>>>16&255]^s[c>>>8&255]^o[255&h]^n[d++];f=r[f>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[255&l]^n[d++],c=g,h=v,l=y}g=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^n[d++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[d++],y=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^n[d++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^n[d++],t[e]=g,t[e+1]=v,t[e+2]=y,t[e+3]=f},keySize:8}),t.AES=e._createHelper(n)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n,r=Ua,i=(n=r.lib).WordArray,s=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=s.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var r=o[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){var i=t[r]=[],s=u[r];for(n=0;24>n;n++)i[n/6|0]|=e[(a[n]-1+s)%28]<<31-n%6,i[4+(n/6|0)]|=e[28+(a[n+24]-1+s)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var s=0;16>s;s++){for(var o=i[s],a=this._lBlock,u=this._rBlock,l=0,f=0;8>f;f++)l|=c[f][((u^o[f])&h[f])>>>0];this._lBlock=u,this._rBlock=a^l}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=n._createHelper(l),s=s.TripleDES=n.extend({_doReset:function(){var t=this._key.words;this._des1=l.createEncryptor(i.create(t.slice(0,2))),this._des2=l.createEncryptor(i.create(t.slice(2,4))),this._des3=l.createEncryptor(i.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=n._createHelper(s)}(),ja=Ua.lib.WordArray,Ua.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var s=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)t.push(r.charAt(s>>>6*(3-o)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,n=this._map;(r=n.charAt(64))&&-1!=(r=t.indexOf(r))&&(e=r);for(var r=[],i=0,s=0;s<e;s++)if(s%4){var o=n.indexOf(t.charAt(s-1))<<s%4*2,a=n.indexOf(t.charAt(s))>>>6-s%4*2;r[i>>>2]|=(o|a)<<24-i%4*8,i++}return ja.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t){function e(t,e,n,r,i,s,o){return((t=t+(e&n|~e&r)+i+o)<<s|t>>>32-s)+e}function n(t,e,n,r,i,s,o){return((t=t+(e&r|n&~r)+i+o)<<s|t>>>32-s)+e}function r(t,e,n,r,i,s,o){return((t=t+(e^n^r)+i+o)<<s|t>>>32-s)+e}function i(t,e,n,r,i,s,o){return((t=t+(n^(e|~r))+i+o)<<s|t>>>32-s)+e}for(var s=Ua,o=(u=s.lib).WordArray,a=u.Hasher,u=s.algo,c=[],h=0;64>h;h++)c[h]=4294967296*t.abs(t.sin(h+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,s){for(var o=0;16>o;o++)t[a=s+o]=16711935&((u=t[a])<<8|u>>>24)|4278255360&(u<<24|u>>>8);var a,u=t[s+1],h=t[s+2],l=t[s+3],f=t[s+4],d=t[s+5],p=t[s+6],g=t[s+7],v=t[s+8],y=t[s+9],m=t[s+10],b=t[s+11],w=t[s+12],S=t[s+13],E=t[s+14],x=t[s+15],A=e(A=(o=this._hash.words)[0],C=o[1],T=o[2],F=o[3],a=t[s+0],7,c[0]),F=e(F,A,C,T,u,12,c[1]),T=e(T,F,A,C,h,17,c[2]),C=e(C,T,F,A,l,22,c[3]);A=e(A,C,T,F,f,7,c[4]),F=e(F,A,C,T,d,12,c[5]),T=e(T,F,A,C,p,17,c[6]),C=e(C,T,F,A,g,22,c[7]),A=e(A,C,T,F,v,7,c[8]),F=e(F,A,C,T,y,12,c[9]),T=e(T,F,A,C,m,17,c[10]),C=e(C,T,F,A,b,22,c[11]),A=e(A,C,T,F,w,7,c[12]),F=e(F,A,C,T,S,12,c[13]),T=e(T,F,A,C,E,17,c[14]),A=n(A,C=e(C,T,F,A,x,22,c[15]),T,F,u,5,c[16]),F=n(F,A,C,T,p,9,c[17]),T=n(T,F,A,C,b,14,c[18]),C=n(C,T,F,A,a,20,c[19]),A=n(A,C,T,F,d,5,c[20]),F=n(F,A,C,T,m,9,c[21]),T=n(T,F,A,C,x,14,c[22]),C=n(C,T,F,A,f,20,c[23]),A=n(A,C,T,F,y,5,c[24]),F=n(F,A,C,T,E,9,c[25]),T=n(T,F,A,C,l,14,c[26]),C=n(C,T,F,A,v,20,c[27]),A=n(A,C,T,F,S,5,c[28]),F=n(F,A,C,T,h,9,c[29]),T=n(T,F,A,C,g,14,c[30]),A=r(A,C=n(C,T,F,A,w,20,c[31]),T,F,d,4,c[32]),F=r(F,A,C,T,v,11,c[33]),T=r(T,F,A,C,b,16,c[34]),C=r(C,T,F,A,E,23,c[35]),A=r(A,C,T,F,u,4,c[36]),F=r(F,A,C,T,f,11,c[37]),T=r(T,F,A,C,g,16,c[38]),C=r(C,T,F,A,m,23,c[39]),A=r(A,C,T,F,S,4,c[40]),F=r(F,A,C,T,a,11,c[41]),T=r(T,F,A,C,l,16,c[42]),C=r(C,T,F,A,p,23,c[43]),A=r(A,C,T,F,y,4,c[44]),F=r(F,A,C,T,w,11,c[45]),T=r(T,F,A,C,x,16,c[46]),A=i(A,C=r(C,T,F,A,h,23,c[47]),T,F,a,6,c[48]),F=i(F,A,C,T,g,10,c[49]),T=i(T,F,A,C,E,15,c[50]),C=i(C,T,F,A,d,21,c[51]),A=i(A,C,T,F,w,6,c[52]),F=i(F,A,C,T,l,10,c[53]),T=i(T,F,A,C,m,15,c[54]),C=i(C,T,F,A,u,21,c[55]),A=i(A,C,T,F,v,6,c[56]),F=i(F,A,C,T,x,10,c[57]),T=i(T,F,A,C,p,15,c[58]),C=i(C,T,F,A,S,21,c[59]),A=i(A,C,T,F,f,6,c[60]),F=i(F,A,C,T,b,10,c[61]),T=i(T,F,A,C,h,15,c[62]),C=i(C,T,F,A,y,21,c[63]),o[0]=o[0]+A|0,o[1]=o[1]+C|0,o[2]=o[2]+T|0,o[3]=o[3]+F|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,r=0;4>r;r++)n[r]=16711935&((i=n[r])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)}(Math),La=(Va=(Ba=Ua).lib).WordArray,Ma=[],Va=Ba.algo.SHA1=(Ha=Va.Hasher).extend({_doReset:function(){this._hash=new La.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],u=0;80>u;u++){if(16>u)Ma[u]=0|t[e+u];else{var c=Ma[u-3]^Ma[u-8]^Ma[u-14]^Ma[u-16];Ma[u]=c<<1|c>>>31}c=(r<<5|r>>>27)+a+Ma[u],c=20>u?c+(1518500249+(i&s|~i&o)):40>u?c+(1859775393+(i^s^o)):60>u?c+((i&s|i&o|s&o)-1894007588):c+((i^s^o)-899497514),a=o,o=s,s=i<<30|i>>>2,i=r,r=c}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=Ha.clone.call(this);return t._hash=this._hash.clone(),t}}),Ba.SHA1=Ha._createHelper(Va),Ba.HmacSHA1=Ha._createHmacHelper(Va),function(t){for(var e=Ua,n=(i=e.lib).WordArray,r=i.Hasher,i=e.algo,s=[],o=[],a=function(t){return 4294967296*(t-(0|t))|0},u=2,c=0;64>c;){var h;t:{for(var l=t.sqrt(h=u),f=2;f<=l;f++)if(!(h%f)){h=!1;break t}h=!0}h&&(8>c&&(s[c]=a(t.pow(u,.5))),o[c]=a(t.pow(u,1/3)),c++),u++}var d=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],c=n[5],h=n[6],l=n[7],f=0;64>f;f++){if(16>f)d[f]=0|t[e+f];else{var p=d[f-15],g=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[f-16]}p=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&h)+o[f]+d[f],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),l=h,h=c,c=u,u=a+p|0,a=s,s=i,i=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+h|0,n[7]=n[7]+l|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA256=r._createHelper(i),e.HmacSHA256=r._createHmacHelper(i)}(Math),function(){var t=Ua,e=t.lib.WordArray,n=(r=t.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=n._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=n._createHelper(r),t.HmacSHA224=n._createHmacHelper(r)}(),function(){function t(){return r.create.apply(r,arguments)}for(var e=Ua,n=e.lib.Hasher,r=(s=e.x64).Word,i=s.WordArray,s=e.algo,o=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=t();s=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n,r=(n=this._hash.words)[0],i=n[1],s=n[2],u=n[3],c=n[4],h=n[5],l=n[6],f=r.high,d=r.low,p=i.high,g=i.low,v=s.high,y=s.low,m=u.high,b=u.low,w=c.high,S=c.low,E=h.high,x=h.low,A=l.high,F=l.low,T=(n=n[7]).high,C=n.low,k=f,I=d,O=p,R=g,D=v,N=y,_=m,P=b,j=w,B=S,L=E,H=x,M=A,V=F,U=T,q=C,K=0;80>K;K++){var z=a[K];if(16>K)var Q=z.high=0|t[e+2*K],W=z.low=0|t[e+2*K+1];else{Q=((W=(Q=a[K-15]).high)>>>1|($=Q.low)<<31)^(W>>>8|$<<24)^W>>>7;var $=($>>>1|W<<31)^($>>>8|W<<24)^($>>>7|W<<25),Y=((W=(Y=a[K-2]).high)>>>19|(G=Y.low)<<13)^(W<<3|G>>>29)^W>>>6,G=(G>>>19|W<<13)^(G<<3|W>>>29)^(G>>>6|W<<26);z.high=Q=(Q=(Q=Q+(J=(W=a[K-7]).high)+((W=$+W.low)>>>0<$>>>0?1:0))+Y+((W+=G)>>>0<G>>>0?1:0))+(nt=(X=a[K-16]).high)+((W+=X=X.low)>>>0<X>>>0?1:0),z.low=W}var J=j&L^~j&M,X=B&H^~B&V,Z=(z=k&O^k&D^O&D,I&R^I&N^R&N),tt=(G=o[K]).high,et=G.low,nt=U+((j>>>14|B<<18)^(j>>>18|B<<14)^(j<<23|B>>>9))+((G=q+((B>>>14|j<<18)^(B>>>18|j<<14)^(B<<23|j>>>9)))>>>0<q>>>0?1:0);U=M,q=V,M=L,V=H,L=j,H=B,j=_+(nt=(nt=(nt=nt+J+((G+=X)>>>0<X>>>0?1:0))+tt+((G+=et)>>>0<et>>>0?1:0))+Q+((G+=W)>>>0<W>>>0?1:0))+((B=P+G|0)>>>0<P>>>0?1:0)|0,_=D,P=N,D=O,N=R,O=k,R=I,k=nt+(z=($=(k>>>28|I<<4)^(k<<30|I>>>2)^(k<<25|I>>>7))+z+((W=(Y=(I>>>28|k<<4)^(I<<30|k>>>2)^(I<<25|k>>>7))+Z)>>>0<Y>>>0?1:0))+((I=G+W|0)>>>0<G>>>0?1:0)|0}d=r.low=d+I,r.high=f+k+(d>>>0<I>>>0?1:0),g=i.low=g+R,i.high=p+O+(g>>>0<R>>>0?1:0),y=s.low=y+N,s.high=v+D+(y>>>0<N>>>0?1:0),b=u.low=b+P,u.high=m+_+(b>>>0<P>>>0?1:0),S=c.low=S+B,c.high=w+j+(S>>>0<B>>>0?1:0),x=h.low=x+H,h.high=E+L+(x>>>0<H>>>0?1:0),F=l.low=F+V,l.high=A+M+(F>>>0<V>>>0?1:0),C=n.low=C+q,n.high=T+U+(C>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=n._createHelper(s),e.HmacSHA512=n._createHmacHelper(s)}(),function(){var t=Ua,e=(i=t.x64).Word,n=i.WordArray,r=(i=t.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=r._createHelper(i),t.HmacSHA384=r._createHmacHelper(i)}(),function(){var t=Ua,e=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,i=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=e.create([0,1518500249,1859775393,2400959708,2840853838]),c=e.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;16>n;n++)t[r=e+n]=16711935&((S=t[r])<<8|S>>>24)|4278255360&(S<<24|S>>>8);var r,h,l,f,d,p,g,v,y,m,b,w,S=u.words,E=c.words,x=i.words,A=s.words,F=o.words,T=a.words;for(g=h=(r=this._hash.words)[0],v=l=r[1],y=f=r[2],m=d=r[3],b=p=r[4],n=0;80>n;n+=1)w=h+t[e+x[n]]|0,w=16>n?w+((l^f^d)+S[0]):32>n?w+((l&f|~l&d)+S[1]):48>n?w+(((l|~f)^d)+S[2]):64>n?w+((l&d|f&~d)+S[3]):w+((l^(f|~d))+S[4]),w=(w=(w|=0)<<F[n]|w>>>32-F[n])+p|0,h=p,p=d,d=f<<10|f>>>22,f=l,l=w,w=g+t[e+A[n]]|0,w=16>n?w+((v^(y|~m))+E[0]):32>n?w+((v&m|y&~m)+E[1]):48>n?w+(((v|~y)^m)+E[2]):64>n?w+((v&y|~v&m)+E[3]):w+((v^y^m)+E[4]),w=(w=(w|=0)<<T[n]|w>>>32-T[n])+b|0,g=b,b=m,m=y<<10|y>>>22,y=v,v=w;w=r[1]+f+m|0,r[1]=r[2]+d+b|0,r[2]=r[3]+p+g|0,r[3]=r[4]+h+v|0,r[4]=r[0]+l+y|0,r[0]=w},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;for(e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,n=0;5>n;n++)e[n]=16711935&((r=e[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}}),t.RIPEMD160=n._createHelper(r),t.HmacRIPEMD160=n._createHmacHelper(r)}(),function(){var t=Ua.enc.Utf8;Ua.algo.HMAC=Ua.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,u=o.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=Ua,n=(t=e.lib).Base,r=t.WordArray,i=(t=e.algo).HMAC,s=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=i.create((h=this.cfg).hasher,t),s=r.create(),o=r.create([1]),a=s.words,u=o.words,c=h.keySize,h=h.iterations;a.length<c;){var l=n.update(e).finalize(o);n.reset();for(var f=l.words,d=f.length,p=l,g=1;g<h;g++){p=n.finalize(p),n.reset();for(var v=p.words,y=0;y<d;y++)f[y]^=v[y]}s.concat(l),u[0]++}return s.sigBytes=4*c,s}});e.PBKDF2=function(t,e,n){return s.create(n).compute(t,e)}}();var qa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ka="=";function za(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=qa.charAt(n>>6)+qa.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=qa.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=qa.charAt(n>>2)+qa.charAt((3&n)<<4));(3&r.length)>0;)r+=Ka;return r}function Qa(t){var e,n,r,i="",s=0;for(e=0;e<t.length&&t.charAt(e)!=Ka;++e)(r=qa.indexOf(t.charAt(e)))<0||(0==s?(i+=tu(r>>2),n=3&r,s=1):1==s?(i+=tu(n<<2|r>>4),n=15&r,s=2):2==s?(i+=tu(n),i+=tu(r>>2),n=3&r,s=3):(i+=tu(n<<2|r>>4),i+=tu(15&r),s=0));return 1==s&&(i+=tu(n<<2)),i}function Wa(t){var e,n=Qa(t),r=new Array;for(e=0;2*e<n.length;++e)r[e]=parseInt(n.substring(2*e,2*e+2),16);return r}function $a(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):this.fromString(t,null==e&&"string"!=typeof t?256:e))}function Ya(){return new $a(null)}$a.prototype.am=function(t,e,n,r,i,s){for(;--s>=0;){var o=e*this[t++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},$a.prototype.DB=26,$a.prototype.DM=67108863,$a.prototype.DV=1<<26,$a.prototype.FV=Math.pow(2,52),$a.prototype.F1=26,$a.prototype.F2=0;var Ga,Ja,Xa="0123456789abcdefghijklmnopqrstuvwxyz",Za=new Array;for(Ga="0".charCodeAt(0),Ja=0;Ja<=9;++Ja)Za[Ga++]=Ja;for(Ga="a".charCodeAt(0),Ja=10;Ja<36;++Ja)Za[Ga++]=Ja;for(Ga="A".charCodeAt(0),Ja=10;Ja<36;++Ja)Za[Ga++]=Ja;function tu(t){return Xa.charAt(t)}function eu(t,e){var n=Za[t.charCodeAt(e)];return null==n?-1:n}function nu(t){var e=Ya();return e.fromInt(t),e}function ru(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function iu(t){this.m=t}function su(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function ou(t,e){return t&e}function au(t,e){return t|e}function uu(t,e){return t^e}function cu(t,e){return t&~e}function hu(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function lu(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function fu(){}function du(t){return t}function pu(t){this.r2=Ya(),this.q3=Ya(),$a.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}iu.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},iu.prototype.revert=function(t){return t},iu.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},iu.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},iu.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},su.prototype.convert=function(t){var e=Ya();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo($a.ZERO)>0&&this.m.subTo(e,e),e},su.prototype.revert=function(t){var e=Ya();return t.copyTo(e),this.reduce(e),e},su.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},su.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},su.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},$a.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},$a.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},$a.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,s=0;--r>=0;){var o=8==n?255&t[r]:eu(t,r);o<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&$a.ZERO.subTo(this,this)},$a.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},$a.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},$a.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},$a.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>i|a,a=(this[n]&s)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},$a.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,s=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&s)<<i,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&s)<<i),e.t=this.t-n,e.clamp()}},$a.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},$a.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&$a.ZERO.subTo(e,e)},$a.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},$a.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Ya());var s=Ya(),o=this.s,a=t.s,u=this.DB-ru(r[r.t-1]);u>0?(r.lShiftTo(u,s),i.lShiftTo(u,n)):(r.copyTo(s),i.copyTo(n));var c=s.t,h=s[c-1];if(0!=h){var l=h*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),f=this.FV/l,d=(1<<this.F1)/l,p=1<<this.F2,g=n.t,v=g-c,y=null==e?Ya():e;for(s.dlShiftTo(v,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),$a.ONE.dlShiftTo(c,y),y.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--v>=0;){var m=n[--g]==h?this.DM:Math.floor(n[g]*f+(n[g-1]+p)*d);if((n[g]+=s.am(0,m,n,v,0,c))<m)for(s.dlShiftTo(v,y),n.subTo(y,n);n[g]<--m;)n.subTo(y,n)}null!=e&&(n.drShiftTo(c,e),o!=a&&$a.ZERO.subTo(e,e)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&$a.ZERO.subTo(n,n)}}},$a.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},$a.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},$a.prototype.exp=function(t,e){if(t>4294967295||t<1)return $a.ONE;var n=Ya(),r=Ya(),i=e.convert(this),s=ru(t)-1;for(i.copyTo(n);--s>=0;)if(e.sqrTo(n,r),(t&1<<s)>0)e.mulTo(r,i,n);else{var o=n;n=r,r=o}return e.revert(n)},$a.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=tu(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=tu(n));return i?s:"0"},$a.prototype.negate=function(){var t=Ya();return $a.ZERO.subTo(this,t),t},$a.prototype.abs=function(){return this.s<0?this.negate():this},$a.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},$a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ru(this[this.t-1]^this.s&this.DM)},$a.prototype.mod=function(t){var e=Ya();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo($a.ZERO)>0&&t.subTo(e,e),e},$a.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new iu(e):new su(e),this.exp(t,n)},$a.ZERO=nu(0),$a.ONE=nu(1),fu.prototype.convert=du,fu.prototype.revert=du,fu.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},fu.prototype.sqrTo=function(t,e){t.squareTo(e)},pu.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ya();return t.copyTo(e),this.reduce(e),e},pu.prototype.revert=function(t){return t},pu.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},pu.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},pu.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var gu=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],vu=(1<<26)/gu[gu.length-1];function yu(){this.i=0,this.j=0,this.S=new Array}$a.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},$a.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=nu(n),i=Ya(),s=Ya(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(t).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(t)+o},$a.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,s=0,o=0,a=0;a<t.length;++a){var u=eu(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(o=e*o+u,++s>=n&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&$a.ZERO.subTo(this,this)},$a.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo($a.ONE.shiftLeft(t-1),au,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo($a.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},$a.prototype.bitwiseTo=function(t,e,n){var r,i,s=Math.min(t.t,this.t);for(r=0;r<s;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=s;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},$a.prototype.changeBit=function(t,e){var n=$a.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},$a.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},$a.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},$a.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},$a.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},$a.prototype.multiplyUpperTo=function(t,e,n){var r=n.t=this.t+t.t- --e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},$a.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},$a.prototype.millerRabin=function(t){var e=this.subtract($a.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>gu.length&&(t=gu.length);for(var i=Ya(),s=0;s<t;++s){i.fromInt(gu[Math.floor(Math.random()*gu.length)]);var o=i.modPow(r,this);if(0!=o.compareTo($a.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<n&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo($a.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},$a.prototype.clone=function(){var t=Ya();return this.copyTo(t),t},$a.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},$a.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},$a.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},$a.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},$a.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},$a.prototype.equals=function(t){return 0==this.compareTo(t)},$a.prototype.min=function(t){return this.compareTo(t)<0?this:t},$a.prototype.max=function(t){return this.compareTo(t)>0?this:t},$a.prototype.and=function(t){var e=Ya();return this.bitwiseTo(t,ou,e),e},$a.prototype.or=function(t){var e=Ya();return this.bitwiseTo(t,au,e),e},$a.prototype.xor=function(t){var e=Ya();return this.bitwiseTo(t,uu,e),e},$a.prototype.andNot=function(t){var e=Ya();return this.bitwiseTo(t,cu,e),e},$a.prototype.not=function(){for(var t=Ya(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},$a.prototype.shiftLeft=function(t){var e=Ya();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},$a.prototype.shiftRight=function(t){var e=Ya();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},$a.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+hu(this[t]);return this.s<0?this.t*this.DB:-1},$a.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=lu(this[n]^e);return t},$a.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},$a.prototype.setBit=function(t){return this.changeBit(t,au)},$a.prototype.clearBit=function(t){return this.changeBit(t,cu)},$a.prototype.flipBit=function(t){return this.changeBit(t,uu)},$a.prototype.add=function(t){var e=Ya();return this.addTo(t,e),e},$a.prototype.subtract=function(t){var e=Ya();return this.subTo(t,e),e},$a.prototype.multiply=function(t){var e=Ya();return this.multiplyTo(t,e),e},$a.prototype.divide=function(t){var e=Ya();return this.divRemTo(t,e,null),e},$a.prototype.remainder=function(t){var e=Ya();return this.divRemTo(t,null,e),e},$a.prototype.divideAndRemainder=function(t){var e=Ya(),n=Ya();return this.divRemTo(t,e,n),new Array(e,n)},$a.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),s=nu(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new iu(e):e.isEven()?new pu(e):new su(e);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=r.convert(this),n>1){var h=Ya();for(r.sqrTo(o[1],h);a<=c;)o[a]=Ya(),r.mulTo(h,o[a-2],o[a]),a+=2}var l,f,d=t.t-1,p=!0,g=Ya();for(i=ru(t[d])-1;d>=0;){for(i>=u?l=t[d]>>i-u&c:(l=(t[d]&(1<<i+1)-1)<<u-i,d>0&&(l|=t[d-1]>>this.DB+i-u)),a=n;0==(1&l);)l>>=1,--a;if((i-=a)<0&&(i+=this.DB,--d),p)o[l].copyTo(s),p=!1;else{for(;a>1;)r.sqrTo(s,g),r.sqrTo(g,s),a-=2;a>0?r.sqrTo(s,g):(f=s,s=g,g=f),r.mulTo(g,o[l],s)}for(;d>=0&&0==(t[d]&1<<i);)r.sqrTo(s,g),f=s,s=g,g=f,--i<0&&(i=this.DB-1,--d)}return r.revert(s)},$a.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return $a.ZERO;for(var n=t.clone(),r=this.clone(),i=nu(1),s=nu(0),o=nu(0),a=nu(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(o,i),s.subTo(a,s)):(r.subTo(n,r),e&&o.subTo(i,o),a.subTo(s,a))}return 0!=r.compareTo($a.ONE)?$a.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},$a.prototype.pow=function(t){return this.exp(t,new fu)},$a.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),n.rShiftTo(s,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},$a.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=gu[gu.length-1]){for(e=0;e<gu.length;++e)if(n[0]==gu[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<gu.length;){for(var r=gu[e],i=e+1;i<gu.length&&r<vu;)r*=gu[i++];for(r=n.modInt(r);e<i;)if(r%gu[e++]==0)return!1}return n.millerRabin(t)},$a.prototype.square=function(){var t=Ya();return this.squareTo(t),t},yu.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)r=this.S[e],this.S[e]=this.S[n=n+this.S[e]+t[e%t.length]&255],this.S[n]=r;this.i=0,this.j=0},yu.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var mu,bu,wu,Su=256;function Eu(){var t;t=(new Date).getTime(),bu[wu++]^=255&t,bu[wu++]^=t>>8&255,bu[wu++]^=t>>16&255,bu[wu++]^=t>>24&255,wu>=Su&&(wu-=Su)}if(null==bu){var xu;if(bu=new Array,wu=0,void 0!==_a&&void 0!==_a.msCrypto){var Au=_a.msCrypto;if(Au.getRandomValues){var Fu=new Uint8Array(32);for(Au.getRandomValues(Fu),xu=0;xu<32;++xu)bu[wu++]=Fu[xu]}}for(;wu<Su;)xu=Math.floor(65536*Math.random()),bu[wu++]=xu>>>8,bu[wu++]=255&xu;wu=0,Eu()}function Tu(){if(null==mu){for(Eu(),(mu=new yu).init(bu),wu=0;wu<bu.length;++wu)bu[wu]=0;wu=0}return mu.next()}function Cu(){}function ku(t,e){return new $a(t,e)}function Iu(t,e,n){for(var r="",i=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function Ou(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Ru(t,e,n){for(var r="",i=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function Du(t,e){this.x=e,this.q=t}function Nu(t,e,n,r){this.curve=t,this.x=e,this.y=n,this.z=null==r?$a.ONE:r,this.zinv=null}function _u(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new Nu(this,null,null)}Cu.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=Tu()},Ou.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},Ou.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=ku(t,16),this.e=parseInt(e,16)}},Ou.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var n=new Array,r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var s=new Cu,o=new Array;e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--e]=o[0]}return n[--e]=2,n[--e]=0,new $a(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},Ou.prototype.encryptOAEP=function(t,e,n){var r=function(t,e,n,r){var i=ju.crypto.MessageDigest,s=ju.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return Gu(s.hashHex(Ju(t),o))}),t.length+2*r+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*r-2;a+=1)u+="\0";var c=n("")+u+""+t,h=new Array(r);(new Cu).nextBytes(h);var l=Iu(h,c.length,n),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^l.charCodeAt(a);var d=Iu(f,h.length,n),p=[0];for(a=0;a<h.length;a+=1)p[a+1]=h[a]^d.charCodeAt(a);return new $a(p.concat(f))}(t,this.n.bitLength()+7>>3,e,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},Ou.prototype.type="RSA",Ou.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},Ou.prototype.setPrivate=function(t,e,n){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=n;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key";this.n=ku(t,16),this.e=parseInt(e,16),this.d=ku(n,16)}},Ou.prototype.setPrivateEx=function(t,e,n,r,i,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=ku(t,16),this.e=parseInt(e,16),this.d=ku(n,16),this.p=ku(r,16),this.q=ku(i,16),this.dmp1=ku(s,16),this.dmq1=ku(o,16),this.coeff=ku(a,16)},Ou.prototype.generate=function(t,e){var n=new Cu,r=t>>1;this.e=parseInt(e,16);for(var i=new $a(e,16);;){for(;this.p=new $a(t-r,1,n),0!=this.p.subtract($a.ONE).gcd(i).compareTo($a.ONE)||!this.p.isProbablePrime(10););for(;this.q=new $a(r,1,n),0!=this.q.subtract($a.ONE).gcd(i).compareTo($a.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract($a.ONE),a=this.q.subtract($a.ONE),u=o.multiply(a);if(0==u.gcd(i).compareTo($a.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(u),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},Ou.prototype.decrypt=function(t){var e=ku(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},Ou.prototype.decryptOAEP=function(t,e,n){var r=ku(t,16),i=this.doPrivate(r);return null==i?null:function(t,e,n,r){var i=ju.crypto.MessageDigest,s=ju.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(t){return Gu(s.hashHex(Ju(t),o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*r+2)throw"Cipher too short";var a,u=t.substr(1,r),c=t.substr(r+1),h=Ru(c,r,n),l=[];for(a=0;a<u.length;a+=1)l[a]=u.charCodeAt(a)^h.charCodeAt(a);var f=Ru(String.fromCharCode.apply(String,l),t.length-r,n),d=[];for(a=0;a<c.length;a+=1)d[a]=c.charCodeAt(a)^f.charCodeAt(a);if((d=String.fromCharCode.apply(String,d)).substr(0,r)!==n(""))throw"Hash mismatch";var p=(d=d.substr(r)).indexOf("");if((-1!=p?d.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return d.substr(p+1)}(i,this.n.bitLength()+7>>3,e,n)},Du.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},Du.prototype.toBigInteger=function(){return this.x},Du.prototype.negate=function(){return new Du(this.q,this.x.negate().mod(this.q))},Du.prototype.add=function(t){return new Du(this.q,this.x.add(t.toBigInteger()).mod(this.q))},Du.prototype.subtract=function(t){return new Du(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},Du.prototype.multiply=function(t){return new Du(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},Du.prototype.square=function(){return new Du(this.q,this.x.square().mod(this.q))},Du.prototype.divide=function(t){return new Du(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},Nu.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Nu.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Nu.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals($a.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals($a.ZERO))},Nu.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals($a.ZERO)&&!this.y.toBigInteger().equals($a.ZERO)},Nu.prototype.negate=function(){return new Nu(this.curve,this.x,this.y.negate(),this.z)},Nu.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if($a.ZERO.equals(n))return $a.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new $a("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),a=o.multiply(n),u=i.multiply(o),c=e.square().multiply(this.z),h=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(n).mod(this.curve.q),l=u.multiply(r).multiply(e).subtract(s.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new Nu(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(l),f)},Nu.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new $a("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=e.square().multiply(t);$a.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=o.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new Nu(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},Nu.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new $a("3")),i=this.negate(),s=this;for(e=r.bitLength()-2;e>0;--e){s=s.twice();var o=r.testBit(e);o!=n.testBit(e)&&(s=s.add(o?this:i))}return s},Nu.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?i=n.testBit(r)?i.add(s):i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i},_u.prototype.getQ=function(){return this.q},_u.prototype.getA=function(){return this.a},_u.prototype.getB=function(){return this.b},_u.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},_u.prototype.getInfinity=function(){return this.infinity},_u.prototype.fromBigInteger=function(t){return new Du(this.q,t)},_u.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),r=t.substr(e+2,e);return new Nu(this,this.fromBigInteger(new $a(n,16)),this.fromBigInteger(new $a(r,16)));default:return null}},Du.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Nu.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=e(n,32);return t?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(r,32))),i},Nu.decodeFrom=function(t,e){var n=e.length-1,r=e.slice(1,1+n/2),i=e.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new $a(r),o=new $a(i);return new Nu(t,t.fromBigInteger(s),t.fromBigInteger(o))},Nu.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,r=e.substr(2,n/2),i=e.substr(2+n/2,n/2),s=new $a(r,16),o=new $a(i,16);return new Nu(t,t.fromBigInteger(s),t.fromBigInteger(o))},Nu.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y).divide(e),r=n.square().subtract(this.x).subtract(t.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new Nu(this.curve,r,i)},Nu.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger($a.valueOf(2)),e=this.curve.fromBigInteger($a.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new Nu(this.curve,r,i)},Nu.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new $a("3")),i=this.negate(),s=this;for(e=r.bitLength()-2;e>0;--e){s=s.twice();var o=r.testBit(e);o!=n.testBit(e)&&(s=s.add2D(o?this:i))}return s},Nu.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=e.multiply(e).mod(i),o=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(i);return s.equals(o)},Nu.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Nu.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo($a.ONE)<0||e.compareTo(t.subtract($a.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo($a.ONE)<0||n.compareTo(t.subtract($a.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var Pu=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,e,r){return e?n[e]:String.fromCharCode(parseInt(r,16))}var i=new String(""),s=Object.hasOwnProperty;return function(n,o){var a,u,c=n.match(t),h=c[0],l=!1;"{"===h?a={}:"["===h?a=[]:(a=[],l=!0);for(var f=[a],d=1-l,p=c.length;d<p;++d){var g;switch((h=c[d]).charCodeAt(0)){default:(g=f[0])[u||g.length]=+h,u=void 0;break;case 34:if(-1!==(h=h.substring(1,h.length-1)).indexOf("\\")&&(h=h.replace(e,r)),g=f[0],!u){if(!(g instanceof Array)){u=h||i;break}u=g.length}g[u]=h,u=void 0;break;case 91:f.unshift((g=f[0])[u||g.length]=[]),u=void 0;break;case 93:f.shift();break;case 102:(g=f[0])[u||g.length]=!1,u=void 0;break;case 110:(g=f[0])[u||g.length]=null,u=void 0;break;case 116:(g=f[0])[u||g.length]=!0,u=void 0;break;case 123:f.unshift((g=f[0])[u||g.length]={}),u=void 0;break;case 125:f.shift()}}if(l){if(1!==f.length)throw new Error;a=a[0]}else if(f.length)throw new Error;if(o){var v=function(t,e){var n=t[e];if(n&&"object"==typeof n){var r=null;for(var i in n)if(s.call(n,i)&&n!==t){var a=v(n,i);void 0!==a?n[i]=a:(r||(r=[]),r.push(i))}if(r)for(var u=r.length;--u>=0;)delete n[r[u]]}return o.call(t,e,n)};a=v({"":a},"")}return a}}();void 0!==ju&&ju||(ju={}),void 0!==ju.asn1&&ju.asn1||(ju.asn1={}),ju.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";e=new $a(r,16).xor(t).add($a.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return ec(t,e)},this.newObject=function(t){var e=ju.asn1,n=e.DERBoolean,r=e.DERInteger,i=e.DERBitString,s=e.DEROctetString,o=e.DERNull,a=e.DERObjectIdentifier,u=e.DEREnumerated,c=e.DERUTF8String,h=e.DERNumericString,l=e.DERPrintableString,f=e.DERTeletexString,d=e.DERIA5String,p=e.DERUTCTime,g=e.DERGeneralizedTime,v=e.DERSequence,y=e.DERSet,m=e.DERTaggedObject,b=e.ASN1Util.newObject,w=Object.keys(t);if(1!=w.length)throw"key of param shall be only one.";var S=w[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+S+":"))throw"undefined key: "+S;if("bool"==S)return new n(t[S]);if("int"==S)return new r(t[S]);if("bitstr"==S)return new i(t[S]);if("octstr"==S)return new s(t[S]);if("null"==S)return new o(t[S]);if("oid"==S)return new a(t[S]);if("enum"==S)return new u(t[S]);if("utf8str"==S)return new c(t[S]);if("numstr"==S)return new h(t[S]);if("prnstr"==S)return new l(t[S]);if("telstr"==S)return new f(t[S]);if("ia5str"==S)return new d(t[S]);if("utctime"==S)return new p(t[S]);if("gentime"==S)return new g(t[S]);if("seq"==S){for(var E=t[S],x=[],A=0;A<E.length;A++){var F=b(E[A]);x.push(F)}return new v({array:x})}if("set"==S){for(E=t[S],x=[],A=0;A<E.length;A++)F=b(E[A]),x.push(F);return new y({array:x})}if("tag"==S){var T=t[S];if("[object Array]"===Object.prototype.toString.call(T)&&3==T.length){var C=b(T[2]);return new m({tag:T[0],explicit:T[1],obj:C})}var k={};if(void 0!==T.explicit&&(k.explicit=T.explicit),void 0!==T.tag&&(k.tag=T.tag),void 0===T.obj)throw"obj shall be specified for 'tag'.";return k.obj=b(T.obj),new m(k)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},ju.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),i=2;i<t.length;i+=2){var s=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(e=e+"."+new $a(r,2).toString(10),r="")}return e},ju.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new $a(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},ju.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+n).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},ju.asn1.DERAbstractString=function(t){ju.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=$u(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},Pa.lang.extend(ju.asn1.DERAbstractString,ju.asn1.ASN1Object),ju.asn1.DERAbstractTime=function(){ju.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,n){var r=this.zeroPadding,i=this.localDateToUTC(t),s=String(i.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var u=r(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=qu(t)},this.setByDateValue=function(t,e,n,r,i,s){var o=new Date(Date.UTC(t,e-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},Pa.lang.extend(ju.asn1.DERAbstractTime,ju.asn1.ASN1Object),ju.asn1.DERAbstractStructured=function(t){ju.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},Pa.lang.extend(ju.asn1.DERAbstractStructured,ju.asn1.ASN1Object),ju.asn1.DERBoolean=function(){ju.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},Pa.lang.extend(ju.asn1.DERBoolean,ju.asn1.ASN1Object),ju.asn1.DERInteger=function(t){ju.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ju.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new $a(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},Pa.lang.extend(ju.asn1.DERInteger,ju.asn1.ASN1Object),ju.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ju.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}ju.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";var r="";for(n=0;n<t.length-1;n+=8){var i=t.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)e+=1==t[n]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},Pa.lang.extend(ju.asn1.DERBitString,ju.asn1.ASN1Object),ju.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ju.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}ju.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},Pa.lang.extend(ju.asn1.DEROctetString,ju.asn1.DERAbstractString),ju.asn1.DERNull=function(){ju.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Pa.lang.extend(ju.asn1.DERNull,ju.asn1.ASN1Object),ju.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new $a(t,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};ju.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=ju.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},Pa.lang.extend(ju.asn1.DERObjectIdentifier,ju.asn1.ASN1Object),ju.asn1.DEREnumerated=function(t){ju.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ju.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new $a(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},Pa.lang.extend(ju.asn1.DEREnumerated,ju.asn1.ASN1Object),ju.asn1.DERUTF8String=function(t){ju.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},Pa.lang.extend(ju.asn1.DERUTF8String,ju.asn1.DERAbstractString),ju.asn1.DERNumericString=function(t){ju.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},Pa.lang.extend(ju.asn1.DERNumericString,ju.asn1.DERAbstractString),ju.asn1.DERPrintableString=function(t){ju.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},Pa.lang.extend(ju.asn1.DERPrintableString,ju.asn1.DERAbstractString),ju.asn1.DERTeletexString=function(t){ju.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},Pa.lang.extend(ju.asn1.DERTeletexString,ju.asn1.DERAbstractString),ju.asn1.DERIA5String=function(t){ju.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},Pa.lang.extend(ju.asn1.DERIA5String,ju.asn1.DERAbstractString),ju.asn1.DERUTCTime=function(t){ju.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=qu(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=qu(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},Pa.lang.extend(ju.asn1.DERUTCTime,ju.asn1.DERAbstractTime),ju.asn1.DERGeneralizedTime=function(t){ju.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=qu(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=qu(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},Pa.lang.extend(ju.asn1.DERGeneralizedTime,ju.asn1.DERAbstractTime),ju.asn1.DERSequence=function(t){ju.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},Pa.lang.extend(ju.asn1.DERSequence,ju.asn1.DERAbstractStructured),ju.asn1.DERSet=function(t){ju.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++)t.push(this.asn1Array[e].getEncodedHex());return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},Pa.lang.extend(ju.asn1.DERSet,ju.asn1.DERAbstractStructured),ju.asn1.DERTaggedObject=function(t){ju.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},Pa.lang.extend(ju.asn1.DERTaggedObject,ju.asn1.ASN1Object);var ju,Bu,Lu,Hu=new function(){};function Mu(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function Vu(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function Uu(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function qu(t){return Uu(Mu(t))}function Ku(t){return(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function zu(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function Qu(t){return t.length%2==1&&(t="0"+t),Ku(za(t))}function Wu(t){return Qa(zu(t))}function $u(t){return sc(hc(t))}function Yu(t){return decodeURIComponent(oc(t))}function Gu(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function Ju(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function Xu(t){return za(t)}function Zu(t){var e=Xu(t).replace(/(.{64})/g,"$1\r\n");return e.replace(/\r\n$/,"")}function tc(t){return Qa(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function ec(t,e){return"-----BEGIN "+e+"-----\r\n"+Zu(t)+"\r\n-----END "+e+"-----\r\n"}function nc(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return tc(t=void 0!==e?(t=t.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function rc(t){var e,n,r,i,s,o,a,u,c,h,l;if(l=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=l[1],e=parseInt(u),2===u.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),n=parseInt(l[2])-1,r=parseInt(l[3]),i=parseInt(l[4]),s=parseInt(l[5]),o=parseInt(l[6]),a=0,""!==(c=l[7])&&(h=(c.substr(1)+"00").substr(0,3),a=parseInt(h)),Date.UTC(e,n,r,i,s,o,a);throw"unsupported zulu format: "+t}function ic(t){return~~(rc(t)/1e3)}function sc(t){return t.replace(/%/g,"")}function oc(t){return t.replace(/(..)/g,"%$1")}function ac(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var n=(t=t.toLowerCase()).split(":").length-1;if(n<2)throw e;var r=":".repeat(7-n+2),i=(t=t.replace("::",r)).split(":");if(8!=i.length)throw e;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function uc(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)e[n]=e[n].replace(/^0+/,""),""==e[n]&&(e[n]="0");var r=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===r)return t.slice(1,-1);var i="";for(n=0;n<r.length;n++)r[n].length>i.length&&(i=r[n]);return(t=t.replace(i,"::")).slice(1,-1)}function cc(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?uc(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(t){throw e}}function hc(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)"%"==e[r]?(n+=e.substr(r,3),r+=2):n=n+"%"+qu(e[r]);return n}function lc(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function fc(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map(function(t){var e=parseInt(t);if(e<0||255<e)throw"integer not in range 0-255";return("00"+e.toString(16)).slice(-2)}).join("")}catch(t){throw"malformed integer array string: "+t}}Hu.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var n=parseInt(t.substr(e+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},Hu.getL=function(t,e){var n=Hu.getLblen(t,e);return n<1?"":t.substr(e+2,2*n)},Hu.getVblen=function(t,e){var n;return""==(n=Hu.getL(t,e))?-1:("8"===n.substr(0,1)?new $a(n.substr(2),16):new $a(n,16)).intValue()},Hu.getVidx=function(t,e){var n=Hu.getLblen(t,e);return n<0?n:e+2*(n+1)},Hu.getV=function(t,e){var n=Hu.getVidx(t,e),r=Hu.getVblen(t,e);return t.substr(n,2*r)},Hu.getTLV=function(t,e){return t.substr(e,2)+Hu.getL(t,e)+Hu.getV(t,e)},Hu.getNextSiblingIdx=function(t,e){return Hu.getVidx(t,e)+2*Hu.getVblen(t,e)},Hu.getChildIdx=function(t,e){var n=Hu,r=new Array,i=n.getVidx(t,e);"03"==t.substr(e,2)?r.push(i+2):r.push(i);for(var s=n.getVblen(t,e),o=i,a=0;;){var u=n.getNextSiblingIdx(t,o);if(null==u||u-i>=2*s)break;if(a>=200)break;r.push(u),o=u,a++}return r},Hu.getNthChildIdx=function(t,e,n){return Hu.getChildIdx(t,e)[n]},Hu.getIdxbyList=function(t,e,n,r){var i,s,o=Hu;if(0==n.length){if(void 0!==r&&t.substr(e,2)!==r)throw"checking tag doesn't match: "+t.substr(e,2)+"!="+r;return e}return i=n.shift(),s=o.getChildIdx(t,e),o.getIdxbyList(t,s[i],n,r)},Hu.getTLVbyList=function(t,e,n,r){var i=Hu,s=i.getIdxbyList(t,e,n);if(void 0===s)throw"can't find nthList object";if(void 0!==r&&t.substr(s,2)!=r)throw"checking tag doesn't match: "+t.substr(s,2)+"!="+r;return i.getTLV(t,s)},Hu.getVbyList=function(t,e,n,r,i){var s,o,a=Hu;if(void 0===(s=a.getIdxbyList(t,e,n,r)))throw"can't find nthList object";return o=a.getV(t,s),!0===i&&(o=o.substr(2)),o},Hu.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],r=t.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=t.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=e((127&o[a]).toString(2),7):(c+=e((127&o[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var h=n.join(".");return u.length>0&&(h=h+"."+u.join(".")),h},Hu.dump=function(t,e,n,r){var i=Hu,s=i.getV,o=i.dump,a=i.getChildIdx,u=t;t instanceof ju.asn1.ASN1Object&&(u=t.getEncodedHex());var c=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var h=e.ommit_long_octet;if("01"==u.substr(n,2))return"00"==(l=s(u,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==u.substr(n,2))return r+"INTEGER "+c(l=s(u,n),h)+"\n";if("03"==u.substr(n,2))return r+"BITSTRING "+c(l=s(u,n),h)+"\n";if("04"==u.substr(n,2)){var l=s(u,n);return i.isASN1HEX(l)?(E=r+"OCTETSTRING, encapsulates\n")+o(l,e,0,r+"  "):r+"OCTETSTRING "+c(l,h)+"\n"}if("05"==u.substr(n,2))return r+"NULL\n";if("06"==u.substr(n,2)){var f=s(u,n),d=ju.asn1.ASN1Util.oidHexToInt(f),p=ju.asn1.x509.OID.oid2name(d),g=d.replace(/\./g," ");return""!=p?r+"ObjectIdentifier "+p+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0c"==u.substr(n,2))return r+"UTF8String '"+Yu(s(u,n))+"'\n";if("13"==u.substr(n,2))return r+"PrintableString '"+Yu(s(u,n))+"'\n";if("14"==u.substr(n,2))return r+"TeletexString '"+Yu(s(u,n))+"'\n";if("16"==u.substr(n,2))return r+"IA5String '"+Yu(s(u,n))+"'\n";if("17"==u.substr(n,2))return r+"UTCTime "+Yu(s(u,n))+"\n";if("18"==u.substr(n,2))return r+"GeneralizedTime "+Yu(s(u,n))+"\n";if("30"==u.substr(n,2)){if("3000"==u.substr(n,4))return r+"SEQUENCE {}\n";E=r+"SEQUENCE\n";var v=e;if((2==(b=a(u,n)).length||3==b.length)&&"06"==u.substr(b[0],2)&&"04"==u.substr(b[b.length-1],2)){p=i.oidname(s(u,b[0]));var y=JSON.parse(JSON.stringify(e));y.x509ExtName=p,v=y}for(var m=0;m<b.length;m++)E+=o(u,v,b[m],r+"  ");return E}if("31"==u.substr(n,2)){E=r+"SET\n";var b=a(u,n);for(m=0;m<b.length;m++)E+=o(u,e,b[m],r+"  ");return E}var w=parseInt(u.substr(n,2),16);if(0!=(128&w)){var S=31&w;if(0!=(32&w)){var E=r+"["+S+"]\n";for(b=a(u,n),m=0;m<b.length;m++)E+=o(u,e,b[m],r+"  ");return E}return"68747470"==(l=s(u,n)).substr(0,8)&&(l=Yu(l)),"subjectAltName"===e.x509ExtName&&2==S&&(l=Yu(l)),r+"["+S+"] "+l+"\n"}return r+"UNKNOWN("+u.substr(n,2)+") "+s(u,n)+"\n"},Hu.isASN1HEX=function(t){var e=Hu;if(t.length%2==1)return!1;var n=e.getVblen(t,0),r=t.substr(0,2),i=e.getL(t,0);return t.length-r.length-i.length==2*n},Hu.oidname=function(t){var e=ju.asn1;ju.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var n=e.x509.OID.oid2name(t);return""===n&&(n=t),n},void 0!==ju&&ju||(ju={}),void 0!==ju.asn1&&ju.asn1||(ju.asn1={}),void 0!==ju.asn1.x509&&ju.asn1.x509||(ju.asn1.x509={}),ju.asn1.x509.Certificate=function(t){ju.asn1.x509.Certificate.superclass.constructor.call(this);var e=ju.asn1,n=e.DERSequence,r=e.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new ju.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new r({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+Zu(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},Pa.lang.extend(ju.asn1.x509.Certificate,ju.asn1.ASN1Object),ju.asn1.x509.TBSCertificate=function(){ju.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=ju.asn1,e=t.DERSequence,n=t.DERInteger,r=t.DERTaggedObject,i=t.x509,s=i.Time,o=i.X500Name,a=i.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new r({obj:new n({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new n(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new i.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new o(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new s(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new s(t)},this.setSubjectByParam=function(t){this.asn1Subject=new o(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new a(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=dc.getKey(t);this.asn1SubjPKey=new a(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){ju.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new e({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var n=new e({array:this.extensionsArray}),i=new r({explicit:!0,tag:"a3",obj:n});this.asn1Array.push(i)}var s=new e({array:this.asn1Array});return this.hTLV=s.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},Pa.lang.extend(ju.asn1.x509.TBSCertificate,ju.asn1.ASN1Object),ju.asn1.x509.Extension=function(t){ju.asn1.x509.Extension.superclass.constructor.call(this);var e=ju.asn1,n=e.DERObjectIdentifier,r=e.DEROctetString,i=e.DERBoolean,s=e.DERSequence;this.getEncodedHex=function(){var t=new n({oid:this.oid}),e=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new i),o.push(e),new s({array:o}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},Pa.lang.extend(ju.asn1.x509.Extension,ju.asn1.ASN1Object),ju.asn1.x509.Extension.appendByNameToArray=function(t,e,n){var r=t.toLowerCase(),i=ju.asn1.x509;if("basicconstraints"==r){var s=new i.BasicConstraints(e);n.push(s)}else if("keyusage"==r)s=new i.KeyUsage(e),n.push(s);else if("crldistributionpoints"==r)s=new i.CRLDistributionPoints(e),n.push(s);else if("extkeyusage"==r)s=new i.ExtKeyUsage(e),n.push(s);else if("authoritykeyidentifier"==r)s=new i.AuthorityKeyIdentifier(e),n.push(s);else if("authorityinfoaccess"==r)s=new i.AuthorityInfoAccess(e),n.push(s);else if("subjectaltname"==r)s=new i.SubjectAltName(e),n.push(s);else{if("issueraltname"!=r)throw"unsupported extension name: "+t;s=new i.IssuerAltName(e),n.push(s)}},ju.asn1.x509.KeyUsage=function(t){ju.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=mc.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new ju.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var n=t.names,r="000000000",i=0;i<n.length;i++)for(var s=0;s<e.length;s++)n[i]===e[s]&&(r=r.substring(0,s)+"1"+r.substring(s+1,r.length));this.asn1ExtnValue=new ju.asn1.DERBitString({bin:r})}},Pa.lang.extend(ju.asn1.x509.KeyUsage,ju.asn1.x509.Extension),ju.asn1.x509.BasicConstraints=function(t){ju.asn1.x509.BasicConstraints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new ju.asn1.DERBoolean),this.pathLen>-1&&t.push(new ju.asn1.DERInteger({int:this.pathLen}));var e=new ju.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},Pa.lang.extend(ju.asn1.x509.BasicConstraints,ju.asn1.x509.Extension),ju.asn1.x509.CRLDistributionPoints=function(t){ju.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=ju.asn1,n=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new e.DERSequence({array:t})},this.setByOneURI=function(t){var e=new n.GeneralNames([{uri:t}]),r=new n.DistributionPointName(e),i=new n.DistributionPoint({dpobj:r});this.setByDPArray([i])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},Pa.lang.extend(ju.asn1.x509.CRLDistributionPoints,ju.asn1.x509.Extension),ju.asn1.x509.ExtKeyUsage=function(t){ju.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=ju.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var n=0;n<t.length;n++){var r=new e.DERObjectIdentifier(t[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},Pa.lang.extend(ju.asn1.x509.ExtKeyUsage,ju.asn1.x509.Extension),ju.asn1.x509.AuthorityKeyIdentifier=function(t){ju.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=ju.asn1,n=e.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var r=new e.DERSequence({array:t});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new ju.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new ju.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new ju.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},Pa.lang.extend(ju.asn1.x509.AuthorityKeyIdentifier,ju.asn1.x509.Extension),ju.asn1.x509.AuthorityInfoAccess=function(t){ju.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=ju.asn1,r=n.DERSequence,i=0;i<t.length;i++){var s=new r({array:[new n.DERObjectIdentifier(t[i].accessMethod),new n.x509.GeneralName(t[i].accessLocation)]});e.push(s)}this.asn1ExtnValue=new r({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},Pa.lang.extend(ju.asn1.x509.AuthorityInfoAccess,ju.asn1.x509.Extension),ju.asn1.x509.SubjectAltName=function(t){ju.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ju.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},Pa.lang.extend(ju.asn1.x509.SubjectAltName,ju.asn1.x509.Extension),ju.asn1.x509.IssuerAltName=function(t){ju.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ju.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},Pa.lang.extend(ju.asn1.x509.IssuerAltName,ju.asn1.x509.Extension),ju.asn1.x509.CRL=function(t){ju.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new ju.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new ju.asn1.DERBitString({hex:"00"+this.hexSig});var t=new ju.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+Zu(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},Pa.lang.extend(ju.asn1.x509.CRL,ju.asn1.ASN1Object),ju.asn1.x509.TBSCertList=function(){ju.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=ju.asn1,e=t.DERSequence,n=t.x509,r=n.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new n.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new n.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new r(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new r(t)},this.addRevokedCert=function(t,e){var r={};null!=t&&null!=t&&(r.sn=t),null!=e&&null!=e&&(r.time=e);var i=new n.CRLEntry(r);this.aRevokedCert.push(i)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new e({array:this.aRevokedCert});this.asn1Array.push(t)}var n=new e({array:this.asn1Array});return this.hTLV=n.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},Pa.lang.extend(ju.asn1.x509.TBSCertList,ju.asn1.ASN1Object),ju.asn1.x509.CRLEntry=function(t){ju.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=ju.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},Pa.lang.extend(ju.asn1.x509.CRLEntry,ju.asn1.ASN1Object),ju.asn1.x509.X500Name=function(t){ju.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var e,n=ju.asn1,r=n.x509,i=nc;(this.setByString=function(t){var e=t.split("/");e.shift();for(var n=[],i=0;i<e.length;i++)if(e[i].match(/^[^=]+=.+$/))n.push(e[i]);else{var s=n.length-1;n[s]=n[s]+"/"+e[i]}for(i=0;i<n.length;i++)this.asn1Array.push(new r.RDN({str:n[i]}))},this.setByLdapString=function(t){var e=r.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=new ju.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new n.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t)&&(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer&&((e=new mc).hex=i(t.certissuer),this.hTLV=e.getIssuerHex()),void 0!==t.certsubject&&((e=new mc).hex=i(t.certsubject),this.hTLV=e.getSubjectHex()))},Pa.lang.extend(ju.asn1.x509.X500Name,ju.asn1.ASN1Object),ju.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map(function(t){return t.replace(/,/,"\\,")})).join(",")},ju.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}return(r=r.map(function(t){return t.replace("/","\\/")})).reverse(),"/"+r.join("/")},ju.asn1.x509.RDN=function(t){ju.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new ju.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=ju.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.getEncodedHex=function(){var t=new ju.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},Pa.lang.extend(ju.asn1.x509.RDN,ju.asn1.ASN1Object),ju.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(!0===n){var o=(r.pop()+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}var a=!1,u=[];for(i=0;r.length>0;i++){if(s=r.shift(),!0===a){var c=u.pop();s.match(/"$/)?(o=(c+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2"),u.push(o),a=!1):u.push(c+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},ju.asn1.x509.AttributeTypeAndValue=function(t){ju.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var e=ju.asn1;this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=ju.asn1.x509.OID.atype2obj(t);var n="utf8";"C"==t&&(n="prn"),this.valueObj=this.getValueObj(n,e)},this.getValueObj=function(t,n){if("utf8"==t)return new e.DERUTF8String({str:n});if("prn"==t)return new e.DERPrintableString({str:n});if("tel"==t)return new e.DERTeletexString({str:n});if("ia5"==t)return new e.DERIA5String({str:n});throw"unsupported directory string type: type="+t+" value="+n},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},Pa.lang.extend(ju.asn1.x509.AttributeTypeAndValue,ju.asn1.ASN1Object),ju.asn1.x509.SubjectPublicKeyInfo=function(t){ju.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=ju.asn1,n=e.DERInteger,r=e.DERBitString,i=e.DERObjectIdentifier,s=e.DERSequence,o=e.ASN1Util.newObject,a=e.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new s({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof Ou){var e=o({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new a({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+e})}}catch(t){}try{if(t instanceof ju.crypto.ECDSA){var s=new i({name:t.curveName});this.asn1AlgId=new a({name:"ecPublicKey",asn1params:s}),this.asn1SubjPKey=new r({hex:"00"+t.pubKeyHex})}}catch(t){}try{if(t instanceof ju.crypto.DSA){s=new o({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}),this.asn1AlgId=new a({name:"dsa",asn1params:s});var u=new n({bigint:t.y});this.asn1SubjPKey=new r({hex:"00"+u.getEncodedHex()})}}catch(t){}},void 0!==t&&this.setPubKey(t)},Pa.lang.extend(ju.asn1.x509.SubjectPublicKeyInfo,ju.asn1.ASN1Object),ju.asn1.x509.Time=function(t){ju.asn1.x509.Time.superclass.constructor.call(this);var e=ju.asn1,n=e.DERUTCTime,r=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},Pa.lang.extend(ju.asn1.x509.Time,ju.asn1.ASN1Object),ju.asn1.x509.AlgorithmIdentifier=function(t){ju.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=ju.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},Pa.lang.extend(ju.asn1.x509.AlgorithmIdentifier,ju.asn1.ASN1Object),ju.asn1.x509.GeneralName=function(t){ju.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=ju.asn1,r=n.DEROctetString,i=n.DERIA5String,s=n.DERTaggedObject,o=n.ASN1Object,a=n.x509.X500Name,u=nc;this.explicit=!1,this.setByParam=function(t){var n=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",n=new i({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",n=new i({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",n=new i({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",this.explicit=!0,n=new a({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",this.explicit=!0,n=new a({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var c=null;if((l=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=l.indexOf("-----BEGIN ")&&(c=u(l)),null==c)throw"certissuer param not cert";(f=new mc).hex=c;var h=f.getIssuerHex();(n=new o).hTLV=h}if(void 0!==t.certsubj){var l,f;if(this.type="dn",this.explicit=!0,c=null,(l=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=l.indexOf("-----BEGIN ")&&(c=u(l)),null==c)throw"certsubj param not cert";(f=new mc).hex=c,h=f.getSubjectHex(),(n=new o).hTLV=h}if(void 0!==t.ip){this.type="ip",this.explicit=!1;var d,p=t.ip,g="malformed IP address";if(p.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(d=fc("["+p.split(".").join(",")+"]")).length)throw g}else if(p.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))d=ac(p);else{if(!p.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw g;d=p}n=new r({hex:d})}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new s({explicit:this.explicit,tag:e[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},Pa.lang.extend(ju.asn1.x509.GeneralName,ju.asn1.ASN1Object),ju.asn1.x509.GeneralNames=function(t){ju.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=ju.asn1;this.setByParamArray=function(t){for(var n=0;n<t.length;n++){var r=new e.x509.GeneralName(t[n]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new e.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},Pa.lang.extend(ju.asn1.x509.GeneralNames,ju.asn1.ASN1Object),ju.asn1.x509.DistributionPointName=function(t){ju.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=ju.asn1,n=e.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!e.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},Pa.lang.extend(ju.asn1.x509.DistributionPointName,ju.asn1.ASN1Object),ju.asn1.x509.DistributionPoint=function(t){ju.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=ju.asn1;this.getEncodedHex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var n=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(n)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},Pa.lang.extend(ju.asn1.x509.DistributionPoint,ju.asn1.ASN1Object),ju.asn1.x509.OID=new function(){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=new ju.asn1.DERObjectIdentifier({oid:this.name2oidList[t]});return this.objCache[t]=e,e},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=new ju.asn1.DERObjectIdentifier({oid:this.atype2oidList[t]});return this.objCache[t]=e,e}},ju.asn1.x509.OID.oid2name=function(t){var e=ju.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},ju.asn1.x509.OID.oid2atype=function(t){var e=ju.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},ju.asn1.x509.OID.name2oid=function(t){var e=ju.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},ju.asn1.x509.X509Util={},ju.asn1.x509.X509Util.newCertPEM=function(t){var e=ju.asn1.x509,n=e.Certificate,r=new(0,e.TBSCertificate);if(void 0===t.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(r.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var i=0;i<t.ext.length;i++)for(key in t.ext[i])r.appendExtensionByName(key,t.ext[i][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var s=null;return t.cakey&&(s=new n({tbscertobj:r,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:dc.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(s=new n({tbscertobj:r})).setSignatureHex(t.sighex),s.getPEMString()},void 0!==ju&&ju||(ju={}),void 0!==ju.asn1&&ju.asn1||(ju.asn1={}),void 0!==ju.asn1.cms&&ju.asn1.cms||(ju.asn1.cms={}),ju.asn1.cms.Attribute=function(){var t=ju.asn1;t.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var e,n,r;e=new t.DERObjectIdentifier({oid:this.attrTypeOid}),n=new t.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(t){throw"fail valueSet.getEncodedHex in Attribute(1)/"+t}r=new t.DERSequence({array:[e,n]});try{this.hTLV=r.getEncodedHex()}catch(t){throw"failed seq.getEncodedHex in Attribute(2)/"+t}return this.hTLV}},Pa.lang.extend(ju.asn1.cms.Attribute,ju.asn1.ASN1Object),ju.asn1.cms.ContentType=function(t){var e=ju.asn1;e.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==t&&(n=new e.DERObjectIdentifier(t),this.valueList=[n])},Pa.lang.extend(ju.asn1.cms.ContentType,ju.asn1.cms.Attribute),ju.asn1.cms.MessageDigest=function(t){var e,n=ju,r=n.asn1,i=r.DEROctetString,s=r.cms;s.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t&&(t.eciObj instanceof s.EncapsulatedContentInfo&&"string"==typeof t.hashAlg?((e=new i({hex:n.crypto.Util.hashHex(t.eciObj.eContentValueHex,t.hashAlg)})).getEncodedHex(),this.valueList=[e]):((e=new i(t)).getEncodedHex(),this.valueList=[e]))},Pa.lang.extend(ju.asn1.cms.MessageDigest,ju.asn1.cms.Attribute),ju.asn1.cms.SigningTime=function(t){var e=ju.asn1;if(e.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var n=new e.x509.Time(t);try{n.getEncodedHex()}catch(t){throw"SigningTime.getEncodedHex() failed/"+t}this.valueList=[n]}},Pa.lang.extend(ju.asn1.cms.SigningTime,ju.asn1.cms.Attribute),ju.asn1.cms.SigningCertificate=function(t){var e=ju,n=e.asn1,r=n.DERSequence,i=n.cms;i.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var s=[],o=0;o<t.length;o++){var a=nc(t[o]),u=e.crypto.Util.hashHex(a,"sha1"),c=new n.DEROctetString({hex:u});c.getEncodedHex();var h=new i.IssuerAndSerialNumber({cert:t[o]});h.getEncodedHex();var l=new r({array:[c,h]});l.getEncodedHex(),s.push(l)}var f=new r({array:s});f.getEncodedHex(),this.valueList=[f]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},Pa.lang.extend(ju.asn1.cms.SigningCertificate,ju.asn1.cms.Attribute),ju.asn1.cms.SigningCertificateV2=function(t){var e=ju.asn1,n=e.DERSequence,r=e.x509,i=e.cms,s=ju.crypto;if(i.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,o){for(var a=[],u=0;u<t.length;u++){var c=nc(t[u]),h=[];"sha256"!==o&&h.push(new r.AlgorithmIdentifier({name:o}));var l=s.Util.hashHex(c,o),f=new e.DEROctetString({hex:l});f.getEncodedHex(),h.push(f);var d=new i.IssuerAndSerialNumber({cert:t[u]});d.getEncodedHex(),h.push(d);var p=new n({array:h});p.getEncodedHex(),a.push(p)}var g=new n({array:a});g.getEncodedHex(),this.valueList=[g]},void 0!==t&&"object"==typeof t.array){var o="sha256";"string"==typeof t.hashAlg&&(o=t.hashAlg),this.setCerts(t.array,o)}},Pa.lang.extend(ju.asn1.cms.SigningCertificateV2,ju.asn1.cms.Attribute),ju.asn1.cms.IssuerAndSerialNumber=function(t){var e=ju.asn1,n=e.DERInteger,r=e.x509.X500Name,i=mc;e.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(t){var e=nc(t),s=new i;s.hex=e;var o=s.getIssuerHex();this.dIssuer=new r,this.dIssuer.hTLV=o;var a=s.getSerialNumberHex();this.dSerial=new n({hex:a})},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(this.dIssuer=t.issuer instanceof r?t.issuer:new r(t.issuer),this.dSerial=t.serial instanceof n?t.serial:new n(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},Pa.lang.extend(ju.asn1.cms.IssuerAndSerialNumber,ju.asn1.ASN1Object),ju.asn1.cms.AttributeList=function(t){var e=ju.asn1,n=e.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof n.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},Pa.lang.extend(ju.asn1.cms.AttributeList,ju.asn1.ASN1Object),ju.asn1.cms.SignerInfo=function(){var t=ju.asn1,e=t.DERTaggedObject,n=t.cms,r=n.AttributeList,i=n.ContentType,s=n.EncapsulatedContentInfo,o=n.MessageDigest,a=n.SignedData,u=t.x509.AlgorithmIdentifier,c=ju.crypto,h=dc;n.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new t.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new r,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new r,this.setSignerIdentifier=function(t){"string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")&&(this.dSignerIdentifier=new n.IssuerAndSerialNumber({cert:t}))},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof s&&(this.dSignedAttrs.add(new i({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new o({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof a&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new u({name:t.hashAlg})))},this.sign=function(e,n){this.dSigAlg=new u({name:n});var r=this.dSignedAttrs.getEncodedHex(),i=h.getKey(e),s=new c.Signature({alg:n});s.init(i),s.updateHex(r);var o=s.sign();this.dSig=new t.DEROctetString({hex:o})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof r&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var n=new e({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),i=null;this.dUnsignedAttrs.length()>0&&(i=new e({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var s=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,n,this.dSigAlg,this.dSig];null!=i&&s.push(i);var o=new t.DERSequence({array:s});return this.hTLV=o.getEncodedHex(),this.hTLV}},Pa.lang.extend(ju.asn1.cms.SignerInfo,ju.asn1.ASN1Object),ju.asn1.cms.EncapsulatedContentInfo=function(){var t=ju.asn1,e=t.DERTaggedObject,n=t.DERSequence,r=t.DERObjectIdentifier,i=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new r({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){this.dEContentType=t.match(/^[0-2][.][0-9.]+$/)?new r({oid:t}):new r({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=$u(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=$u(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new i({hex:this.eContentValueHex});this.dEContent=new e({obj:t,tag:"a0",explicit:!0});var r=[this.dEContentType];this.isDetached||r.push(this.dEContent);var s=new n({array:r});return this.hTLV=s.getEncodedHex(),this.hTLV}},Pa.lang.extend(ju.asn1.cms.EncapsulatedContentInfo,ju.asn1.ASN1Object),ju.asn1.cms.ContentInfo=function(t){var e=ju.asn1,n=e.DERTaggedObject,r=e.DERSequence,i=e.x509;ju.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=i.OID.name2obj(t))},this.getEncodedHex=function(){var t=new n({obj:this.dContent,tag:"a0",explicit:!0}),e=new r({array:[this.dContentType,t]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},Pa.lang.extend(ju.asn1.cms.ContentInfo,ju.asn1.ASN1Object),ju.asn1.cms.SignedData=function(){var t=ju.asn1,e=t.ASN1Object,n=t.DERInteger,r=t.DERSet,i=t.DERSequence,s=t.DERTaggedObject,o=t.cms,a=o.EncapsulatedContentInfo,u=o.SignerInfo,c=o.ContentInfo,h=t.x509.AlgorithmIdentifier;ju.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new n({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new a,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new u],this.addCertificatesByPEM=function(t){var n=nc(t),r=new e;r.hTLV=n,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],e=0;e<this.digestAlgNameList.length;e++){var n=new h({name:this.digestAlgNameList[e]});t.push(n)}this.dDigestAlgs=new r({array:t})}var o=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var a=new r({array:this.certificateList});this.dCerts=new s({obj:a,tag:"a0",explicit:!1})}null!=this.dCerts&&o.push(this.dCerts);var u=new r({array:this.signerInfoList});o.push(u);var c=new i({array:o});return this.hTLV=c.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new c({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return ec(this.getContentInfoEncodedHex(),"CMS")}},Pa.lang.extend(ju.asn1.cms.SignedData,ju.asn1.ASN1Object),ju.asn1.cms.CMSUtil=new function(){},ju.asn1.cms.CMSUtil.newSignedData=function(t){var e=ju.asn1,n=e.cms,r=n.SignerInfo,i=n.SigningTime,s=n.SigningCertificate,o=n.SigningCertificateV2,a=e.cades.SignaturePolicyIdentifier,u=new(0,n.SignedData);if(u.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var c=0;c<t.certs.length;c++)u.addCertificatesByPEM(t.certs[c]);for(u.signerInfoList=[],c=0;c<t.signerInfos.length;c++){var h=t.signerInfos[c],l=new r;for(attrName in l.setSignerIdentifier(h.signerCert),l.setForContentAndHash({sdObj:u,eciObj:u.dEncapContentInfo,hashAlg:h.hashAlg}),h.sAttr){var f=h.sAttr[attrName];if("SigningTime"==attrName){var d=new i(f);l.dSignedAttrs.add(d)}"SigningCertificate"==attrName&&(d=new s(f),l.dSignedAttrs.add(d)),"SigningCertificateV2"==attrName&&(d=new o(f),l.dSignedAttrs.add(d)),"SignaturePolicyIdentifier"==attrName&&(d=new a(f),l.dSignedAttrs.add(d))}l.sign(h.signerPrvKey,h.sigAlg),u.signerInfoList.push(l)}return u},ju.asn1.cms.CMSUtil.verifySignedData=function(t){var e=Hu.getVbyList,n=Hu.getTLVbyList,r=Hu.getIdxbyList,i=Hu.getChildIdx,s=Hu.getTLV,o=Hu.oidname,a=ju.crypto.Util.hashHex;void 0===t.cms&&(0,ju.lang.String.isHex)(t.cms);var u=t.cms,c=function(t,s){var a=s.idx;s.signerid_issuer1=n(t,a,[1,0],"30"),s.signerid_serial1=e(t,a,[1,1],"02"),s.hashalg=o(e(t,a,[2,0],"06"));var u=r(t,a,[3],"a0");s.idxSignedAttrs=u,h(t,s,u);var c=i(t,a).length;if(c<6)throw"malformed SignerInfo";s.sigalg=o(e(t,a,[c-2,0],"06")),s.sigval=e(t,a,[c-1],"04")},h=function(t,n,r){var s=i(t,r);n.signedAttrIdxList=s;for(var o=0;o<s.length;o++){var a,u=s[o],c=e(t,u,[0],"06");"2a864886f70d010905"===c?(a=Yu(e(t,u,[1,0])),n.saSigningTime=a):"2a864886f70d010904"===c&&(a=e(t,u,[1,0],"04"),n.saMessageDigest=a)}},l=function(t,e,n){n.verifyDetail={};var r=n.verifyDetail,o=e.parse.econtent,u=n.hashalg,c=n.saMessageDigest;r.validMessageDigest=!1,a(o,u)===c&&(r.validMessageDigest=!0),function(t,e,n){var r,o=e.parse.certsIdx;if(void 0===e.certs){r=[],e.certkeys=[];for(var a=i(t,o),u=0;u<a.length;u++){var c=s(t,a[u]),h=new mc;h.readCertHex(c),r[u]=h,e.certkeys[u]=h.getPublicKey()}e.certs=r}else r=e.certs;for(e.cccc=r.length,e.cccci=a.length,u=0;u<r.length;u++){var l=h.getIssuerHex(),f=h.getSerialNumberHex();n.signerid_issuer1===l&&n.signerid_serial1===f&&(n.certkey_idx=u)}}(t,e,n),r.validSignatureValue=!1;var h=n.sigalg,l="31"+s(t,n.idxSignedAttrs).substr(2);n.signedattrshex=l;var f=e.certs[n.certkey_idx].getPublicKey(),d=new ju.crypto.Signature({alg:h});d.init(f),d.updateHex(l);var p=d.verify(n.sigval);r.validSignatureValue_isValid=p,!0===p&&(r.validSignatureValue=!0),n.isValid=!1,r.validMessageDigest&&r.validSignatureValue&&(n.isValid=!0)},f={isValid:!1,parse:{}};return function(t,n){if("2a864886f70d010702"!==e(t,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=e(t,0,[1,0,2,1,0]),function(t,e){for(var n,i=3;i<6;i++)if(void 0!==(n=r(t,0,[1,0,i]))){var s=t.substr(n,2);"a0"===s&&(e.certsIdx=n),"a1"===s&&(e.revinfosIdx=n),"31"===s&&(e.signerinfosIdx=n)}}(t,n),n.signerInfos=[],function(t,e){var n=e.signerinfosIdx;if(void 0!==n){var r=i(t,n);e.signerInfoIdxList=r;for(var s=0;s<r.length;s++){var o={idx:r[s]};c(t,o),e.signerInfos.push(o)}}}(t,n)}(u,f.parse),function(t,e){for(var n=e.parse.signerInfos,r=n.length,i=!0,s=0;s<r;s++){var o=n[s];l(t,e,o),o.isValid||(i=!1)}e.isValid=i}(u,f),f},void 0!==ju&&ju||(ju={}),void 0!==ju.asn1&&ju.asn1||(ju.asn1={}),void 0!==ju.asn1.tsp&&ju.asn1.tsp||(ju.asn1.tsp={}),ju.asn1.tsp.Accuracy=function(t){var e=ju.asn1,n=e.DERInteger,r=e.DERSequence,i=e.DERTaggedObject;e.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,e=null,s=null,o=[];if(null!=this.seconds&&(t=new n({int:this.seconds}),o.push(t)),null!=this.millis){var a=new n({int:this.millis});e=new i({obj:a,tag:"80",explicit:!1}),o.push(e)}if(null!=this.micros){var u=new n({int:this.micros});s=new i({obj:u,tag:"81",explicit:!1}),o.push(s)}var c=new r({array:o});return this.hTLV=c.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},Pa.lang.extend(ju.asn1.tsp.Accuracy,ju.asn1.ASN1Object),ju.asn1.tsp.MessageImprint=function(t){var e=ju.asn1,n=e.DERSequence,r=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new i({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new r({hex:t.hashValue})))},Pa.lang.extend(ju.asn1.tsp.MessageImprint,ju.asn1.ASN1Object),ju.asn1.tsp.TimeStampReq=function(t){var e=ju.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERBoolean,s=e.DERObjectIdentifier,o=e.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof a?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new a(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new i);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new s(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new r(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},Pa.lang.extend(ju.asn1.tsp.TimeStampReq,ju.asn1.ASN1Object),ju.asn1.tsp.TSTInfo=function(t){var e=ju.asn1,n=e.DERSequence,r=e.DERInteger,i=e.DERBoolean,s=e.DERGeneralizedTime,o=e.DERObjectIdentifier,a=e.tsp,u=a.MessageImprint,c=a.Accuracy,h=e.x509.X500Name;if(a.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new u(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new r(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new s(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new c(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new i),void 0!==t.nonce&&(this.dNonce=new r(t.nonce)),void 0!==t.tsa&&(this.dTsa=new h(t.tsa))}},Pa.lang.extend(ju.asn1.tsp.TSTInfo,ju.asn1.ASN1Object),ju.asn1.tsp.TimeStampResp=function(t){var e=ju.asn1,n=e.DERSequence,r=e.ASN1Object,i=e.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new s(t.status)),void 0!==t.tst&&t.tst instanceof r&&(this.dTST=t.tst.getContentInfo()))},Pa.lang.extend(ju.asn1.tsp.TimeStampResp,ju.asn1.ASN1Object),ju.asn1.tsp.PKIStatusInfo=function(t){var e=ju.asn1,n=e.DERSequence,r=e.tsp,i=r.PKIStatus,s=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new i(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new s({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new o(t.failinfo)))},Pa.lang.extend(ju.asn1.tsp.PKIStatusInfo,ju.asn1.ASN1Object),ju.asn1.tsp.PKIStatus=function(t){var e=ju.asn1,n=e.DERInteger,r=e.tsp,i=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var s=i.valueList;if(void 0===s[t.name])throw"name undefined: "+t.name;this.dStatus=new n({int:s[t.name]})}else this.dStatus=new n(t)},Pa.lang.extend(ju.asn1.tsp.PKIStatus,ju.asn1.ASN1Object),ju.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},ju.asn1.tsp.PKIFreeText=function(t){var e=ju.asn1,n=e.DERSequence,r=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],e=0;e<this.textList.length;e++)t.push(new r({str:this.textList[e]}));var i=new n({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},Pa.lang.extend(ju.asn1.tsp.PKIFreeText,ju.asn1.ASN1Object),ju.asn1.tsp.PKIFailureInfo=function(t){var e=ju.asn1,n=e.DERBitString,r=e.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),e=new n;return e.setByBinaryString(t),this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var i=r.valueList;if(void 0===i[t.name])throw"name undefined: "+t.name;this.value=i[t.name]}else"number"==typeof t.int&&(this.value=t.int)},Pa.lang.extend(ju.asn1.tsp.PKIFailureInfo,ju.asn1.ASN1Object),ju.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},ju.asn1.tsp.AbstractTSAAdapter=function(){this.getTSTHex=function(){throw"not implemented yet"}},ju.asn1.tsp.SimpleTSAAdapter=function(t){var e=ju.asn1.tsp,n=ju.crypto.Util.hashHex;e.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,r){var i=n(t,r);this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},this.params.tstInfo.serialNumber={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:s},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},Pa.lang.extend(ju.asn1.tsp.SimpleTSAAdapter,ju.asn1.tsp.AbstractTSAAdapter),ju.asn1.tsp.FixedTSAAdapter=function(t){var e=ju.asn1.tsp,n=ju.crypto.Util.hashHex;e.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,r){var i=n(t,r);return this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},Pa.lang.extend(ju.asn1.tsp.FixedTSAAdapter,ju.asn1.tsp.AbstractTSAAdapter),ju.asn1.tsp.TSPUtil=new function(){},ju.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=ju.asn1,n=e.cms,r=e.tsp.TSTInfo,i=new n.SignedData,s=new r(t.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:s}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var o=0;o<t.certs.length;o++)i.addCertificatesByPEM(t.certs[o]);var a=i.signerInfoList[0];a.setSignerIdentifier(t.signerCert),a.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:t.hashAlg});var u=new n.SigningCertificate({array:[t.signerCert]});return a.dSignedAttrs.add(u),a.sign(t.signerPrvKey,t.sigAlg),i},ju.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=Hu,n=e.getV,r=e.getTLV,i={certreq:!1},s=(0,e.getChildIdx)(t,0);if(s.length<2)throw"TimeStampReq must have at least 2 items";var o=r(t,s[1]);i.mi=ju.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var a=2;a<s.length;a++){var u=s[a],c=t.substr(u,2);if("06"==c){var h=n(t,u);i.policy=e.hextooidstr(h)}"02"==c&&(i.nonce=n(t,u)),"01"==c&&(i.certreq=!0)}return i},ju.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=Hu,n=e.getChildIdx,r=e.getV,i=e.getIdxbyList,s={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";n(t,0);var o=r(t,i(t,0,[0,0])),a=e.hextooidstr(o),u=ju.asn1.x509.OID.oid2name(a);if(""==u)throw"hashAlg name undefined: "+a;var c=u,h=i(t,0,[1]);return s.hashAlg=c,s.hashValue=r(t,h),s},void 0!==ju&&ju||(ju={}),void 0!==ju.asn1&&ju.asn1||(ju.asn1={}),void 0!==ju.asn1.cades&&ju.asn1.cades||(ju.asn1.cades={}),ju.asn1.cades.SignaturePolicyIdentifier=function(t){var e=ju.asn1,n=e.DERObjectIdentifier,r=e.DERSequence,i=e.cades,s=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var o=new r({array:[new n({oid:t.oid}),new s(t.hash)]});this.valueList=[o]}},Pa.lang.extend(ju.asn1.cades.SignaturePolicyIdentifier,ju.asn1.cms.Attribute),ju.asn1.cades.OtherHashAlgAndValue=function(t){var e=ju.asn1,n=e.DERSequence,r=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new n({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new i({name:t.alg}),this.dHash=new r({hex:t.hash}))},Pa.lang.extend(ju.asn1.cades.OtherHashAlgAndValue,ju.asn1.ASN1Object),ju.asn1.cades.SignatureTimeStamp=function(t){var e=ju.asn1,n=e.ASN1Object;if(e.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var r=new n;this.tstHex=t.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(t.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},Pa.lang.extend(ju.asn1.cades.SignatureTimeStamp,ju.asn1.cms.Attribute),ju.asn1.cades.CompleteCertificateRefs=function(t){var e=ju.asn1.cades;e.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var n=0;n<t.length;n++){var r=new e.OtherCertID(t[n]);this.valueList.push(r)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},Pa.lang.extend(ju.asn1.cades.CompleteCertificateRefs,ju.asn1.cms.Attribute),ju.asn1.cades.OtherCertID=function(t){var e=ju.asn1,n=e.cms,r=e.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new r.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},Pa.lang.extend(ju.asn1.cades.OtherCertID,ju.asn1.ASN1Object),ju.asn1.cades.OtherHash=function(t){var e=ju.asn1,n=e.cades,r=n.OtherHashAlgAndValue,i=ju.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=nc(t),n=i(e,this.alg);this.dOtherHash=new r({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new e.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new r(t))},Pa.lang.extend(ju.asn1.cades.OtherHash,ju.asn1.ASN1Object),ju.asn1.cades.CAdESUtil=new function(){},ju.asn1.cades.CAdESUtil.addSigTS=function(){},ju.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=Hu.getChildIdx,n=Hu.getTLV,r=Hu.getIdxbyList,i=ju.asn1,s=i.ASN1Object,o=i.cms.SignedData,a=i.cades.CAdESUtil,u={};if("06092a864886f70d010702"!=(0,Hu.getTLVbyList)(t,0,[0]))throw"hex is not CMS SignedData";var c=e(t,r(t,0,[1,0]));if(c.length<4)throw"num of SignedData elem shall be 4 at least";var h=c.shift();u.version=n(t,h);var l=c.shift();u.algs=n(t,l);var f=c.shift();u.encapcontent=n(t,f),u.certs=null,u.revs=null,u.si=[];var d=c.shift();"a0"==t.substr(d,2)&&(u.certs=n(t,d),d=c.shift()),"a1"==t.substr(d,2)&&(u.revs=n(t,d),d=c.shift());var p=d;if("31"!=t.substr(p,2))throw"Can't find signerInfos";for(var g=e(t,p),v=0;v<g.length;v++){var y=a.parseSignerInfoForAddingUnsigned(t,g[v],v);u.si[v]=y}var m=null;for(u.obj=new o,(m=new s).hTLV=u.version,u.obj.dCMSVersion=m,(m=new s).hTLV=u.algs,u.obj.dDigestAlgs=m,(m=new s).hTLV=u.encapcontent,u.obj.dEncapContentInfo=m,(m=new s).hTLV=u.certs,u.obj.dCerts=m,u.obj.signerInfoList=[],v=0;v<u.si.length;v++)u.obj.signerInfoList.push(u.si[v].obj);return u},ju.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e){var n=Hu.getTLV,r=Hu.getV,i=ju.asn1,s=i.ASN1Object,o=i.cms,a=o.AttributeList,u=o.SignerInfo,c={},h=(0,Hu.getChildIdx)(t,e);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var l=h.shift();c.version=n(t,l);var f=h.shift();c.si=n(t,f);var d=h.shift();c.digalg=n(t,d);var p=h.shift();c.sattrs=n(t,p);var g=h.shift();c.sigalg=n(t,g);var v=h.shift();c.sig=n(t,v),c.sigval=r(t,v);var y=null;return c.obj=new u,(y=new s).hTLV=c.version,c.obj.dCMSVersion=y,(y=new s).hTLV=c.si,c.obj.dSignerIdentifier=y,(y=new s).hTLV=c.digalg,c.obj.dDigestAlgorithm=y,(y=new s).hTLV=c.sattrs,c.obj.dSignedAttrs=y,(y=new s).hTLV=c.sigalg,c.obj.dSigAlg=y,(y=new s).hTLV=c.sig,c.obj.dSig=y,c.obj.dUnsignedAttrs=new a,c},void 0!==ju.asn1.csr&&ju.asn1.csr||(ju.asn1.csr={}),ju.asn1.csr.CertificationRequest=function(t){var e=ju,n=e.asn1,r=n.DERBitString,i=n.DERSequence,s=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(t,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new s.AlgorithmIdentifier({name:t}),sig=new e.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var o=new i({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=o.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return ec(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},Pa.lang.extend(ju.asn1.csr.CertificationRequest,ju.asn1.ASN1Object),ju.asn1.csr.CertificationRequestInfo=function(){var t=ju.asn1,e=t.DERInteger,n=t.DERSequence,r=t.DERSet,i=t.DERNull,s=t.DERTaggedObject,o=t.DERObjectIdentifier,a=t.x509,u=a.X500Name,c=a.Extension,h=dc;t.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new e({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new u(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=h.getKey(t);this.asn1SubjPKey=new a.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){c.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new n({array:this.extensionsArray}),e=new r({array:[t]}),a=new n({array:[new o({oid:"1.2.840.113549.1.9.14"}),e]}),u=new s({explicit:!0,tag:"a0",obj:a});this.asn1Array.push(u)}else u=new s({explicit:!1,tag:"a0",obj:new i}),this.asn1Array.push(u);var c=new n({array:this.asn1Array});return this.hTLV=c.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},Pa.lang.extend(ju.asn1.csr.CertificationRequestInfo,ju.asn1.ASN1Object),ju.asn1.csr.CSRUtil=new function(){},ju.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=dc,n=ju.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new n.CertificationRequestInfo;if(r.setSubjectByParam(t.subject),r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var i=0;i<t.ext.length;i++)for(key in t.ext[i])r.appendExtensionByName(key,t.ext[i][key]);var s=new n.CertificationRequest({csrinfo:r}),o=e.getKey(t.sbjprvkey);return s.sign(t.sigalg,o),s.getPEMString()},ju.asn1.csr.CSRUtil.getInfo=function(t){var e=Hu.getTLVbyList,n={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=nc(t,"CERTIFICATE REQUEST");return n.subject.hex=e(r,0,[0,1]),n.subject.name=mc.hex2dn(n.subject.hex),n.pubkey.hex=e(r,0,[0,2]),n.pubkey.obj=dc.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==ju&&ju||(ju={}),void 0!==ju.asn1&&ju.asn1||(ju.asn1={}),void 0!==ju.asn1.ocsp&&ju.asn1.ocsp||(ju.asn1.ocsp={}),ju.asn1.ocsp.DEFAULT_HASH="sha1",ju.asn1.ocsp.CertID=function(t){var e=ju.asn1,n=e.DEROctetString,r=e.DERInteger,i=e.DERSequence,s=e.x509.AlgorithmIdentifier,o=e.ocsp,a=o.DEFAULT_HASH,u=ju.crypto.Util.hashHex,c=mc,h=Hu;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,e,i,o){void 0===o&&(o=a),this.dHashAlg=new s({name:o}),this.dIssuerNameHash=new n({hex:t}),this.dIssuerKeyHash=new n({hex:e}),this.dSerialNumber=new r({hex:i})},this.setByCert=function(t,e,n){void 0===n&&(n=a);var r=new c;r.readCertPEM(e);var i=new c;i.readCertPEM(t);var s=i.getPublicKeyHex(),o=h.getTLVbyList(s,0,[1,0],"30"),l=r.getSerialNumberHex(),f=u(i.getSubjectHex(),n),d=u(o,n);this.setByValue(f,d,l,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=new i({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var l=t;if(void 0!==l.issuerCert&&void 0!==l.subjectCert){var f=a;void 0===l.alg&&(f=void 0),this.setByCert(l.issuerCert,l.subjectCert,f)}else{if(void 0===l.namehash||void 0===l.keyhash||void 0===l.serial)throw"invalid constructor arguments";f=a,void 0===l.alg&&(f=void 0),this.setByValue(l.namehash,l.keyhash,l.serial,f)}}},Pa.lang.extend(ju.asn1.ocsp.CertID,ju.asn1.ASN1Object),ju.asn1.ocsp.Request=function(t){var e=ju.asn1,n=e.DERSequence,r=e.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var i=new r.CertID(t);this.dReqCert=i}},Pa.lang.extend(ju.asn1.ocsp.Request,ju.asn1.ASN1Object),ju.asn1.ocsp.TBSRequest=function(t){var e=ju.asn1,n=e.DERSequence,r=e.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var i=new r.Request(t[0]);e.push(i)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new n({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},Pa.lang.extend(ju.asn1.ocsp.TBSRequest,ju.asn1.ASN1Object),ju.asn1.ocsp.OCSPRequest=function(t){var e=ju.asn1,n=e.DERSequence,r=e.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var i=new r.TBSRequest(t);this.dTbsRequest=i}},Pa.lang.extend(ju.asn1.ocsp.OCSPRequest,ju.asn1.ASN1Object),ju.asn1.ocsp.OCSPUtil={},ju.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){var r=ju.asn1.ocsp;return void 0===n&&(n=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:n,issuerCert:t,subjectCert:e}]}).getEncodedHex()},ju.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=Hu.getVbyList,n=Hu.getIdxbyList,r=(e=Hu.getVbyList,Hu.getV),i={};try{var s=e(t,0,[0],"0a");i.responseStatus=parseInt(s,16)}catch(t){}if(0!==i.responseStatus)return i;try{var o=n(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(o,2)?i.certStatus="good":"a1"===t.substr(o,2)?(i.certStatus="revoked",i.revocationTime=Yu(e(t,o,[0]))):"82"===t.substr(o,2)&&(i.certStatus="unknown")}catch(t){}try{var a=n(t,0,[1,0,1,0,0,2,0,2]);i.thisUpdate=Yu(r(t,a))}catch(t){}try{var u=n(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(u,2)&&(i.nextUpdate=Yu(e(t,u,[0])))}catch(t){}return i},void 0!==ju&&ju||(ju={}),void 0!==ju.lang&&ju.lang||(ju.lang={}),ju.lang.String=function(){},Bu=function(t){return Ku(new ss(t,"utf8").toString("base64"))},Lu=function(t){return new ss(zu(t),"base64").toString("utf8")},ju.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},ju.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},ju.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},ju.lang.String.isBase64URL=function(t){return!t.match(/[+\/=]/)&&(t=zu(t),ju.lang.String.isBase64(t))},ju.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==ju&&ju||(ju={}),void 0!==ju.crypto&&ju.crypto||(ju.crypto={}),ju.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:Ua.algo.MD5,sha1:Ua.algo.SHA1,sha224:Ua.algo.SHA224,sha256:Ua.algo.SHA256,sha384:Ua.algo.SHA384,sha512:Ua.algo.SHA512,ripemd160:Ua.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+e;for(var s="0001",o="00"+r,a="",u=i-s.length-o.length,c=0;c<u;c+=2)a+="ff";return s+a+o},this.hashString=function(t,e){return new ju.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new ju.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new ju.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new ju.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new ju.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new ju.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new ju.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},ju.crypto.Util.md5=function(t){return new ju.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},ju.crypto.Util.ripemd160=function(t){return new ju.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},ju.crypto.Util.SECURERANDOMGEN=new Cu,ju.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return ju.crypto.Util.SECURERANDOMGEN.nextBytes(e),Uu(e)},ju.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new $a(ju.crypto.Util.getRandomHexOfNbytes(t),16)},ju.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,n=new Array((t-e)/8+1);return ju.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],Uu(n)},ju.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new $a(ju.crypto.Util.getRandomHexOfNbits(t),16)},ju.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var n=ju.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(n))return n}},ju.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var n=t.compareTo(e);if(1==n)throw"biMin is greater than biMax";if(0==n)return t;var r=e.subtract(t);return ju.crypto.Util.getRandomBigIntegerZeroToMax(r).add(t)},ju.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=ju.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=ju.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=ju.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=Ua.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(Ua.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ju.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ju.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},ju.crypto.MessageDigest.getHashLength=function(t){var e=ju.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},ju.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ju.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=ju.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==e){try{this.mac=Ua.algo.HMAC.create(ju.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=Ua.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(Ua.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=Ju(t)),void(this.pass=Ua.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;if(e=null,void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=$u(t.utf8)),void 0!==t.rstr&&(e=Ju(t.rstr)),void 0!==t.b64&&(e=Qa(t.b64)),void 0!==t.b64u&&(e=Wu(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=Ua.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ju.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ju.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ju.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t}this.init=function(t,e){var n=null;try{n=void 0===e?dc.getKey(t):dc.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new ju.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof Ou&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Ou&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ju.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ju.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new ju.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof Ou&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Ou&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ju.crypto.ECDSA&&this.pubKey instanceof ju.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ju.crypto.DSA&&this.pubKey instanceof ju.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,this.provName=void 0===t.prov?ju.crypto.Util.DEFAULTPROVIDER[this.algName]:t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=dc.getKey(t.prvkeypem),this.init(e)}catch(t){throw"fatal error to load pem private key: "+t}}},ju.crypto.Cipher=function(){},ju.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof Ou&&e.isPublic){var r=ju.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.encrypt(t);if("RSAOAEP"===r)return e.encryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ju.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof Ou&&e.isPrivate){var r=ju.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.decrypt(t);if("RSAOAEP"===r)return e.decryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ju.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof Ou){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},ju.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ju&&ju||(ju={}),void 0!==ju.crypto&&ju.crypto||(ju.crypto={}),ju.crypto.ECDSA=function(t){var e=new Cu;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new $a(t.bitLength(),e).mod(t.subtract($a.ONE)).add($a.ONE)},this.setNamedCurve=function(t){this.ecparams=ju.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.getBigRandom(this.ecparams.n),e=this.ecparams.G.multiply(t),n=e.getX().toBigInteger(),r=e.getY().toBigInteger(),i=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-i),o="04"+("0000000000"+n.toString(16)).slice(-i)+("0000000000"+r.toString(16)).slice(-i);return this.setPrivateKeyHex(s),this.setPublicKeyHex(o),{ecprvhex:s,ecpubhex:o}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new $a(e,16),r=this.ecparams.n,i=new $a(t,16);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo($a.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return ju.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(t,e){var n=e,r=this.ecparams.n,i=$a.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo($a.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var r,i,s,o=ju.crypto.ECDSA.parseSigHex(e);r=o.r,i=o.s,s=Nu.decodeFromHex(this.ecparams.curve,n);var a=new $a(t,16);return this.verifyRaw(a,r,i,s)},this.verify=function(t,e,n){var r,i,s;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);r=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";r=e.r,i=e.s}if(n instanceof Nu)s=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=Nu.decodeFrom(this.ecparams.curve,n)}var a=$a.fromByteArrayUnsigned(t);return this.verifyRaw(a,r,i,s)},this.verifyRaw=function(t,e,n,r){var i=this.ecparams.n,s=this.ecparams.G;if(e.compareTo($a.ONE)<0||e.compareTo(i)>=0)return!1;if(n.compareTo($a.ONE)<0||n.compareTo(i)>=0)return!1;var o=n.modInverse(i),a=t.multiply(o).mod(i),u=e.multiply(o).mod(i);return s.multiply(a).add(r.multiply(u)).getX().toBigInteger().mod(i).equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:$a.fromByteArrayUnsigned(n),s:$a.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:$a.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:$a.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,i=ju.crypto.ECDSA.getName,s=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{e=s(t,0,[2,0],"06"),n=s(t,0,[1],"04");try{r=s(t,0,[3,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=i(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var e,n,r,i=ju.crypto.ECDSA.getName,s=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{s(t,0,[1,0],"06"),e=s(t,0,[1,1],"06"),n=s(t,0,[2,0,1],"04");try{r=s(t,0,[2,0,2,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=i(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var e,n,r=ju.crypto.ECDSA.getName,i=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{i(t,0,[0,0],"06"),e=i(t,0,[0,1],"06"),n=i(t,0,[1],"03").substr(2)}catch(t){throw"malformed PKCS#8 ECC public key"}if(this.curveName=r(e),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,e){5!==e&&(e=6);var n,r,i=ju.crypto.ECDSA.getName,s=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{n=s(t,0,[0,e,0,1],"06"),r=s(t,0,[0,e,1],"03").substr(2)}catch(t){throw"malformed X.509 certificate ECC public key"}if(this.curveName=i(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},ju.crypto.ECDSA.parseSigHex=function(t){var e=ju.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new $a(e.r,16),s:new $a(e.s,16)}},ju.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=Hu.getChildIdx,n=Hu.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var r=e(t,0);if(2!=r.length)throw"number of signature ASN.1 sequence elements seem wrong";var i=r[0],s=r[1];if("02"!=t.substr(i,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(s,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(t,i),s:n(t,s)}},ju.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=ju.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},ju.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return ju.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},ju.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new $a(t,16),r=new $a(e,16);return ju.crypto.ECDSA.biRSSigToASN1Sig(n,r)},ju.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=ju.asn1,r=new n.DERInteger({bigint:t}),i=new n.DERInteger({bigint:e});return new n.DERSequence({array:[r,i]}).getEncodedHex()},ju.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==ju&&ju||(ju={}),void 0!==ju.crypto&&ju.crypto||(ju.crypto={}),ju.crypto.ECParameterDB=new function(){var t={},e={};function n(t){return new $a(t,16)}this.getByName=function(n){var r=n;if(void 0!==e[r]&&(r=e[n]),void 0!==t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,s,o,a,u,c,h,l,f,d,p){t[r]={};var g=n(s),v=n(o),y=n(a),m=n(u),b=n(c),w=new _u(g,v,y),S=w.decodePointHex("04"+h+l);t[r].name=r,t[r].keylen=i,t[r].curve=w,t[r].G=S,t[r].n=m,t[r].h=b,t[r].oid=d,t[r].info=p;for(var E=0;E<f.length;E++)e[f[E]]=r}},ju.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ju.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ju.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ju.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ju.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ju.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ju.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ju.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ju.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ju.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==ju&&ju||(ju={}),void 0!==ju.crypto&&ju.crypto||(ju.crypto={}),ju.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,n,r,i){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=i},this.setPrivateHex=function(t,e,n,r,i){var s,o,a,u,c;s=new $a(t,16),o=new $a(e,16),a=new $a(n,16),u="string"==typeof r&&r.length>1?new $a(r,16):null,c=new $a(i,16),this.setPrivate(s,o,a,u,c)},this.setPublic=function(t,e,n,r){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(t,e,n,r){var i,s,o,a;i=new $a(t,16),s=new $a(e,16),o=new $a(n,16),a=new $a(r,16),this.setPublic(i,s,o,a)},this.signWithMessageHash=function(t){var e=this.p,n=this.q,r=this.g,i=this.x,s=ju.crypto.Util.getRandomBigIntegerMinToMax($a.ONE.add($a.ONE),n.subtract($a.ONE)),o=new $a(t.substr(0,n.bitLength()/4),16),a=r.modPow(s,e).mod(n),u=s.modInverse(n).multiply(o.add(i.multiply(a))).mod(n);return ju.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(t,e){var n=this.p,r=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(e),a=o[0],u=o[1],c=new $a(t.substr(0,r.bitLength()/4),16);if($a.ZERO.compareTo(a)>0||a.compareTo(r)>0)throw"invalid DSA signature";if($a.ZERO.compareTo(u)>=0||u.compareTo(r)>0)throw"invalid DSA signature";var h=u.modInverse(r),l=c.multiply(h).mod(r),f=a.multiply(h).mod(r);return 0==i.modPow(l,n).multiply(s.modPow(f,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(t){try{return[new $a(Hu.getVbyList(t,0,[0],"02"),16),new $a(Hu.getVbyList(t,0,[1],"02"),16)]}catch(t){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,i,s,o=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[1],"02"),n=o(t,0,[2],"02"),r=o(t,0,[3],"02"),i=o(t,0,[4],"02"),s=o(t,0,[5],"02")}catch(t){throw"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(e,n,r,i,s)},this.readPKCS8PrvKeyHex=function(t){var e,n,r,i,s=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{e=s(t,0,[1,1,0],"02"),n=s(t,0,[1,1,1],"02"),r=s(t,0,[1,1,2],"02"),i=s(t,0,[2,0],"02")}catch(t){throw"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(e,n,r,null,i)},this.readPKCS8PubKeyHex=function(t){var e,n,r,i,s=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{e=s(t,0,[0,1,0],"02"),n=s(t,0,[0,1,1],"02"),r=s(t,0,[0,1,2],"02"),i=s(t,0,[1,0],"02")}catch(t){throw"malformed PKCS#8 DSA public key"}this.setPublicHex(e,n,r,i)},this.readCertPubKeyHex=function(t,e){var n,r,i,s;5!==e&&(e=6);var o=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{n=o(t,0,[0,e,0,1,0],"02"),r=o(t,0,[0,e,0,1,1],"02"),i=o(t,0,[0,e,0,1,2],"02"),s=o(t,0,[0,e,1,0],"02")}catch(t){throw"malformed X.509 certificate DSA public key"}this.setPublicHex(n,r,i,s)}};var dc=function(){var t=function(t,n,r){return e(Ua.AES,t,n,r)},e=function(t,e,n,r){var i=Ua.enc.Hex.parse(e),s=Ua.enc.Hex.parse(n),o=Ua.enc.Hex.parse(r),a={};a.key=s,a.iv=o,a.ciphertext=i;var u=t.decrypt(a,s,{iv:o});return Ua.enc.Hex.stringify(u)},n=function(t,e,n){return r(Ua.AES,t,e,n)},r=function(t,e,n,r){var i=Ua.enc.Hex.parse(e),s=Ua.enc.Hex.parse(n),o=Ua.enc.Hex.parse(r),a=t.encrypt(i,s,{iv:o}),u=Ua.enc.Hex.parse(a.toString());return Ua.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:t,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,n,r){return e(Ua.TripleDES,t,n,r)},eproc:function(t,e,n){return r(Ua.TripleDES,t,e,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,n,r){return e(Ua.DES,t,n,r)},eproc:function(t,e,n){return r(Ua.DES,t,e,n)},keylen:8,ivlen:8}},s=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var i=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(i=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(i=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=i&&-1!=o){var a=t.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},o=function(t,e,n){for(var r=n.substring(0,16),s=Ua.enc.Hex.parse(r),o=Ua.enc.Utf8.parse(e),a=i[t].keylen+i[t].ivlen,u="",c=null;;){var h=Ua.algo.MD5.create();if(null!=c&&h.update(c),h.update(o),h.update(s),c=h.finalize(),(u+=Ua.enc.Hex.stringify(c)).length>=2*a)break}var l={};return l.keyhex=u.substr(0,2*i[t].keylen),l.ivhex=u.substr(2*i[t].keylen,2*i[t].ivlen),l},a=function(t,e,n,r){var s=Ua.enc.Base64.parse(t),o=Ua.enc.Hex.stringify(s);return(0,i[e].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(t){return s(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return o(t,e,n)},decryptKeyB64:function(t,e,n,r){return a(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=s(t),r=n.cipher,i=n.ivsalt,u=n.data,c=o(r,e,i);return a(u,r,c.keyhex,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r,s){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==s&&null!=s||(s=function(){var t=Ua.lib.WordArray.random(i[r].ivlen);return Ua.enc.Hex.stringify(t)}().toUpperCase());var u=function(t,e,n){return(0,i[e].eproc)(t,n,s)}(e,r,o(r,n,s).keyhex);return a="-----BEGIN "+t+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+s+"\r\n",a+="\r\n",(a+=u.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=Hu.getChildIdx,n=Hu.getV,r={},i=e(t,0);if(2!=i.length)throw"malformed format: SEQUENCE(0).items != 2: "+i.length;r.ciphertext=n(t,i[1]);var s=e(t,i[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+s.length;if("2a864886f70d01050d"!=n(t,s[0]))throw"this only supports pkcs5PBES2";var o=e(t,s[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var a=e(t,o[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length;if("2a864886f70d0307"!=n(t,a[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(t,a[1]);var u=e(t,o[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=n(t,u[0]))throw"this only supports pkcs5PBKDF2";var c=e(t,u[1]);if(c.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length;r.pbkdf2Salt=n(t,c[0]);var h=n(t,c[1]);try{r.pbkdf2Iter=parseInt(h,16)}catch(t){throw"malformed format pbkdf2Iter: "+h}return r},getPBKDF2KeyHexFromParam:function(t,e){var n=Ua.enc.Hex.parse(t.pbkdf2Salt),r=Ua.PBKDF2(e,n,{keySize:6,iterations:t.pbkdf2Iter});return Ua.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=nc(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=dc.getPBKDF2KeyHexFromParam(r,e),s={};s.ciphertext=Ua.enc.Hex.parse(r.ciphertext);var o=Ua.enc.Hex.parse(i),a=Ua.enc.Hex.parse(r.encryptionSchemeIV),u=Ua.TripleDES.decrypt(s,o,{iv:a});return Ua.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e=Hu,n=e.getChildIdx,r=e.getV,i={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var s=n(t,0);if(3!=s.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(s[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(t,s[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=r(t,o[0]),"06"==t.substr(o[1],2)&&(i.algparam=r(t,o[1])),"04"!=t.substr(s[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=e.getVidx(t,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=nc(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,n=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==n.algoid)e=new Ou;else if("2a8648ce380401"==n.algoid)e=new ju.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";e=new ju.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,n=Hu.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===n)e=new Ou;else if("2a8648ce380401"===n)e=new ju.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";e=new ju.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=Hu.getChildIdx,n=Hu.getV,r={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var i=e(t,0);if(2!=i.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(i[0],2))throw"malformed RSA key(code:003)";if(r.n=n(t,i[0]),"02"!=t.substr(i[1],2))throw"malformed RSA key(code:004)";return r.e=n(t,i[1]),r},parsePublicPKCS8Hex:function(t){var e=Hu,n=e.getChildIdx,r=e.getV,i={algparam:null},s=n(t,0);if(2!=s.length)throw"outer DERSequence shall have 2 elements: "+s.length;var o=s[0];if("30"!=t.substr(o,2))throw"malformed PKCS8 public key(code:001)";var a=n(t,o);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=r(t,a[0]),"06"==t.substr(a[1],2)?i.algparam=r(t,a[1]):"30"==t.substr(a[1],2)&&(i.algparam={},i.algparam.p=e.getVbyList(t,a[1],[0],"02"),i.algparam.q=e.getVbyList(t,a[1],[1],"02"),i.algparam.g=e.getVbyList(t,a[1],[2],"02")),"03"!=t.substr(s[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=r(t,s[1]).substr(2),i}}}();dc.getKey=function(t,e,n){var r,i=(b=Hu).getChildIdx,s=b.getVbyList,o=ju.crypto,a=o.ECDSA,u=o.DSA,c=Ou,h=nc,l=dc;if(void 0!==c&&t instanceof c)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==u&&t instanceof u)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new a({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new a({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(O=new c).setPublic(t.n,t.e),O;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(O=new c).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),O;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(O=new c).setPrivate(t.n,t.e,t.d),O;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(O=new u).setPublic(t.p,t.q,t.g,t.y),O;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(O=new u).setPrivate(t.p,t.q,t.g,t.y,t.x),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(O=new c).setPublic(Wu(t.n),Wu(t.e)),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(O=new c).setPrivateEx(Wu(t.n),Wu(t.e),Wu(t.d),Wu(t.p),Wu(t.q),Wu(t.dp),Wu(t.dq),Wu(t.qi)),O;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(O=new c).setPrivate(Wu(t.n),Wu(t.e),Wu(t.d)),O;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var f=(I=new a({curve:t.crv})).ecparams.keylen/4,d=("0000000000"+Wu(t.x)).slice(-f),p=("0000000000"+Wu(t.y)).slice(-f);return I.setPublicKeyHex(g="04"+d+p),I}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){f=(I=new a({curve:t.crv})).ecparams.keylen/4;var g="04"+(d=("0000000000"+Wu(t.x)).slice(-f))+(p=("0000000000"+Wu(t.y)).slice(-f)),v=("0000000000"+Wu(t.d)).slice(-f);return I.setPublicKeyHex(g),I.setPrivateKeyHex(v),I}if("pkcs5prv"===n){var y,m=t,b=Hu;if(9===(y=i(m,0)).length)(O=new c).readPKCS5PrvKeyHex(m);else if(6===y.length)(O=new u).readPKCS5PrvKeyHex(m);else{if(!(y.length>2&&"04"===m.substr(y[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(O=new a).readPKCS5PrvKeyHex(m)}return O}if("pkcs8prv"===n)return l.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===n)return l._getKeyFromPublicPKCS8Hex(t);if("x509pub"===n)return mc.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return mc.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var w=nc(t,"PUBLIC KEY");return l._getKeyFromPublicPKCS8Hex(w)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var S=h(t,"RSA PRIVATE KEY");return l.getKey(S,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var E=s(r=h(t,"DSA PRIVATE KEY"),0,[1],"02"),x=s(r,0,[2],"02"),A=s(r,0,[3],"02"),F=s(r,0,[4],"02"),T=s(r,0,[5],"02");return(O=new u).setPrivate(new $a(E,16),new $a(x,16),new $a(A,16),new $a(F,16),new $a(T,16)),O}if(-1!=t.indexOf("-END PRIVATE KEY-"))return l.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var C=l.getDecryptedKeyHex(t,e),k=new Ou;return k.readPKCS5PrvKeyHex(C),k}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var I,O=s(r=l.getDecryptedKeyHex(t,e),0,[1],"04"),R=s(r,0,[2,0],"06"),D=s(r,0,[3,0],"03").substr(2);if(void 0===ju.crypto.OID.oidhex2name[R])throw"undefined OID(hex) in KJUR.crypto.OID: "+R;return(I=new a({curve:ju.crypto.OID.oidhex2name[R]})).setPublicKeyHex(D),I.setPrivateKeyHex(O),I.isPublic=!1,I}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return E=s(r=l.getDecryptedKeyHex(t,e),0,[1],"02"),x=s(r,0,[2],"02"),A=s(r,0,[3],"02"),F=s(r,0,[4],"02"),T=s(r,0,[5],"02"),(O=new u).setPrivate(new $a(E,16),new $a(x,16),new $a(A,16),new $a(F,16),new $a(T,16)),O;if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return l.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},dc.generateKeypair=function(t,e){if("RSA"==t){var n=e;(o=new Ou).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new Ou,i=o.n.toString(16),s=o.e.toString(16);return r.setPublic(i,s),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}if("EC"==t){var o,a,u=e,c=new ju.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new ju.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new ju.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}throw"unknown algorithm: "+t},dc.getPEM=function(t,e,n,r,i,s){var o=ju.asn1,a=o.DERObjectIdentifier,u=o.DERInteger,c=o.ASN1Util.newObject,h=ju.crypto,l=h.DSA,f=h.ECDSA,d=Ou;function p(t){return c({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function g(t){return c({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function v(t){return c({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==d&&t instanceof d||void 0!==l&&t instanceof l||void 0!==f&&t instanceof f)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return ec(w=new(0,o.x509.SubjectPublicKeyInfo)(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===n||null==n)&&1==t.isPrivate)return ec(w=p(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==f&&t instanceof f&&(void 0===n||null==n)&&1==t.isPrivate){var y=new a({name:t.curveName}).getEncodedHex(),m=g(t).getEncodedHex(),b="";return(b+=ec(y,"EC PARAMETERS"))+ec(m,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==l&&t instanceof l&&(void 0===n||null==n)&&1==t.isPrivate)return ec(w=v(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==n&&null!=n&&1==t.isPrivate){var w=p(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",w,n,r,s)}if("PKCS5PRV"==e&&void 0!==f&&t instanceof f&&void 0!==n&&null!=n&&1==t.isPrivate)return w=g(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",w,n,r,s);if("PKCS5PRV"==e&&void 0!==l&&t instanceof l&&void 0!==n&&null!=n&&1==t.isPrivate)return w=v(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",w,n,r,s);var S=function(t,e){var n=E(t,e);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},E=function(t,e){var n=Ua.lib.WordArray.random(8),r=Ua.lib.WordArray.random(8),i=Ua.PBKDF2(e,n,{keySize:6,iterations:100}),s=Ua.enc.Hex.parse(t),o=Ua.TripleDES.encrypt(s,i,{iv:r})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=Ua.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=Ua.enc.Hex.stringify(r),a};if("PKCS8PRV"==e&&null!=d&&t instanceof d&&1==t.isPrivate){var x=p(t).getEncodedHex();return w=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?ec(w,"PRIVATE KEY"):ec(m=S(w,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==f&&t instanceof f&&1==t.isPrivate)return x=new c({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?ec(w,"PRIVATE KEY"):ec(m=S(w,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==e&&void 0!==l&&t instanceof l&&1==t.isPrivate)return x=new u({bigint:t.x}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?ec(w,"PRIVATE KEY"):ec(m=S(w,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},dc.getKeyFromCSRPEM=function(t){var e=nc(t,"CERTIFICATE REQUEST");return dc.getKeyFromCSRHex(e)},dc.getKeyFromCSRHex=function(t){var e=dc.parseCSRHex(t);return dc.getKey(e.p8pubkeyhex,null,"pkcs8pub")},dc.parseCSRHex=function(t){var e=Hu.getChildIdx,n=Hu.getTLV,r={},i=t;if("30"!=i.substr(0,2))throw"malformed CSR(code:001)";var s=e(i,0);if(s.length<1)throw"malformed CSR(code:002)";if("30"!=i.substr(s[0],2))throw"malformed CSR(code:003)";var o=e(i,s[0]);if(o.length<3)throw"malformed CSR(code:004)";return r.p8pubkeyhex=n(i,o[2]),r},dc.getJWKFromKey=function(t){var e={};if(t instanceof Ou&&t.isPrivate)return e.kty="RSA",e.n=Qu(t.n.toString(16)),e.e=Qu(t.e.toString(16)),e.d=Qu(t.d.toString(16)),e.p=Qu(t.p.toString(16)),e.q=Qu(t.q.toString(16)),e.dp=Qu(t.dmp1.toString(16)),e.dq=Qu(t.dmq1.toString(16)),e.qi=Qu(t.coeff.toString(16)),e;if(t instanceof Ou&&t.isPublic)return e.kty="RSA",e.n=Qu(t.n.toString(16)),e.e=Qu(t.e.toString(16)),e;if(t instanceof ju.crypto.ECDSA&&t.isPrivate){if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=r,e.x=Qu(n.x),e.y=Qu(n.y),e.d=Qu(t.prvKeyHex),e}if(t instanceof ju.crypto.ECDSA&&t.isPublic){var r;if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=t.getPublicKeyXYHex(),e.kty="EC",e.crv=r,e.x=Qu(n.x),e.y=Qu(n.y),e}throw"not supported key object"},Ou.getPosArrayOfChildrenFromHex=function(t){return Hu.getChildIdx(t,0)},Ou.getHexValueArrayOfChildrenFromHex=function(t){var e,n=Hu.getV,r=n(t,(e=Ou.getPosArrayOfChildrenFromHex(t))[0]),i=n(t,e[1]),s=n(t,e[2]),o=n(t,e[3]),a=n(t,e[4]),u=n(t,e[5]),c=n(t,e[6]),h=n(t,e[7]),l=n(t,e[8]);return(e=new Array).push(r,i,s,o,a,u,c,h,l),e},Ou.prototype.readPrivateKeyFromPEMString=function(t){var e=nc(t),n=Ou.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},Ou.prototype.readPKCS5PrvKeyHex=function(t){var e=Ou.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Ou.prototype.readPKCS8PrvKeyHex=function(t){var e,n,r,i,s,o,a,u,c=Hu.getVbyList;if(!1===Hu.isASN1HEX(t))throw"not ASN.1 hex string";try{e=c(t,0,[2,0,1],"02"),n=c(t,0,[2,0,2],"02"),r=c(t,0,[2,0,3],"02"),i=c(t,0,[2,0,4],"02"),s=c(t,0,[2,0,5],"02"),o=c(t,0,[2,0,6],"02"),a=c(t,0,[2,0,7],"02"),u=c(t,0,[2,0,8],"02")}catch(t){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(e,n,r,i,s,o,a,u)},Ou.prototype.readPKCS5PubKeyHex=function(t){var e=Hu,n=e.getV;if(!1===e.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var r=e.getChildIdx(t,0);if(2!==r.length||"02"!==t.substr(r[0],2)||"02"!==t.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var i=n(t,r[0]),s=n(t,r[1]);this.setPublic(i,s)},Ou.prototype.readPKCS8PubKeyHex=function(t){var e=Hu;if(!1===e.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==e.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var n=e.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(n)},Ou.prototype.readCertPubKeyHex=function(t){var e,n;(e=new mc).readCertHex(t),n=e.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var pc=new RegExp("");function gc(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t}function vc(t,e,n){for(var r="",i=0;r.length<e;)r+=Gu(n(Ju(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function yc(t){for(var e in ju.crypto.Util.DIGESTINFOHEAD){var n=ju.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n)return[e,t.substring(r)]}return[]}function mc(){var t=Hu,e=t.getChildIdx,n=t.getV,r=t.getTLV,i=t.getVbyList,s=t.getTLVbyList,o=t.getIdxbyList,a=t.getVidx,u=t.oidname,c=mc,h=nc;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return i(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return u(i(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return c.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return c.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=i(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getNotAfter=function(){var t=i(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return o(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return dc.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return u(i(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),r=s(this.hex,0,[0],"30"),i=new ju.crypto.Signature({alg:e});return i.init(t),i.updateHex(r),i.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=o(this.hex,0,[0,7,0],"30"),r=e(this.hex,n);this.aExtInfo=new Array;for(var s=0;s<r.length;s++){var u={critical:!1},c=0;3===e(this.hex,r[s]).length&&(u.critical=!0,c=1),u.oid=t.hextooidstr(i(this.hex,r[s],[0],"06"));var h=o(this.hex,r[s],[1+c]);u.vidx=a(this.hex,h),this.aExtInfo.push(u)}},this.getExtInfo=function(t){var e=this.aExtInfo,n=t;if(t.match(/^[0-9.]+$/)||(n=ju.asn1.x509.OID.name2oid(t)),""!==n)for(var r=0;r<e.length;r++)if(e[r].oid===n)return e[r]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var e=n(this.hex,t.vidx);if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var r=n(e,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var e=n(this.hex,t.vidx);if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var r=parseInt(e.substr(0,2)),i=parseInt(e.substr(2),16).toString(2);return i.substr(0,i.length-r)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),e=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&e.push(mc.KEYUSAGE_NAME[n]);return e.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:n(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var i={},s=r(this.hex,t.vidx),o=e(s,0),a=0;a<o.length;a++)"80"===s.substr(o[a],2)&&(i.kid=n(s,o[a]));return i},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var i=new Array,s=r(this.hex,t.vidx);if(""===s)return i;for(var o=e(s,0),a=0;a<o.length;a++)i.push(u(n(s,o[a])));return i},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),e=new Array,n=0;n<t.length;n++)"DNS"===t[n][0]&&e.push(t[n][1]);return e},this.getExtSubjectAltName2=function(){var t,i,s,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var a=new Array,u=r(this.hex,o.vidx),c=e(u,0),h=0;h<c.length;h++)s=u.substr(c[h],2),t=n(u,c[h]),"81"===s&&(i=Yu(t),a.push(["MAIL",i])),"82"===s&&(i=Yu(t),a.push(["DNS",i])),"84"===s&&(i=mc.hex2dn(t,0),a.push(["DN",i])),"86"===s&&(i=Yu(t),a.push(["URI",i])),"87"===s&&(i=cc(t),a.push(["IP",i]));return a},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var n=new Array,r=e(this.hex,t.vidx),s=0;s<r.length;s++)try{var o=Yu(i(this.hex,r[s],[0,0,0],"86"));n.push(o)}catch(t){}return n},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var n={ocsp:[],caissuer:[]},r=e(this.hex,t.vidx),s=0;s<r.length;s++){var o=i(this.hex,r[s],[0],"06"),a=i(this.hex,r[s],[1],"86");"2b06010505073001"===o&&n.ocsp.push(Yu(a)),"2b06010505073002"===o&&n.caissuer.push(Yu(a))}return n},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var s=r(this.hex,t.vidx),o=[],a=e(s,0),c=0;c<a.length;c++){var h={},l=e(s,a[c]);if(h.id=u(n(s,l[0])),2===l.length)for(var f=e(s,l[1]),d=0;d<f.length;d++){var p=i(s,f[d],[0],"06");"2b06010505070201"===p?h.cps=Yu(i(s,f[d],[1])):"2b06010505070202"===p&&(h.unotice=Yu(i(s,f[d],[1,0])))}o.push(h)}return o},this.readCertPEM=function(t){this.readCertHex(h(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getInfo=function(){var t,e,n;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+lc(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+lc(e.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var r=0;r<n.length;r++){var i=n[r],s=ju.asn1.x509.OID.oid2name(i.oid);""===s&&(s=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),t+="  "+s+" "+o+":\n","basicConstraints"===s){var a=this.getExtBasicConstraints();void 0===a.cA?t+="    {}\n":(t+="    cA=true",void 0!==a.pathLen&&(t+=", pathLen="+a.pathLen),t+="\n")}else if("keyUsage"===s)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===s)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===s){var u=this.getExtAuthorityKeyIdentifier();void 0!==u.kid&&(t+="    kid="+u.kid+"\n")}else if("extKeyUsage"===s)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===s)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===s)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===s){var c=this.getExtAIAInfo();void 0!==c.ocsp&&(t+="    ocsp: "+c.ocsp.join(",")+"\n"),void 0!==c.caissuer&&(t+="    caissuer: "+c.caissuer.join(",")+"\n")}else if("certificatePolicies"===s)for(var h=this.getExtCertificatePolicies(),l=0;l<h.length;l++)void 0!==h[l].id&&(t+="    policy oid: "+h[l].id+"\n"),void 0!==h[l].cps&&(t+="    cps: "+h[l].cps+"\n")}}return(t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}pc.compile("[^0-9a-f]","gi"),Ou.prototype.sign=function(t,e){var n=ju.crypto.Util.hashString(t,e);return this.signWithMessageHash(n,e)},Ou.prototype.signWithMessageHash=function(t,e){var n=ku(ju.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return gc(this.doPrivate(n).toString(16),this.n.bitLength())},Ou.prototype.signPSS=function(t,e,n){var r,i=(r=Ju(t),ju.crypto.Util.hashHex(r,e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,e,n)},Ou.prototype.signWithMessageHashPSS=function(t,e,n){var r,i=Gu(t),s=i.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),u=function(t){return ju.crypto.Util.hashHex(t,e)};if(-1===n||void 0===n)n=s;else if(-2===n)n=a-s-2;else if(n<-2)throw"invalid salt length";if(a<s+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new Cu).nextBytes(c),c=String.fromCharCode.apply(String,c));var h=Gu(u(Ju("\0\0\0\0\0\0\0\0"+i+c))),l=[];for(r=0;r<a-n-s-2;r+=1)l[r]=0;var f=String.fromCharCode.apply(String,l)+""+c,d=vc(h,f.length,u),p=[];for(r=0;r<f.length;r+=1)p[r]=f.charCodeAt(r)^d.charCodeAt(r);for(p[0]&=~(65280>>8*a-o&255),r=0;r<s;r++)p.push(h.charCodeAt(r));return p.push(188),gc(this.doPrivate(new $a(p)).toString(16),this.n.bitLength())},Ou.prototype.verify=function(t,e){var n=ku(e=(e=e.replace(pc,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=yc(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==ju.crypto.Util.hashString(t,r[0])},Ou.prototype.verifyWithMessageHash=function(t,e){var n=ku(e=(e=e.replace(pc,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=yc(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==t},Ou.prototype.verifyPSS=function(t,e,n,r){var i,s=(i=Ju(t),ju.crypto.Util.hashHex(i,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(s,e,n,r)},Ou.prototype.verifyWithMessageHashPSS=function(t,e,n,r){var i=new $a(e,16);if(i.bitLength()>this.n.bitLength())return!1;var s,o=function(t){return ju.crypto.Util.hashHex(t,n)},a=Gu(t),u=a.length,c=this.n.bitLength()-1,h=Math.ceil(c/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=h-u-2;else if(r<-2)throw"invalid salt length";if(h<u+r+2)throw"data too long";var l=this.doPublic(i).toByteArray();for(s=0;s<l.length;s+=1)l[s]&=255;for(;l.length<h;)l.unshift(0);if(188!==l[h-1])throw"encoded message does not end in 0xbc";var f=(l=String.fromCharCode.apply(String,l)).substr(0,h-u-1),d=l.substr(f.length,u),p=65280>>8*h-c&255;if(0!=(f.charCodeAt(0)&p))throw"bits beyond keysize not zero";var g=vc(d,f.length,o),v=[];for(s=0;s<f.length;s+=1)v[s]=f.charCodeAt(s)^g.charCodeAt(s);v[0]&=~p;var y=h-u-r-2;for(s=0;s<y;s+=1)if(0!==v[s])throw"leftmost octets not zero";if(1!==v[y])throw"0x01 marker not found";return d===Gu(o(Ju("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,v.slice(-r)))))},Ou.SALT_LEN_HLEN=-1,Ou.SALT_LEN_MAX=-2,Ou.SALT_LEN_RECOVER=-2,mc.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var n=new Array,r=Hu.getChildIdx(t,e),i=0;i<r.length;i++)n.push(mc.hex2rdn(t,r[i]));return"/"+(n=n.map(function(t){return t.replace("/","\\/")})).join("/")},mc.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var n=new Array,r=Hu.getChildIdx(t,e),i=0;i<r.length;i++)n.push(mc.hex2attrTypeValue(t,r[i]));return(n=n.map(function(t){return t.replace("+","\\+")})).join("+")},mc.hex2attrTypeValue=function(t,e){var n=Hu,r=n.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var i=n.getChildIdx(t,e);2!==i.length||t.substr(i[0],2);var s=r(t,i[0]),o=ju.asn1.ASN1Util.oidHexToInt(s);return ju.asn1.x509.OID.oid2atype(o)+"="+Gu(r(t,i[1]))},mc.getPublicKeyFromCertHex=function(t){var e=new mc;return e.readCertHex(t),e.getPublicKey()},mc.getPublicKeyFromCertPEM=function(t){var e=new mc;return e.readCertPEM(t),e.getPublicKey()},mc.getPublicKeyInfoPropOfCertPEM=function(t){var e,n,r=Hu.getVbyList,i={algparam:null};return(e=new mc).readCertPEM(t),n=e.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},mc.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ju&&ju||(ju={}),void 0!==ju.jws&&ju.jws||(ju.jws={}),ju.jws.JWS=function(){var t=ju.jws.JWS.isSafeJSONString;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],s=r[2],o=r[3],a=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!n){var u=Wu(o),c=ku(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var h=Lu(i),l=Lu(s);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=l,!t(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}},ju.jws.JWS.sign=function(t,e,n,r,i){var s,o,a,u=ju.jws.JWS,c=u.readSafeJSONString,h=u.isSafeJSONString,l=ju.crypto,f=l.Mac,d=l.Signature,p=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(s=p.stringify(o=e)),"string"==typeof e){if(!h(s=e))throw"JWS Head is not safe JSON string: "+s;o=c(s)}if(a=n,"object"==typeof n&&(a=p.stringify(n)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=p.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var g=null;if(void 0===u.jwsalg2sigalg[t])throw"unsupported alg name: "+t;g=u.jwsalg2sigalg[t];var v=Bu(s)+"."+Bu(a),y="";if("Hmac"==g.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var m=new f({alg:g,prov:"cryptojs",pass:r});m.updateString(v),y=m.doFinal()}else{var b;-1!=g.indexOf("withECDSA")?((b=new d({alg:g})).init(r,i),b.updateString(v),hASN1Sig=b.sign(),y=ju.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=g&&((b=new d({alg:g})).init(r,i),b.updateString(v),y=b.sign())}return v+"."+Qu(y)},ju.jws.JWS.verify=function(t,e,n){var r,i=ju.jws.JWS,s=i.readSafeJSONString,o=ju.crypto,a=o.ECDSA,u=o.Mac,c=o.Signature;r=Ou;var h=t.split(".");if(3!==h.length)return!1;var l,f=h[0]+"."+h[1],d=Wu(h[2]),p=s(Lu(h[0])),g=null;if(void 0===p.alg)throw"algorithm not specified in header";if(l=(g=p.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=dc.getKey(e)),!("RS"!=l&&"PS"!=l||e instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==l&&!(e instanceof a))throw"key shall be a ECDSA obj for ES* algs";var v=null;if(void 0===i.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+g;if("none"==(v=i.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==v.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var y=new u({alg:v,pass:e});return y.updateString(f),d==y.doFinal()}if(-1!=v.indexOf("withECDSA")){var m,b=null;try{b=a.concatSigToASN1Sig(d)}catch(t){return!1}return(m=new c({alg:v})).init(e),m.updateString(f),m.verify(b)}return(m=new c({alg:v})).init(e),m.updateString(f),m.verify(d)},ju.jws.JWS.parse=function(t){var e,n,r=t.split("."),i={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=r[1],3==r.length&&(n=r[2]),i.headerObj=ju.jws.JWS.readSafeJSONString(Lu(r[0])),i.payloadObj=ju.jws.JWS.readSafeJSONString(Lu(e)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadPP=null==i.payloadObj?Lu(e):JSON.stringify(i.payloadObj,null,"  "),void 0!==n&&(i.sigHex=Wu(n)),i},ju.jws.JWS.verifyJWT=function(t,e,n){var r=ju.jws,i=r.JWS,s=i.readSafeJSONString,o=i.inArray,a=i.includedArray,u=t.split("."),c=u[0],h=u[1],l=(Wu(u[2]),s(Lu(c))),f=s(Lu(h));if(void 0===l.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(l.alg,n.alg))return!1;if(void 0!==f.iss&&"object"==typeof n.iss&&!o(f.iss,n.iss))return!1;if(void 0!==f.sub&&"object"==typeof n.sub&&!o(f.sub,n.sub))return!1;if(void 0!==f.aud&&"object"==typeof n.aud)if("string"==typeof f.aud){if(!o(f.aud,n.aud))return!1}else if("object"==typeof f.aud&&!a(f.aud,n.aud))return!1;var d=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(d=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+n.gracePeriod<d||void 0!==f.nbf&&"number"==typeof f.nbf&&d<f.nbf-n.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&d<f.iat-n.gracePeriod||void 0!==f.jti&&void 0!==n.jti&&f.jti!==n.jti||!i.verify(t,e,n.alg))},ju.jws.JWS.includedArray=function(t,e){var n=ju.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0},ju.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},ju.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ju.jws.JWS.isSafeJSONString=function(t,e,n){var r=null;try{return"object"!=typeof(r=Pu(t))?0:r.constructor===Array?0:(e&&(e[n]=r),1)}catch(t){return 0}},ju.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=Pu(t))?null:e.constructor===Array?null:e}catch(t){return null}},ju.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},ju.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=Ju(e);return Qu(ju.crypto.Util.hashHex(n,"sha256"))},ju.jws.IntDate={},ju.jws.IntDate.get=function(t){var e=ju.jws.IntDate,n=e.getNow,r=e.getZulu;if("now"==t)return n();if("now + 1hour"==t)return n()+3600;if("now + 1day"==t)return n()+86400;if("now + 1month"==t)return n()+2592e3;if("now + 1year"==t)return n()+31536e3;if(t.match(/Z$/))return r(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},ju.jws.IntDate.getZulu=function(t){return ic(t)},ju.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ju.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},ju.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==ju&&ju||(ju={}),void 0!==ju.jws&&ju.jws||(ju.jws={}),ju.jws.JWSJS=function(){var t=ju.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=ju.jws.JWS.sign(t,e,this.sPayload,n,r).split(".");this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(t){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+t}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;if(!1===this.verifyNth(e,n[0],n[1]))return!1}return!0},this.verifyNth=function(e,n,r){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var i=this.aHeader[e]+"."+this.sPayload+"."+this.aSignature[e],s=!1;try{s=t.verify(i,n,r)}catch(t){return!1}return s},this.readJWSJS=function(t){if("string"==typeof t){var n=e(t);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignatures=t.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};var bc,wc={SecureRandom:Cu,rng_seed_time:Eu,BigInteger:$a,RSAKey:Ou,ECDSA:ju.crypto.ECDSA,DSA:ju.crypto.DSA,Signature:ju.crypto.Signature,MessageDigest:ju.crypto.MessageDigest,Mac:ju.crypto.Mac,Cipher:ju.crypto.Cipher,KEYUTIL:dc,ASN1HEX:Hu,X509:mc,CryptoJS:Ua,b64tohex:Qa,b64toBA:Wa,stoBA:Mu,BAtos:Vu,BAtohex:Uu,stohex:qu,stob64:function(t){return za(qu(t))},stob64u:function(t){return Ku(za(qu(t)))},b64utos:function(t){return Vu(Wa(zu(t)))},b64tob64u:Ku,b64utob64:zu,hex2b64:za,hextob64u:Qu,b64utohex:Wu,utf8tob64u:Bu,b64utoutf8:Lu,utf8tob64:function(t){return za(sc(hc(t)))},b64toutf8:function(t){return decodeURIComponent(oc(Qa(t)))},utf8tohex:$u,hextoutf8:Yu,hextorstr:Gu,rstrtohex:Ju,hextob64:Xu,hextob64nl:Zu,b64nltohex:tc,hextopem:ec,pemtohex:nc,hextoArrayBuffer:function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),n=new DataView(e),r=0;r<t.length/2;r++)n.setUint8(r,parseInt(t.substr(2*r,2),16));return e},ArrayBuffertohex:function(t){for(var e="",n=new DataView(t),r=0;r<t.byteLength;r++)e+=("00"+n.getUint8(r).toString(16)).slice(-2);return e},zulutomsec:rc,zulutosec:ic,zulutodate:function(t){return new Date(rc(t))},datetozulu:function(t,e,n){var r,i=t.getUTCFullYear();if(e){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(t.getUTCMonth()+1)).slice(-2),r+=("0"+t.getUTCDate()).slice(-2),r+=("0"+t.getUTCHours()).slice(-2),r+=("0"+t.getUTCMinutes()).slice(-2),r+=("0"+t.getUTCSeconds()).slice(-2),n){var s=t.getUTCMilliseconds();0!==s&&(r+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},uricmptohex:sc,hextouricmp:oc,ipv6tohex:ac,hextoipv6:uc,hextoip:cc,iptohex:function(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return ac(t);throw e}var n=t.split(".");if(4!==n.length)throw e;var r="";try{for(var i=0;i<4;i++)r+=("0"+parseInt(n[i]).toString(16)).slice(-2);return r}catch(t){throw e}},encodeURIComponentAll:hc,newline_toUnix:function(t){return t.replace(/\r\n/gm,"\n")},newline_toDos:function(t){return(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},hextoposhex:lc,intarystrtohex:fc,strdiffidx:function(t,e){var n=t.length;t.length>e.length&&(n=e.length);for(var r=0;r<n;r++)if(t.charCodeAt(r)!=e.charCodeAt(r))return r;return t.length!=e.length?n:-1},KJUR:ju,crypto:ju.crypto,asn1:ju.asn1,jws:ju.jws,lang:ju.lang};!function(t){function e(t,e){Da.set(t,e,{expires:24,path:"/",domain:".crossroads.net"})}t.getCookie=function(t){return Da.get(t)},t.deleteCookie=function(t){return Da.remove(t,{path:"/",domain:".crossroads.net"})},t.setCookie=e,t.setNetlifyJWT=function(){const t=JSON.stringify({alg:"HS256",typ:"JWT"});var n=new Date;n.setHours(n.getHours()+24);const r=JSON.stringify({app_metadata:{authorization:{roles:["user"]}},exp:Math.floor(n.getTime()/1e3)});e("nf_jwt",wc.jws.JWS.sign("HS256",t,r,"netlifySecretThatsNotASecret"))}}(bc||(bc={}));function Sc(t){this.message=t}(Sc.prototype=new Error).name="InvalidCharacterError";var Ec="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Sc("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,s=0,o="";r=e.charAt(s++);~r&&(n=i%4?64*n+r:r,i++%4)?o+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};function xc(t){this.message=t}(xc.prototype=new Error).name="InvalidTokenError";var Ac=function(t,e){if("string"!=typeof t)throw new xc("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Ec(e).replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(t){return Ec(e)}}(t.split(".")[n]))}catch(t){throw new xc("Invalid token specified: "+t.message)}};Ac.InvalidTokenError=xc;class Fc{constructor(t,e,n){this.accessTokenCookie=t,this.refreshTokenCookie=e,this.issuer=n}authenticated(){let t=bc.getCookie(this.accessTokenCookie),e=bc.getCookie(this.refreshTokenCookie);if(t){var n=Ac(t);return Date.now()<=1e3*n.exp?Qo(Ra.From({access_token:{accessToken:t},refresh_token:e})):ua(this.authenticate(t,e))}return Qo(null)}async authenticate(t,e){try{var n=await ui.get(this.issuer,{headers:{Authorization:t,RefreshToken:e}});return(t=n.headers.sessionid)?(bc.setCookie(this.refreshTokenCookie,e=n.headers.refreshtoken),bc.setCookie(this.accessTokenCookie,t),Ra.From({access_token:{accessToken:t},refresh_token:e})):null}catch(t){return null}}signOut(){return bc.getCookie(this.accessTokenCookie)?(bc.deleteCookie(this.accessTokenCookie),bc.deleteCookie(this.refreshTokenCookie),Qo(!0)):Qo(!1)}}class Tc{constructor(t){this.on=t}Error(t,e){this.on&&(null!=e?console.error(`CRDS-OKTA-AUTH: ${t}`,e):console.error(`CRDS-OKTA-AUTH: ${t}`))}Warn(t,e){this.on&&(null!=e?console.warn(`CRDS-OKTA-AUTH: ${t}`,e):console.warn(`CRDS-OKTA-AUTH: ${t}`))}Info(t,e){this.on&&(null!=e?console.info(`CRDS-OKTA-AUTH: ${t}`,e):console.info(`CRDS-OKTA-AUTH: ${t}`))}Log(t,e){}}var Cc=H(function(t,e){var n=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:L);!function(t){!function(e){var n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function l(t){var e=new FileReader,n=h(e);return e.readAsArrayBuffer(t),n}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:n.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():n.arrayBuffer&&n.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=f(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,n,r=c(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=h(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=s(t),e=o(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},u.prototype.delete=function(t){delete this.map[s(t)]},u.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},u.prototype.set=function(t,e){this.map[s(t)]=o(e)},u.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},u.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),a(t)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),a(t)},u.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),a(t)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t,e){var n,r,i=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),p.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function y(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},d.call(g.prototype),d.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];y.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function b(t,r){return new Promise(function(i,s){var o=new g(t,r);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new u,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL"),i(new y("response"in a?a.response:a.responseText,n))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&n.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}b.polyfill=!0,t.fetch||(t.fetch=b,t.Headers=u,t.Request=g,t.Response=y),e.Headers=u,e.Request=g,e.Response=y,e.fetch=b}({})}(n),delete n.fetch.polyfill,(e=n.fetch).default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e}),kc=H(function(t){t.exports=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}return function e(n){function r(e,i,s){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(s=t({path:"/"},r.defaults,s)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}s.expires=s.expires?s.expires.toUTCString():"";try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(t){}i=n.write?n.write(i,e):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var u="";for(var c in s)s[c]&&(u+="; "+c,!0!==s[c]&&(u+="="+s[c]));return document.cookie=e+"="+i+u}e||(o={});for(var h=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,f=0;f<h.length;f++){var d=h[f].split("="),p=d.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var g=d[0].replace(l,decodeURIComponent);if(p=n.read?n.read(p,g):n(p,g)||p.replace(l,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(t){}if(e===g){o=p;break}e||(o[g]=p)}catch(t){}}return o}}return r.set=r,r.get=function(t){return r.call(r,t)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(e,n){r(e,"",t(n,{expires:-1}))},r.withConverter=e,r}(function(){})}()});function Ic(t,e){this.name="AuthSdkError",this.message=t,this.errorCode="INTERNAL",this.errorSummary=t,this.errorLink="INTERNAL",this.errorId="INTERNAL",this.errorCauses=[],e&&(this.xhr=e)}Ic.prototype=new Error;var Oc=Ic,Rc=function(t,e){if("string"!=typeof e||!e.length)throw new Oc('"storageName" is required');function n(){var n=t.getItem(e);n=n||"{}";try{return JSON.parse(n)}catch(t){throw new Oc("Unable to parse storage string: "+e)}}function r(n){try{var r=JSON.stringify(n);t.setItem(e,r)}catch(t){throw new Oc("Unable to set storage: "+e)}}return{getStorage:n,setStorage:r,clearStorage:function(t){t||r({});var e=n();delete e[t],r(e)},updateStorage:function(t,e){var i=n();i[t]=e,r(i)}}},Dc={STATE_TOKEN_KEY_NAME:"oktaStateToken",DEFAULT_POLLING_DELAY:500,DEFAULT_MAX_CLOCK_SKEW:300,DEFAULT_CACHE_DURATION:86400,FRAME_ID:"okta-oauth-helper-frame",REDIRECT_OAUTH_PARAMS_COOKIE_NAME:"okta-oauth-redirect-params",REDIRECT_STATE_COOKIE_NAME:"okta-oauth-state",REDIRECT_NONCE_COOKIE_NAME:"okta-oauth-nonce",TOKEN_STORAGE_NAME:"okta-token-storage",CACHE_STORAGE_NAME:"okta-cache-storage",PKCE_STORAGE_NAME:"okta-pkce-storage",SDK_VERSION:"2.8.0"},Nc={browserHasLocalStorage:function(){try{var t=Nc.getLocalStorage();return Nc.testStorage(t)}catch(t){return!1}},browserHasSessionStorage:function(){try{var t=Nc.getSessionStorage();return Nc.testStorage(t)}catch(t){return!1}},getPKCEStorage:function(){return Nc.browserHasLocalStorage()?Rc(Nc.getLocalStorage(),Dc.PKCE_STORAGE_NAME):Nc.browserHasSessionStorage()?Rc(Nc.getSessionStorage(),Dc.PKCE_STORAGE_NAME):Rc(Nc.getCookieStorage(),Dc.PKCE_STORAGE_NAME)},getHttpCache:function(){return Nc.browserHasLocalStorage()?Rc(Nc.getLocalStorage(),Dc.CACHE_STORAGE_NAME):Nc.browserHasSessionStorage()?Rc(Nc.getSessionStorage(),Dc.CACHE_STORAGE_NAME):Rc(Nc.getCookieStorage(),Dc.CACHE_STORAGE_NAME)},getLocalStorage:function(){return localStorage},getSessionStorage:function(){return sessionStorage},getCookieStorage:function(t){return t=t||{},{getItem:Nc.storage.get,setItem:function(e,n){Nc.storage.set(e,n,"2200-01-01T00:00:00.000Z",t.secure)}}},testStorage:function(t){var e="okta-test-storage";try{return t.setItem(e,e),t.removeItem(e),!0}catch(t){return!1}}};Nc.storage={set:function(t,e,n,r){var i={path:"/",secure:r};return Date.parse(n)&&(i.expires=new Date(n)),kc.set(t,e,i),Nc.storage.get(t)},get:function(t){return kc.get(t)},delete:function(t){return kc.remove(t,{path:"/"})}};var _c=Nc;H(function(t,e){!function(){var t=e,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(t){this.message=t}(r.prototype=new Error).name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var e,i,s=String(t),o=0,a=n,u="";s.charAt(0|o)||(a="=",o%1);u+=a.charAt(63&e>>8-o%1*8)){if((i=s.charCodeAt(o+=.75))>255)throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|i}return u}),t.atob||(t.atob=function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,o=0,a=0,u="";s=e.charAt(a++);~s&&(i=o%4?64*i+s:s,o++%4)?u+=String.fromCharCode(255&i>>(-2*o&6)):0)s=n.indexOf(s);return u})}()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var s=+e||0;if(Math.abs(s)===1/0&&(s=0),s>=i)return-1;for(n=Math.max(s>=0?s:i-Math.abs(s),0);n<i;){if(n in r&&r[n]===t)return n;n++}return-1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var Pc=H(function(t){var e=t.exports;e.stringToBase64Url=function(t){var n=btoa(t);return e.base64ToBase64Url(n)},e.base64ToBase64Url=function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.base64UrlToBase64=function(t){return t.replace(/-/g,"+").replace(/_/g,"/")},e.base64UrlToString=function(t){var n=e.base64UrlToBase64(t);switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Not a valid Base64Url"}var r=atob(n);try{return decodeURIComponent(escape(r))}catch(t){return r}},e.stringToBuffer=function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},e.base64UrlDecode=function(t){return atob(e.base64UrlToBase64(t))},e.bind=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return r=n.concat(r),t.apply(e,r)}},e.isAbsoluteUrl=function(t){return/^(?:[a-z]+:)?\/\//i.test(t)},e.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)},e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isoToUTCString=function(t){var e=t.match(/\d+/g),n=Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5]);return new Date(n).toUTCString()},e.toQueryParams=function(t){var e=[];if(null!==t)for(var n in t)t.hasOwnProperty(n)&&null!=t[n]&&e.push(n+"="+encodeURIComponent(t[n]));return e.length?"?"+e.join("&"):""},e.genRandomString=function(t){for(var e="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",r=0,i=e.length;r<t;++r)n+=e[Math.floor(Math.random()*i)];return n},e.extend=function(){var t=arguments[0];return[].slice.call(arguments,1).forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t[n]=e[n])}),t},e.removeNils=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(e[n]=r)}return e},e.clone=function(t){if(t){var e=JSON.stringify(t);if(e)return JSON.parse(e)}return t},e.omit=function(t){var n=Array.prototype.slice.call(arguments,1),r={};for(var i in t)t.hasOwnProperty(i)&&-1==n.indexOf(i)&&(r[i]=t[i]);return e.clone(r)},e.find=function(t,e){for(var n=t.length;n--;){var r=t[n],i=!0;for(var s in e)if(e.hasOwnProperty(s)&&r[s]!==e[s]){i=!1;break}if(i)return r}},e.getLink=function(t,n,r){if(t&&t._links){var i=e.clone(t._links[n]);return i&&i.name&&r?i.name===r?i:void 0:i}},e.getNativeConsole=function(){return"undefined"!=typeof window?window.console:"undefined"!=typeof console?console:void 0},e.getConsole=function(){var t=e.getNativeConsole();return t&&t.log?t:{log:function(){}}},e.warn=function(t){e.getConsole().log("[okta-auth-sdk] WARN: "+t)},e.deprecate=function(t){e.getConsole().log("[okta-auth-sdk] DEPRECATION: "+t)},e.deprecateWrap=function(t,n){return function(){return e.deprecate(t),n.apply(null,arguments)}},e.removeTrailingSlash=function(t){if(t){var e=t.replace(/^\s+|\s+$/gm,"");return"/"===e.slice(-1)?e.slice(0,-1):e}},e.isIE11OrLess=function(){return!!document.documentMode&&document.documentMode<=11},e.isFunction=function(t){return!!t&&"[object Function]"==={}.toString.call(t)}}),jc=H(function(t){var e;e=function(){var t=!1;try{throw new Error}catch(e){t=!!e.stack}var e,n=w(),r=function(){},i=function(){var t={task:void 0,next:null},e=t,n=!1,r=void 0,s=!1,o=[];function a(){for(var e,r;t.next;)e=(t=t.next).task,t.task=void 0,(r=t.domain)&&(t.domain=void 0,r.enter()),u(e,r);for(;o.length;)u(e=o.pop());n=!1}function u(t,e){try{t()}catch(t){if(s)throw e&&e.exit(),setTimeout(a,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}if(i=function(t){e=e.next={task:t,domain:s&&St.domain,next:null},n||(n=!0,r())},"object"==typeof St&&"[object process]"===St.toString()&&ut)s=!0,r=function(){ut(a)};else if("function"==typeof setImmediate)r="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){r=h,c.port1.onmessage=a,a()};var h=function(){c.port2.postMessage(0)};r=function(){setTimeout(a,0),h()}}else r=function(){setTimeout(a,0)};return i.runAfter=function(t){o.push(t),n||(n=!0,r())},i}(),s=Function.call;function o(t){return function(){return s.apply(t,arguments)}}var a,u=o(Array.prototype.slice),c=o(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),h=o(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),l=o(Array.prototype.map||function(t,e){var n=this,r=[];return c(n,function(i,s,o){r.push(t.call(e,s,o,n))},void 0),r}),f=Object.create||function(t){function e(){}return e.prototype=t,new e},d=o(Object.prototype.hasOwnProperty),p=Object.keys||function(t){var e=[];for(var n in t)d(t,n)&&e.push(n);return e},g=o(Object.prototype.toString);a="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var v="From previous event:";function y(e,n){if(t&&n.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(v)){for(var r=[],i=n;i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(e.stack);var s=r.join("\n"+v+"\n");e.stack=function(){for(var t=s.split("\n"),e=[],n=0;n<t.length;++n){var r=t[n];!b(r)&&-1===(i=r).indexOf("(module.js:")&&-1===i.indexOf("(node.js:")&&r&&e.push(r)}var i;return e.join("\n")}()}}function m(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function b(t){var r=m(t);if(!r)return!1;var i=r[1];return r[0]===e&&i>=n&&i<=q}function w(){if(t)try{throw new Error}catch(t){var n=t.stack.split("\n"),r=m(n[0].indexOf("@")>0?n[1]:n[2]);if(!r)return;return e=r[0],r[1]}}function S(t){return t instanceof F?t:I(t)?function(t){var e=E();return S.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}(t):B(t)}function E(){var e,n=[],r=[],i=f(E.prototype),s=f(F.prototype);if(s.promiseDispatch=function(t,i,s){var o=u(arguments);n?(n.push(o),"when"===i&&s[1]&&r.push(s[1])):S.nextTick(function(){e.promiseDispatch.apply(e,o)})},s.valueOf=function(){if(n)return s;var t=C(e);return k(t)&&(e=t),t},s.inspect=function(){return e?e.inspect():{state:"pending"}},S.longStackSupport&&t)try{throw new Error}catch(t){s.stack=t.stack.substring(t.stack.indexOf("\n")+1)}function o(t){e=t,s.source=t,c(n,function(e,n){S.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}return i.promise=s,i.resolve=function(t){e||o(S(t))},i.fulfill=function(t){e||o(B(t))},i.reject=function(t){e||o(j(t))},i.notify=function(t){e||c(r,function(e,n){S.nextTick(function(){n(t)})},void 0)},i}function x(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=E();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function A(t){return x(function(e,n){for(var r=0,i=t.length;r<i;r++)S(t[r]).then(e,n)})}function F(t,e,n){void 0===e&&(e=function(t){return j(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=f(F.prototype);if(r.promiseDispatch=function(n,i,s){var o;try{o=t[i]?t[i].apply(r,s):e.call(r,i,s)}catch(t){o=j(t)}n&&n(o)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function T(t,e,n,r){return S(t).then(e,n,r)}function C(t){if(k(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function k(t){return t instanceof F}function I(t){return(e=t)===Object(e)&&"function"==typeof t.then;var e}S.resolve=S,S.nextTick=i,S.longStackSupport=!1,"object"==typeof St&&St&&St.env&&St.env.Q_DEBUG&&(S.longStackSupport=!0),S.defer=E,E.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):t.resolve(arguments.length>2?u(arguments,1):n)}},S.Promise=x,S.promise=x,x.race=A,x.all=M,x.reject=j,x.resolve=S,S.passByCopy=function(t){return t},F.prototype.passByCopy=function(){return this},S.join=function(t,e){return S(t).join(e)},F.prototype.join=function(t){return S([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},S.race=A,F.prototype.race=function(){return this.then(S.race)},S.makePromise=F,F.prototype.toString=function(){return"[object Promise]"},F.prototype.then=function(t,e,n){var r=this,i=E(),s=!1;return S.nextTick(function(){r.promiseDispatch(function(e){s||(s=!0,i.resolve(function(e){try{return"function"==typeof t?t(e):e}catch(t){return j(t)}}(e)))},"when",[function(t){s||(s=!0,i.resolve(function(t){if("function"==typeof e){y(t,r);try{return e(t)}catch(t){return j(t)}}return j(t)}(t)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(t){var e,r=!1;try{e=function(t){return"function"==typeof n?n(t):t}(t)}catch(t){if(r=!0,!S.onerror)throw t;S.onerror(t)}r||i.notify(e)}]),i.promise},S.tap=function(t,e){return S(t).tap(e)},F.prototype.tap=function(t){return t=S(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},S.when=T,F.prototype.thenResolve=function(t){return this.then(function(){return t})},S.thenResolve=function(t,e){return S(t).thenResolve(e)},F.prototype.thenReject=function(t){return this.then(function(){throw t})},S.thenReject=function(t,e){return S(t).thenReject(e)},S.nearer=C,S.isPromise=k,S.isPromiseAlike=I,S.isPending=function(t){return k(t)&&"pending"===t.inspect().state},F.prototype.isPending=function(){return"pending"===this.inspect().state},S.isFulfilled=function(t){return!k(t)||"fulfilled"===t.inspect().state},F.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},S.isRejected=function(t){return k(t)&&"rejected"===t.inspect().state},F.prototype.isRejected=function(){return"rejected"===this.inspect().state};var O,R=[],D=[],N=[],_=!0;function P(){R.length=0,D.length=0,_||(_=!0)}function j(t){var e=F({when:function(e){return e&&function(t){if(_){var e=h(D,t);-1!==e&&("object"==typeof St&&"function"==typeof St.emit&&S.nextTick.runAfter(function(){var n=h(N,t);-1!==n&&(St.emit("rejectionHandled",R[e],t),N.splice(n,1))}),D.splice(e,1),R.splice(e,1))}}(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return function(t,e){_&&("object"==typeof St&&"function"==typeof St.emit&&S.nextTick.runAfter(function(){-1!==h(D,t)&&(St.emit("unhandledRejection",e,t),N.push(t))}),D.push(t),R.push(e&&void 0!==e.stack?e.stack:"(no stack) "+e))}(e,t),e}function B(t){return F({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null==e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return p(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function L(t,e,n){return S(t).spread(e,n)}function H(t,e,n){return S(t).dispatch(e,n)}function M(t){return T(t,function(t){var e=0,n=E();return c(t,function(r,i,s){var o;k(i)&&"fulfilled"===(o=i.inspect()).state?t[s]=o.value:(++e,T(i,function(r){t[s]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:s,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function V(t){if(0===t.length)return S.resolve();var e=S.defer(),n=0;return c(t,function(r,i,s){n++,T(t[s],function(t){e.resolve(t)},function(){0==--n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))},function(t){e.notify({index:s,value:t})})},void 0),e.promise}function U(t){return T(t,function(t){return t=l(t,S),T(M(l(t,function(t){return T(t,r,r)})),function(){return t})})}S.resetUnhandledRejections=P,S.getUnhandledReasons=function(){return R.slice()},S.stopUnhandledRejectionTracking=function(){P(),_=!1},P(),S.reject=j,S.fulfill=B,S.master=function(t){return F({isDef:function(){}},function(e,n){return H(t,e,n)},function(){return S(t).inspect()})},S.spread=L,F.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},S.async=function(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(t){return j(t)}return s.done?S(s.value):T(s.value,r,i)}try{s=n[t](e)}catch(t){return function(t){return"[object StopIteration]"===g(t)||t instanceof a}(t)?S(t.value):j(t)}return T(s,r,i)}var n=t.apply(this,arguments),r=e.bind(e,"next"),i=e.bind(e,"throw");return r()}},S.spawn=function(t){S.done(S.async(t)())},S.return=function(t){throw new a(t)},S.promised=function(t){return function(){return L([this,M(arguments)],function(e,n){return t.apply(e,n)})}},S.dispatch=H,F.prototype.dispatch=function(t,e){var n=this,r=E();return S.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},S.get=function(t,e){return S(t).dispatch("get",[e])},F.prototype.get=function(t){return this.dispatch("get",[t])},S.set=function(t,e,n){return S(t).dispatch("set",[e,n])},F.prototype.set=function(t,e){return this.dispatch("set",[t,e])},S.del=S.delete=function(t,e){return S(t).dispatch("delete",[e])},F.prototype.del=F.prototype.delete=function(t){return this.dispatch("delete",[t])},S.mapply=S.post=function(t,e,n){return S(t).dispatch("post",[e,n])},F.prototype.mapply=F.prototype.post=function(t,e){return this.dispatch("post",[t,e])},S.send=S.mcall=S.invoke=function(t,e){return S(t).dispatch("post",[e,u(arguments,2)])},F.prototype.send=F.prototype.mcall=F.prototype.invoke=function(t){return this.dispatch("post",[t,u(arguments,1)])},S.fapply=function(t,e){return S(t).dispatch("apply",[void 0,e])},F.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},S.try=S.fcall=function(t){return S(t).dispatch("apply",[void 0,u(arguments,1)])},F.prototype.fcall=function(){return this.dispatch("apply",[void 0,u(arguments)])},S.fbind=function(t){var e=S(t),n=u(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(u(arguments))])}},F.prototype.fbind=function(){var t=this,e=u(arguments);return function(){return t.dispatch("apply",[this,e.concat(u(arguments))])}},S.keys=function(t){return S(t).dispatch("keys",[])},F.prototype.keys=function(){return this.dispatch("keys",[])},S.all=M,F.prototype.all=function(){return M(this)},S.any=V,F.prototype.any=function(){return V(this)},S.allResolved=(O=U,"allResolved","allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("allResolved is deprecated, use allSettled instead.",new Error("").stack),O.apply(O,arguments)}),F.prototype.allResolved=function(){return U(this)},S.allSettled=function(t){return S(t).allSettled()},F.prototype.allSettled=function(){return this.then(function(t){return M(l(t,function(t){function e(){return t.inspect()}return(t=S(t)).then(e,e)}))})},S.fail=S.catch=function(t,e){return S(t).then(void 0,e)},F.prototype.fail=F.prototype.catch=function(t){return this.then(void 0,t)},S.progress=function(t,e){return S(t).then(void 0,void 0,e)},F.prototype.progress=function(t){return this.then(void 0,void 0,t)},S.fin=S.finally=function(t,e){return S(t).finally(e)},F.prototype.fin=F.prototype.finally=function(t){return t=S(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},S.done=function(t,e,n,r){return S(t).done(e,n,r)},F.prototype.done=function(t,e,n){var r=function(t){S.nextTick(function(){if(y(t,i),!S.onerror)throw t;S.onerror(t)})},i=t||e||n?this.then(t,e,n):this;"object"==typeof St&&St&&St.domain&&(r=St.domain.bind(r)),i.then(void 0,r)},S.timeout=function(t,e,n){return S(t).timeout(e,n)},F.prototype.timeout=function(t,e){var n=E(),r=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},S.delay=function(t,e){return void 0===e&&(e=t,t=void 0),S(t).delay(e)},F.prototype.delay=function(t){return this.then(function(e){var n=E();return setTimeout(function(){n.resolve(e)},t),n.promise})},S.nfapply=function(t,e){return S(t).nfapply(e)},F.prototype.nfapply=function(t){var e=E(),n=u(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},S.nfcall=function(t){var e=u(arguments,1);return S(t).nfapply(e)},F.prototype.nfcall=function(){var t=u(arguments),e=E();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},S.nfbind=S.denodeify=function(t){var e=u(arguments,1);return function(){var n=e.concat(u(arguments)),r=E();return n.push(r.makeNodeResolver()),S(t).fapply(n).fail(r.reject),r.promise}},F.prototype.nfbind=F.prototype.denodeify=function(){var t=u(arguments);return t.unshift(this),S.denodeify.apply(void 0,t)},S.nbind=function(t,e){var n=u(arguments,2);return function(){var r=n.concat(u(arguments)),i=E();return r.push(i.makeNodeResolver()),S(function(){return t.apply(e,arguments)}).fapply(r).fail(i.reject),i.promise}},F.prototype.nbind=function(){var t=u(arguments,0);return t.unshift(this),S.nbind.apply(void 0,t)},S.nmapply=S.npost=function(t,e,n){return S(t).npost(e,n)},F.prototype.nmapply=F.prototype.npost=function(t,e){var n=u(e||[]),r=E();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},S.nsend=S.nmcall=S.ninvoke=function(t,e){var n=u(arguments,2),r=E();return n.push(r.makeNodeResolver()),S(t).dispatch("post",[e,n]).fail(r.reject),r.promise},F.prototype.nsend=F.prototype.nmcall=F.prototype.ninvoke=function(t){var e=u(arguments,1),n=E();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},S.nodeify=function(t,e){return S(t).nodeify(e)},F.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){S.nextTick(function(){t(null,e)})},function(e){S.nextTick(function(){t(e)})})},S.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var q=w();return S},"function"==typeof bootstrap?bootstrap("promise",e):t.exports=e()});function Bc(t,e){this.name="AuthApiError",this.message=t.errorSummary,this.errorSummary=t.errorSummary,this.errorCode=t.errorCode,this.errorLink=t.errorLink,this.errorId=t.errorId,this.errorCauses=t.errorCauses,e&&(this.xhr=e)}Bc.prototype=new Error;var Lc=Bc;function Hc(t,e){var n=(e=e||{}).url,r=e.method,i=e.args,s=e.saveAuthnState,o=e.accessToken,a=!1!==e.withCredentials,u=t.options.storageUtil,c=u.storage,h=u.getHttpCache();if(e.cacheResponse){var l=h.getStorage()[n];if(l&&Date.now()/1e3<l.expiresAt)return jc.resolve(l.response)}var f,d,p={Accept:"application/json","Content-Type":"application/json","X-Okta-User-Agent-Extended":t.userAgent};return Pc.extend(p,t.options.headers,e.headers),o&&Pc.isString(o)&&(p.Authorization="Bearer "+o),new jc(t.options.httpRequestClient(r,n,{headers:p,data:i||void 0,withCredentials:a})).then(function(t){return(d=t.responseText)&&Pc.isString(d)&&(d=JSON.parse(d)),s&&(d.stateToken||c.delete(Dc.STATE_TOKEN_KEY_NAME)),d&&d.stateToken&&d.expiresAt&&c.set(Dc.STATE_TOKEN_KEY_NAME,d.stateToken,d.expiresAt),d&&e.cacheResponse&&h.updateStorage(n,{expiresAt:Math.floor(Date.now()/1e3)+Dc.DEFAULT_CACHE_DURATION,response:d}),d}).fail(function(e){var n=e.responseText||{};if(Pc.isString(n))try{n=JSON.parse(n)}catch(t){n={errorSummary:"Unknown error"}}throw e.status>=500&&(n.errorSummary="Unknown error"),t.options.transformErrorXHR&&(e=t.options.transformErrorXHR(Pc.clone(e))),"E0000011"===(f=new Lc(n,e)).errorCode&&c.delete(Dc.STATE_TOKEN_KEY_NAME),f})}var Mc={get:function(t,e,n){var r={url:e=Pc.isAbsoluteUrl(e)?e:t.options.url+e,method:"GET"};return Pc.extend(r,n),Hc(t,r)},post:function(t,e,n,r){var i={url:e=Pc.isAbsoluteUrl(e)?e:t.options.url+e,method:"POST",args:n,saveAuthnState:!0};return Pc.extend(i,r),Hc(t,i)},httpRequest:Hc};function Vc(){this.name="AuthPollStopError",this.message="The poll was stopped by the sdk"}Vc.prototype=new Error;var Uc=Vc;function qc(t,e){var n={};return Pc.extend(n,e),!n.stateToken&&t.stateToken&&(n.stateToken=t.stateToken),n}function Kc(t,e,n,r){return Mc.post(t,e,n,r).then(function(e){return new Wc(t,e)})}function zc(t,e,n){return function(r){var i,s,o;Pc.isNumber(r)?i=r:Pc.isObject(r)&&(i=r.delay,s=r.rememberDevice,o=r.autoPush),i||0===i||(i=Dc.DEFAULT_POLLING_DELAY);var a=Pc.getLink(e,"next","poll");n.isPolling=!0;var u=0,c=function(){return n.isPolling?function(){var n={};if("function"==typeof o)try{n.autoPush=!!o()}catch(t){return jc.reject(new Oc("AutoPush resulted in an error."))}else null!=o&&(n.autoPush=!!o);if("function"==typeof s)try{n.rememberDevice=!!s()}catch(t){return jc.reject(new Oc("RememberDevice resulted in an error."))}else null!=s&&(n.rememberDevice=!!s);var r=a.href+Pc.toQueryParams(n);return Mc.post(t,r,function(t){return qc(t)}(e),{saveAuthnState:!1})}().then(function(e){if(u=0,e.factorResult&&"WAITING"===e.factorResult){if(!n.isPolling)throw new Uc;return jc.delay(i).then(c)}return n.isPolling=!1,new Wc(t,e)}).fail(function(t){if(t.xhr&&(0===t.xhr.status||429===t.xhr.status)&&u<=4){var e=1e3*Math.pow(2,u);return u++,jc.delay(e).then(c)}throw t}):jc.reject(new Uc)};return c().fail(function(t){throw n.isPolling=!1,t})}}function Qc(t,e,n,r,i){if(Array.isArray(r))return function(s,o){if(!s)throw new Oc("Must provide a link name");var a=Pc.find(r,{name:s});if(!a)throw new Oc("No link found for that name");return Qc(t,e,n,a,i)(o)};if(r.hints&&r.hints.allow&&1===r.hints.allow.length)switch(r.hints.allow[0]){case"GET":return function(){return Mc.get(t,r.href)};case"POST":return function(s){i&&i.isPolling&&(i.isPolling=!1);var o=qc(e,s);"MFA_ENROLL"!==e.status&&"FACTOR_ENROLL"!==e.status||Pc.extend(o,{factorType:n.factorType,provider:n.provider});var a={},u=o.autoPush;if(void 0!==u){if("function"==typeof u)try{a.autoPush=!!u()}catch(t){return jc.reject(new Oc("AutoPush resulted in an error."))}else null!==u&&(a.autoPush=!!u);o=Pc.omit(o,"autoPush")}var c=o.rememberDevice;if(void 0!==c){if("function"==typeof c)try{a.rememberDevice=!!c()}catch(t){return jc.reject(new Oc("RememberDevice resulted in an error."))}else null!==c&&(a.rememberDevice=!!c);o=Pc.omit(o,"rememberDevice")}else o.profile&&void 0!==o.profile.updatePhone&&(o.profile.updatePhone&&(a.updatePhone=!0),o.profile=Pc.omit(o.profile,"updatePhone"));var h=r.href+Pc.toQueryParams(a);return Kc(t,h,o)}}}function Wc(t,e){e&&(this.data=e,Pc.extend(this,function t(e,n,r,i){if(r=Pc.clone(r=r||n),Array.isArray(r)){for(var s=[],o=0,a=r.length;o<a;o++)s.push(t(e,n,r[o],i));return s}var u=r._embedded||{};for(var c in u)u.hasOwnProperty(c)&&(Pc.isObject(u[c])||Array.isArray(u[c]))&&(u[c]=t(e,n,u[c],i));var h=function(t,e,n,r){var i={};for(var s in n._links)if(n._links.hasOwnProperty(s)){var o=n._links[s];if("next"===s&&(s=o.name),o.type)i[s]=o;else switch(s){case"poll":i.poll=zc(t,e,r);break;default:var a=Qc(t,e,n,o,r);a&&(i[s]=a)}}return i}(e,n,r,i);return Pc.extend(u,h),r=Pc.omit(r,"_embedded","_links"),Pc.extend(r,u),r}(t,e,e,{})),delete this.stateToken,"RECOVERY_CHALLENGE"!==e.status||e._links||(this.cancel=function(){return new jc(new Wc(t))}))}var $c={transactionStatus:function(t,e){return e=qc(t,e),Mc.post(t,t.options.url+"/api/v1/authn",e)},resumeTransaction:function(t,e){if(!e||!e.stateToken){var n=t.tx.exists._get(Dc.STATE_TOKEN_KEY_NAME);if(!n)return jc.reject(new Oc("No transaction to resume"));e={stateToken:n}}return t.tx.status(e).then(function(e){return new Wc(t,e)})},transactionExists:function(t){return!!t.tx.exists._get(Dc.STATE_TOKEN_KEY_NAME)},postToTransaction:Kc,introspect:function(t,e){if(!e||!e.stateToken){var n=t.tx.exists._get(Dc.STATE_TOKEN_KEY_NAME);if(!n)return jc.reject(new Oc("No transaction to evaluate"));e={stateToken:n}}return function(t,e){return e=qc(t,e),Mc.post(t,t.options.url+"/idp/idx/introspect",e)}(t,e).then(function(e){return new Wc(t,e)})}},Yc={addSharedPrototypes:function(t){t.forgotPassword=function(t){return $c.postToTransaction(this,"/api/v1/authn/recovery/password",t)},t.unlockAccount=function(t){return $c.postToTransaction(this,"/api/v1/authn/recovery/unlock",t)},t.verifyRecoveryToken=function(t){return $c.postToTransaction(this,"/api/v1/authn/recovery/token",t)}},buildOktaAuth:function(t){return function(e,n){function r(i){if(!(this instanceof r))return new r(i);i&&(i.storageUtil=e,i.ajaxRequest?(Pc.deprecate("ajaxRequest is being deprecated, use httpRequestClient attribute instead."),i.httpRequestClient=i.ajaxRequest):i.httpRequestClient||(i.httpRequestClient=n)),Pc.bind(t,this)(i)}return(r.prototype=t.prototype).constructor=r,r.features=t.prototype.features,r}},getValidUrl:function(t){if(!t)throw new Oc("No arguments passed to constructor. Required usage: new OktaAuth(args)");var e=t.url;if(!e){var n=new RegExp("^http?s?://.+");if(!t.issuer||!n.test(t.issuer))throw new Oc('No url passed to constructor. Required usage: new OktaAuth({url: "https://{yourOktaDomain}.com"})');e=t.issuer.split("/oauth2/")[0]}if(-1!==e.indexOf("-admin."))throw new Oc('URL passed to constructor contains "-admin" in subdomain. Required usage: new OktaAuth({url: "https://{yourOktaDomain}.com})');return e}},Gc=_c.getHttpCache();function Jc(t,e){return Mc.get(t,(e||t.options.url)+"/.well-known/openid-configuration",{cacheResponse:!0})}var Xc={generateState:function(){return Pc.genRandomString(64)},generateNonce:function(){return Pc.genRandomString(64)},getWellKnown:Jc,getKey:function(t,e,n){return Jc(t,e).then(function(e){var r=e.jwks_uri,i=Gc.getStorage()[r];if(i&&Date.now()/1e3<i.expiresAt){var s=Pc.find(i.response.keys,{kid:n});if(s)return s}return Gc.clearStorage(r),Mc.get(t,r,{cacheResponse:!0}).then(function(t){var e=Pc.find(t.keys,{kid:n});if(e)return e;throw new Oc("The key id, "+n+", was not found in the server's keys")})})},validateClaims:function(t,e,n){var r=n.clientId,i=n.issuer,s=n.nonce;if(!e||!i||!r)throw new Oc("The jwt, iss, and aud arguments are all required");if(s&&e.nonce!==s)throw new Oc("OAuth flow response nonce doesn't match request nonce");var o=Math.floor(Date.now()/1e3);if(e.iss!==i)throw new Oc("The issuer ["+e.iss+"] does not match ["+i+"]");if(e.aud!==r)throw new Oc("The audience ["+e.aud+"] does not match ["+r+"]");if(e.iat>e.exp)throw new Oc("The JWT expired before it was issued");if(o-t.options.maxClockSkew>e.exp)throw new Oc("The JWT expired and is no longer valid");if(e.iat>o+t.options.maxClockSkew)throw new Oc("The JWT was issued in the future")},getOAuthUrls:function(t,e,n){var r=Pc.removeTrailingSlash((n=n||{}).authorizeUrl)||t.options.authorizeUrl,i=Pc.removeTrailingSlash(n.issuer)||t.options.issuer,s=Pc.removeTrailingSlash(n.userinfoUrl)||t.options.userinfoUrl,o=Pc.removeTrailingSlash(n.tokenUrl)||t.options.tokenUrl;if(i&&!/^https?:/.test(i)&&(i=t.options.url+"/oauth2/"+i),!i&&r&&-1!==e.responseType.indexOf("id_token"))throw new Oc("Cannot request idToken with an authorizeUrl without an issuer");if(!i&&-1!==e.responseType.indexOf("token")){if(r&&!s)throw new Oc("Cannot request accessToken with an authorizeUrl without an issuer or userinfoUrl");if(s&&!r)throw new Oc("Cannot request token with an userinfoUrl without an issuer or authorizeUrl")}return new RegExp("^https?://.*?/oauth2/.+").test(i=i||t.options.url)?(r=r||i+"/v1/authorize",s=s||i+"/v1/userinfo",o=o||i+"/v1/token"):(r=r||i+"/oauth2/v1/authorize",s=s||i+"/oauth2/v1/userinfo",o=o||i+"/oauth2/v1/token"),{issuer:i,authorizeUrl:r,userinfoUrl:s,tokenUrl:o}},loadFrame:function(t){var e=document.createElement("iframe");return e.style.display="none",e.src=t,document.body.appendChild(e)},loadPopup:function(t,e){var n=e.popupTitle||"External Identity Provider User Authentication",r="toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600";if(Pc.isIE11OrLess()){var i=window.open("/",n,r);return i.location.href=t,i}return window.open(t,n,r)},hashToObject:function(t){for(var e,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=t.substring(1),s={};e=r.exec(i);){var o=e[1],a=e[2];s[o]="id_token"===o||"access_token"===o||"code"===o?a:decodeURIComponent(a.replace(n," "))}return s},isToken:function(t){return!(!t||!t.accessToken&&!t.idToken||!Array.isArray(t.scopes))},addListener:function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,n)},removeListener:function(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n)}},Zc={sessionExists:function(t){return t.session.get().then(function(t){return"ACTIVE"===t.status}).fail(function(){return!1})},getSession:function(t){return Mc.get(t,"/api/v1/sessions/me").then(function(e){var n=Pc.omit(e,"_links");return n.refresh=function(){return Mc.post(t,Pc.getLink(e,"refresh").href)},n.user=function(){return Mc.get(t,Pc.getLink(e,"user").href)},n}).fail(function(){return{status:"INACTIVE"}})},closeSession:function(t){return Mc.httpRequest(t,{url:t.options.url+"/api/v1/sessions/me",method:"DELETE"})},refreshSession:function(t){return Mc.post(t,"/api/v1/sessions/me/lifecycle/refresh")},setCookieAndRedirect:function(t,e,n){n=n||window.location.href,window.location=t.options.url+"/login/sessionCookieRedirect"+Pc.toQueryParams({checkAccountSetupComplete:!0,token:e,redirectUrl:n})}},th={verifyToken:function(t,e){e=Pc.clone(e);var n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};return delete e.use,crypto.subtle.importKey("jwk",e,n,!0,["verify"]).then(function(e){var r=t.split("."),i=Pc.stringToBuffer(r[0]+"."+r[1]),s=Pc.base64UrlDecode(r[2]),o=Pc.stringToBuffer(s);return crypto.subtle.verify(n,e,o,i)})}};function eh(t,e){this.name="OAuthError",this.message=e,this.errorCode=t,this.errorSummary=e}eh.prototype=new Error;var nh=eh;function rh(t){return("0"+t.toString(16)).substr(-2)}var ih={DEFAULT_CODE_CHALLENGE_METHOD:"S256",generateVerifier:function(t){var e,n,r=t||"";return r.length<43&&(r+=(e=43-r.length,n=new Uint8Array(Math.ceil(e/2)),crypto.getRandomValues(n),Array.from(n,rh).join("").slice(0,e))),encodeURIComponent(r).slice(0,128)},clearMeta:function(t){t.options.storageUtil.getPKCEStorage().clearStorage()},saveMeta:function(t,e){t.options.storageUtil.getPKCEStorage().setStorage(e)},loadMeta:function(t){return t.options.storageUtil.getPKCEStorage().getStorage()},computeChallenge:function(t){var e=(new TextEncoder).encode(t);return crypto.subtle.digest("SHA-256",e).then(function(t){var e=String.fromCharCode.apply(null,new Uint8Array(t));return Pc.stringToBase64Url(e)})},getToken:function(t,e,n){!function(t){if(!t.clientId)throw new Oc("A clientId must be specified in the OktaAuth constructor to get a token");if(!t.redirectUri)throw new Oc("The redirectUri passed to /authorize must also be passed to /token");if(!t.authorizationCode)throw new Oc("An authorization code (returned from /authorize) must be passed to /token");if(!t.codeVerifier)throw new Oc('The "codeVerifier" (generated and saved by your app) must be passed to /token')}(e);var r,i,s=(i=Pc.removeNils({client_id:(r=e).clientId,redirect_uri:r.redirectUri,grant_type:"authorization_code",code:r.authorizationCode,code_verifier:r.codeVerifier}),Pc.toQueryParams(i).slice(1));return Mc.httpRequest(t,{url:n.tokenUrl,method:"POST",args:s,withCredentials:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},sh=_c.storage;function oh(t){var e,n=t.split(".");try{e={header:JSON.parse(Pc.base64UrlToString(n[0])),payload:JSON.parse(Pc.base64UrlToString(n[1])),signature:n[2]}}catch(t){throw new Oc("Malformed token")}return e}function ah(t,e,n){return(new jc).then(function(){if(!e||!e.idToken)throw new Oc("Only idTokens may be verified");var r=oh(e.idToken),i={clientId:t.options.clientId,issuer:t.options.issuer||t.options.url,ignoreSignature:t.options.ignoreSignature};return Pc.extend(i,n),Xc.validateClaims(t,r.payload,i),1!=i.ignoreSignature&&t.features.isTokenVerifySupported()?Xc.getKey(t,e.issuer,r.header.kid).then(function(t){return th.verifyToken(e.idToken,t)}).then(function(t){if(!t)throw new Oc("The token signature is not valid");return e}):e})}function uh(t,e,n){var r=jc.defer();function i(e){!e.data||e.origin!==t.options.url||e.data&&Pc.isString(n)&&e.data.state!==n||r.resolve(e.data)}return Xc.addListener(window,"message",i),r.promise.timeout(e||12e4,new Oc("OAuth flow timed out")).fin(function(){Xc.removeListener(window,"message",i)})}function ch(t,e){if(t.error||t.error_description)throw new nh(t.error,t.error_description);if(t.state!==e.state)throw new Oc("OAuth flow response state doesn't match request state")}function hh(t,e,n,r){r=r||{};var i=e.responseType,s=Pc.clone(e.scopes),o=e.clientId||t.options.clientId;return(new jc).then(function(){return ch(n,e),n.code?(i=["token","id_token"],function(t,e,n,r){var i=ih.loadMeta(t),s={clientId:e.clientId,authorizationCode:n,codeVerifier:i.codeVerifier,redirectUri:i.redirectUri};return ih.getToken(t,s,r).then(function(t){return ch(t,s),t}).fin(function(){ih.clearMeta(t)})}(t,e,n.code,r)):n}).then(function(n){var i={};if(n.access_token&&(i.token={accessToken:n.access_token,expiresAt:Number(n.expires_in)+Math.floor(Date.now()/1e3),tokenType:n.token_type,scopes:s,authorizeUrl:r.authorizeUrl,userinfoUrl:r.userinfoUrl}),n.id_token){var a=t.token.decode(n.id_token),u={idToken:n.id_token,claims:a.payload,expiresAt:a.payload.exp,scopes:s,authorizeUrl:r.authorizeUrl,issuer:r.issuer,clientId:o},c={clientId:o,issuer:r.issuer,nonce:e.nonce};return void 0!==e.ignoreSignature&&(c.ignoreSignature=e.ignoreSignature),ah(t,u,c).then(function(){return i.id_token=u,i})}return i}).then(function(t){return Array.isArray(i)?(["token","id_token"].filter(function(t){return-1!==i.indexOf(t)}).forEach(function(e){if(!t[e])throw new Oc("Unable to parse OAuth flow response: "+e+" was not returned.")}),i.map(function(e){return t[e]})):t[i]})}function lh(t){var e=function(t){if(!t.clientId)throw new Oc("A clientId must be specified in the OktaAuth constructor to get a token");if(Pc.isString(t.responseType)&&-1!==t.responseType.indexOf(" "))throw new Oc("Multiple OAuth responseTypes must be defined as an array");var e=Pc.removeNils({client_id:t.clientId,code_challenge:t.codeChallenge,code_challenge_method:t.codeChallengeMethod,display:t.display,idp:t.idp,idp_scope:t.idpScope,login_hint:t.loginHint,max_age:t.maxAge,nonce:t.nonce,prompt:t.prompt,redirect_uri:t.redirectUri,response_mode:t.responseMode,response_type:t.responseType,sessionToken:t.sessionToken,state:t.state});if(["idp_scope","response_type"].forEach(function(t){Array.isArray(e[t])&&(e[t]=e[t].join(" "))}),-1!==t.responseType.indexOf("id_token")&&-1===t.scopes.indexOf("openid"))throw new Oc("openid scope must be specified in the scopes argument when requesting an id_token");return e.scope=t.scopes.join(" "),e}(t);return Pc.toQueryParams(e)}function fh(t,e,n){return n=n||{},dh(t,e=e||{}).then(function(r){var i,s;e.sessionToken?Pc.extend(r,{prompt:"none",responseMode:"okta_post_message",display:null}):e.idp&&Pc.extend(r,{display:"popup"});try{s=Xc.getOAuthUrls(t,r,n),i=(e.codeVerifier?s.tokenUrl:s.authorizeUrl)+lh(r)}catch(t){return jc.reject(t)}function o(t){return/^(https?\:\/\/)?([^:\/?#]*(?:\:[0-9]+)?)/.exec(t)[0]}switch(r.sessionToken||null===r.display?"IFRAME":"popup"===r.display?"POPUP":"IMPLICIT"){case"IFRAME":var a=uh(t,n.timeout,r.state),u=Xc.loadFrame(i);return a.then(function(e){return hh(t,r,e,s)}).fin(function(){document.body.contains(u)&&u.parentElement.removeChild(u)});case"POPUP":var c;if("okta_post_message"===r.responseMode){if(!t.features.isPopupPostMessageSupported())return jc.reject(new Oc("This browser doesn't have full postMessage support"));c=uh(t,n.timeout,r.state)}var h=Xc.loadPopup(i,{popupTitle:n.popupTitle});if("fragment"===r.responseMode){var l=o(t.idToken.authorize._getLocationHref()),f=o(r.redirectUri);if(l!==f)return jc.reject(new Oc("Using fragment, the redirectUri origin ("+f+") must match the origin of this page ("+l+")"));c=function(t,e,n){var r=jc.defer();return function t(){try{e&&e.location&&e.location.hash?r.resolve(Xc.hashToObject(e.location.hash)):e&&!e.closed&&setTimeout(t,500)}catch(e){setTimeout(t,500)}}(),r.promise.timeout(n||12e4,new Oc("OAuth flow timed out"))}(0,h,n.timeout)}var d=jc.defer(),p=setInterval(function(){h.closed&&d.reject(new Oc("Unable to parse OAuth flow response"))},500);return c.then(function(t){d.resolve(t)}).fail(function(t){d.reject(t)}),d.promise.then(function(e){return hh(t,r,e,s)}).fin(function(){h.closed||(clearInterval(p),h.close())});default:return jc.reject(new Oc("The full page redirect flow is not supported"))}})}function dh(t,e){"authorization_code"===(e=Pc.clone(e)||{}).grantType&&(e.pkce=!0);var n=function(t){return{pkce:t.options.pkce||!1,clientId:t.options.clientId,redirectUri:t.options.redirectUri||window.location.href,responseType:"id_token",responseMode:"okta_post_message",state:Xc.generateState(),nonce:Xc.generateNonce(),scopes:["openid","email"],ignoreSignature:t.options.ignoreSignature}}(t);return Pc.extend(n,e),!0!==n.pkce?jc.resolve(n):t.features.isPKCESupported()?(n.codeChallengeMethod||(n.codeChallengeMethod=ih.DEFAULT_CODE_CHALLENGE_METHOD),n.responseType="code",Xc.getWellKnown(t,null).then(function(t){if(-1===(t.code_challenge_methods_supported||[]).indexOf(n.codeChallengeMethod))throw new Oc("Invalid code_challenge_method")}).then(function(){var e=ih.generateVerifier(n.codeVerifier);return ih.saveMeta(t,{codeVerifier:e,redirectUri:n.redirectUri}),ih.computeChallenge(e)}).then(function(t){var e=Pc.clone(n)||{};return Pc.extend(e,n,{codeChallenge:t}),e})):jc.reject(new Oc("This browser doesn't support PKCE"))}var ph={getToken:fh,getWithoutPrompt:function(t,e,n){var r=Pc.clone(e)||{};return Pc.extend(r,{prompt:"none",responseMode:"okta_post_message",display:null}),fh(t,r,n)},getWithPopup:function(t,e,n){var r=Pc.clone(e)||{};return Pc.extend(r,{display:"popup",responseMode:"okta_post_message"}),fh(t,r,n)},getWithRedirect:function(t,e,n){return e=Pc.clone(e)||{},dh(t,e).then(function(r){e.responseMode||(r.responseMode=r.responseType.includes("code")&&!r.pkce?"query":"fragment");var i=Xc.getOAuthUrls(t,r,n),s=i.authorizeUrl+lh(r);sh.set(Dc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME,JSON.stringify({responseType:r.responseType,state:r.state,nonce:r.nonce,scopes:r.scopes,clientId:r.clientId,urls:i,ignoreSignature:r.ignoreSignature})),sh.set(Dc.REDIRECT_NONCE_COOKIE_NAME,r.nonce),sh.set(Dc.REDIRECT_STATE_COOKIE_NAME,r.state),t.token.getWithRedirect._setLocation(s)})},parseFromUrl:function(t,e){var n=t.token.parseFromUrl._getLocation().hash;if(e&&(n=e.substring(e.indexOf("#"))),!n)return jc.reject(new Oc("Unable to parse a token from the url"));var r=sh.get(Dc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);if(!r)return jc.reject(new Oc("Unable to retrieve OAuth redirect params cookie"));try{var i=JSON.parse(r),s=i.urls;delete i.urls,sh.delete(Dc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME)}catch(t){return jc.reject(new Oc("Unable to parse the "+Dc.REDIRECT_OAUTH_PARAMS_COOKIE_NAME+" cookie: "+t.message))}return jc.resolve(Xc.hashToObject(n)).then(function(n){return e||function(t){var e=t.token.parseFromUrl._getHistory(),n=t.token.parseFromUrl._getDocument(),r=t.token.parseFromUrl._getLocation();e&&e.replaceState?e.replaceState(null,n.title,r.pathname+r.search):r.hash=""}(t),hh(t,i,n,s)})},decodeToken:oh,renewToken:function(t,e){return Xc.isToken(e)?t.token.getWithoutPrompt({responseType:t.options.pkce?"code":e.accessToken?"token":"id_token",scopes:e.scopes},{authorizeUrl:e.authorizeUrl,userinfoUrl:e.userinfoUrl,issuer:e.issuer}):jc.reject(new Oc("Renew must be passed a token with an array of scopes and an accessToken or idToken"))},getUserInfo:function(t,e){return e&&(Xc.isToken(e)||e.accessToken||e.userinfoUrl)?Mc.httpRequest(t,{url:e.userinfoUrl,method:"GET",accessToken:e.accessToken}).fail(function(t){var e;if(t.xhr&&(401===t.xhr.status||403===t.xhr.status)&&(t.xhr.headers&&Pc.isFunction(t.xhr.headers.get)&&t.xhr.headers.get("WWW-Authenticate")?e=t.xhr.headers.get("WWW-Authenticate"):Pc.isFunction(t.xhr.getResponseHeader)&&(e=t.xhr.getResponseHeader("WWW-Authenticate")),e)){var n=e.match(/error="(.*?)"/)||[],r=e.match(/error_description="(.*?)"/)||[],i=n[1],s=r[1];i&&s&&(t=new nh(i,s))}throw t}):jc.reject(new Oc("getUserInfo requires an access token object"))},verifyToken:ah,handleOAuthResponse:hh,prepareOauthParams:dh};function gh(){}gh.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var s=0,o=r.length;s<o;s++)r[s].fn!==e&&r[s].fn._!==e&&i.push(r[s]);return i.length?n[t]=i:delete n[t],this}};var vh=gh;function yh(t){this.localOffset=parseInt(t||0)}Pc.extend(yh.prototype,{now:function(){return(Date.now()+this.localOffset)/1e3}}),yh.create=function(){return new yh(0)};var mh=yh,bh={autoRenew:!0,storage:"localStorage",expireEarlySeconds:30};function wh(t,e){return e.expiresAt-t.options.expireEarlySeconds}function Sh(t,e){t.emitter.emit("error",e)}function Eh(t,e){clearTimeout(t.expireTimeouts[e]),delete t.expireTimeouts[e],delete t.renewPromise[e]}function xh(t,e,n,r){var i=wh(e,r),s=1e3*Math.max(i-e.clock.now(),0);Eh(e,n);var o=setTimeout(function(){!function(t,e,n){t.emitter.emit("expired",e,n)}(e,n,r)},s);e.expireTimeouts[n]=o}function Ah(t,e,n,r,i){var s=n.getStorage();if(!Pc.isObject(i)||!i.scopes||!i.expiresAt&&0!==i.expiresAt||!i.idToken&&!i.accessToken)throw new Oc("Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties");s[r]=i,n.setStorage(s),xh(0,e,r,i)}function Fh(t,e){return t.getStorage()[e]}function Th(t,e,n,r){return jc.Promise(function(i){var s=Fh(n,r);return s&&function(t,e){return wh(t,e)<=t.clock.now()}(e,s)?i(e.options.autoRenew?kh(t,e,n,r):Ch(e,n,r)):i(s)})}function Ch(t,e,n){Eh(t,n);var r=e.getStorage();delete r[n],e.setStorage(r)}function kh(t,e,n,r){try{var i=Fh(n,r);if(!i)throw new Oc("The tokenManager has no token for the key: "+r)}catch(t){return jc.reject(t)}return Eh(e,r),e.renewPromise[r]||(e.renewPromise[r]=t.token.renew(i).then(function(t){var s=t;t instanceof Array&&(s=t.find(function(t){return t.idToken&&i.idToken||t.accessToken&&i.accessToken}));var o=Fh(n,r);if(o)return Ah(0,e,n,r,s),e.emitter.emit("renewed",r,s,o),delete e.renewPromise[r],s}).fail(function(t){throw"OAuthError"===t.name&&(Ch(e,n,r),Sh(e,t)),t})),e.renewPromise[r]}function Ih(t,e){!function(t){var e=t.expireTimeouts;for(var n in e)e.hasOwnProperty(n)&&Eh(t,n)}(t),e.clearStorage()}var Oh=function(t,e){var n;switch("localStorage"!==(e=Pc.extend({},bh,Pc.removeNils(e))).storage||_c.browserHasLocalStorage()||(Pc.warn("This browser doesn't support localStorage. Switching to sessionStorage."),e.storage="sessionStorage"),"sessionStorage"!==e.storage||_c.browserHasSessionStorage()||(Pc.warn("This browser doesn't support sessionStorage. Switching to cookie-based storage."),e.storage="cookie"),e.storage){case"localStorage":n=Rc(localStorage,Dc.TOKEN_STORAGE_NAME);break;case"sessionStorage":n=Rc(sessionStorage,Dc.TOKEN_STORAGE_NAME);break;case"cookie":n=Rc(_c.getCookieStorage(e),Dc.TOKEN_STORAGE_NAME);break;default:throw new Oc("Unrecognized storage option")}var r={clock:mh.create(t,e),options:e,emitter:new vh,expireTimeouts:{},renewPromise:{}};this.add=Pc.bind(Ah,this,t,r,n),this.get=Pc.bind(Th,this,t,r,n),this.remove=Pc.bind(Ch,this,r,n),this.clear=Pc.bind(Ih,this,r,n),this.renew=Pc.bind(kh,this,t,r,n),this.on=Pc.bind(r.emitter.on,r.emitter),this.off=Pc.bind(r.emitter.off,r.emitter),function(t,e,n){try{var r=n.getStorage()}catch(t){return void Sh(e,t)}for(var i in r)r.hasOwnProperty(i)&&xh(0,e,i,r[i])}(0,r,n)},Rh=_c.storage;function Dh(t){var e=this,n=Yc.getValidUrl(t),r=t.pkce||"authorization_code"===t.grantType;if(this.options={url:Pc.removeTrailingSlash(n),clientId:t.clientId,issuer:Pc.removeTrailingSlash(t.issuer),authorizeUrl:Pc.removeTrailingSlash(t.authorizeUrl),userinfoUrl:Pc.removeTrailingSlash(t.userinfoUrl),tokenUrl:Pc.removeTrailingSlash(t.tokenUrl),pkce:r,redirectUri:t.redirectUri,httpRequestClient:t.httpRequestClient,storageUtil:t.storageUtil,transformErrorXHR:t.transformErrorXHR,headers:t.headers},this.options.pkce&&!e.features.isPKCESupported())throw new Oc("This browser doesn't support PKCE");this.userAgent="okta-auth-js-"+Dc.SDK_VERSION,this.options.maxClockSkew=t.maxClockSkew||0===t.maxClockSkew?t.maxClockSkew:Dc.DEFAULT_MAX_CLOCK_SKEW,this.options.ignoreSignature=!!t.ignoreSignature,e.session={close:Pc.bind(Zc.closeSession,null,e),exists:Pc.bind(Zc.sessionExists,null,e),get:Pc.bind(Zc.getSession,null,e),refresh:Pc.bind(Zc.refreshSession,null,e),setCookieAndRedirect:Pc.bind(Zc.setCookieAndRedirect,null,e)},e.tx={status:Pc.bind($c.transactionStatus,null,e),resume:Pc.bind($c.resumeTransaction,null,e),exists:Pc.bind($c.transactionExists,null,e),introspect:Pc.bind($c.introspect,null,e)},e.tx.exists._get=function(t){return Rh.get(t)},e.idToken={authorize:{_getLocationHref:function(){return window.location.href}}},e.token={getWithoutPrompt:Pc.bind(ph.getWithoutPrompt,null,e),getWithPopup:Pc.bind(ph.getWithPopup,null,e),getWithRedirect:Pc.bind(ph.getWithRedirect,null,e),parseFromUrl:Pc.bind(ph.parseFromUrl,null,e),decode:ph.decodeToken,renew:Pc.bind(ph.renewToken,null,e),getUserInfo:Pc.bind(ph.getUserInfo,null,e),verify:Pc.bind(ph.verifyToken,null,e)},e.token.getWithRedirect._setLocation=function(t){window.location=t},e.token.parseFromUrl._getHistory=function(){return window.history},e.token.parseFromUrl._getLocation=function(){return window.location},e.token.parseFromUrl._getDocument=function(){return window.document},e.fingerprint._getUserAgent=function(){return navigator.userAgent};var i=/windows phone|iemobile|wpdesktop/i;e.features.isFingerprintSupported=function(){var t=e.fingerprint._getUserAgent();return t&&!i.test(t)},e.tokenManager=new Oh(e,t.tokenManager)}var Nh=Dh.prototype;Nh.features={},Nh.features.isPopupPostMessageSupported=function(){var t=document.documentMode&&document.documentMode<10;return!(!window.postMessage||t)},Nh.features.isTokenVerifySupported=function(){return"undefined"!=typeof crypto&&crypto.subtle&&"undefined"!=typeof Uint8Array},Nh.features.isPKCESupported=function(){return Nh.features.isTokenVerifySupported()},Nh.signIn=function(t){var e=this;function n(n){return delete t.sendFingerprint,$c.postToTransaction(e,"/api/v1/authn",t,n)}return(t=Pc.clone(t||{})).sendFingerprint?e.fingerprint().then(function(t){return n({headers:{"X-Device-Fingerprint":t}})}):n()},Nh.signOut=function(){return this.session.close()},Yc.addSharedPrototypes(Nh),Nh.webfinger=function(t){var e="/.well-known/webfinger"+Pc.toQueryParams(t);return Mc.get(this,e,{headers:{Accept:"application/jrd+json"}})},Nh.fingerprint=function(t){t=t||{};var e=this;if(!e.features.isFingerprintSupported())return jc.reject(new Oc("Fingerprinting is not supported on this device"));var n=jc.defer(),r=document.createElement("iframe");function i(t){if(t&&t.data&&t.origin===e.options.url){try{var r=JSON.parse(t.data)}catch(t){return n.reject(new Oc("Unable to parse iframe response"))}if(r)return"FingerprintAvailable"===r.type?n.resolve(r.fingerprint):void("FingerprintServiceReady"===r.type&&t.source.postMessage(JSON.stringify({type:"GetFingerprint"}),t.origin))}}r.style.display="none",Xc.addListener(window,"message",i),r.src=e.options.url+"/auth/services/devicefingerprint",document.body.appendChild(r);var s=setTimeout(function(){n.reject(new Oc("Fingerprinting timed out"))},t.timeout||15e3);return n.promise.fin(function(){clearTimeout(s),Xc.removeListener(window,"message",i),document.body.contains(r)&&r.parentElement.removeChild(r)})};var _h=Yc.buildOktaAuth(Dh)(_c,function(t,e,n){var r=n.data,i=n.headers||{};return"application/json"===(i["Content-Type"]||i["content-type"]||"")&&r&&"string"!=typeof r&&(r=JSON.stringify(r)),Cc(e,{method:t,headers:n.headers,body:r,credentials:!1===n.withCredentials?"omit":"include"}).then(function(t){var e=!t.ok,n=t.status,r=function(t){var r={responseText:t,status:n};if(e)throw r;return r};return t.headers.get("Content-Type")&&t.headers.get("Content-Type").toLowerCase().indexOf("application/json")>=0?t.json().then(r):t.text().then(r)})});class Ph{constructor(t){this.crdsAuthConfig=t,this.providerServiceKVP={},this.authenticationStatus$=new qo(null),this.logService=new Tc(t.logging);let e=new _h(this.crdsAuthConfig.oktaConfig),n=new Oa(e,this.logService);n.subscribeToTokenExpiration(()=>{this.authenticate().pipe(Ea()).subscribe()}),n.subscribeToTokenRenewed(()=>{this.logService.Info("Token Renewed")}),n.subscribeToTokenError(()=>{this.authenticationStatus$.next(null)});let r=this.getVisibilityChange();document.addEventListener(r,()=>{"visible"===document.visibilityState&&this.authenticate().pipe(Ea()).subscribe()}),this.providerServiceKVP[fa.Okta]=n,this.providerServiceKVP[fa.Mp]=new Fc(t.mpConfig.accessTokenCookie,t.mpConfig.refreshTokenCookie,t.mpConfig.issuer)}getVisibilityChange(){let t;return void 0!==document.hidden?t="visibilitychange":void 0!==document.mozHidden?t="mozvisibilitychange":void 0!==document.msHidden?t="msvisibilitychange":void 0!==document.webkitHidden&&(t="webkitvisibilitychange"),t}authenticated(){return this.authenticationStatus$.value?this.authenticationStatus$.asObservable():this.authenticate().pipe(Ea(),Ta(t=>{this.authenticationStatus$.next(t)}),xa(()=>this.authenticationStatus$.asObservable()))}authenticate(){return this.AuthenticateByProvider(0).pipe(Ea(),Ta(t=>{this.authenticationStatus$.next(t)}),Xo(t=>(t&&bc.setNetlifyJWT(),t)))}AuthenticateByProvider(t){return t>=Object.keys(this.providerServiceKVP).length?Qo(null):this.providerServiceKVP[this.crdsAuthConfig.providerPreference[t]].authenticated().pipe(Ea(),xa(e=>null!=e?Qo(e):this.AuthenticateByProvider(++t)))}signOut(){return this.SignOutByProvider(0)}SignOutByProvider(t){return t>=Object.keys(this.providerServiceKVP).length?Qo(!1):this.providerServiceKVP[this.crdsAuthConfig.providerPreference[t]].signOut().pipe(Ea(),xa(e=>e?(bc.deleteCookie("nf_jwt"),this.authenticationStatus$.next(null),Qo(e)):this.SignOutByProvider(++t)))}}class jh{constructor(t={}){this.authenticated=!1,this.subdomainMap={prod:"www"},this.config=t;const e={clientId:t.okta_client_id,issuer:t.okta_issuer,tokenManager:{storage:"cookie"}},n={accessTokenCookie:t.mp_access_token_cookie,refreshTokenCookie:t.mp_refresh_token_cookie,issuer:jh.getMPIssuerEndpoint(this.config.env)};this.authService=new Ph({oktaConfig:e,mpConfig:n,logging:t.logging||!1,providerPreference:[fa.Okta,fa.Mp]})}listen(t){this.authService.authenticated().subscribe(e=>{if(!e)return this.authenticated=!1;this.authenticated=!0,this.token=e,this.isMp=e.provider==fa.Mp,this.isOkta=e.provider==fa.Okta,this.updateCurrentUser(),t(this)})}signOut(t){this.authService.signOut().subscribe(e=>{e&&(this.authenticated=!1,this.updateCurrentUser(),t(this))})}updateCurrentUser(){return this.currentUser=this.authenticated?{id:this.getUserId(),name:this.getUser(),avatarUrl:this.getUserImageUrl()}:null}getUserId(){return this.authenticated?this.isOkta?this.token.id_token.claims.mpContactId:this.isMp?s.getCookie("userId"):void 0:null}getUser(){return this.authenticated?this.isOkta?this.token.id_token.claims.name:this.isMp?s.getCookie("username"):void 0:null}getUserImageUrl(){if(!this.authenticated)return null;const t=this.getUserId();return t?`https://${s.getSubdomain(this.config.env)}.crossroads.net/proxy/gateway/api/image/profile/${t}`:null}static getMPIssuerEndpoint(t){return`https://gateway${"int"==t||"demo"==t?t:""}.crossroads.net/gateway/api/login`}}class Bh{constructor(e){t(this,e),this.giveNavIsShowing=!1,this.mainNavIsShowing=!1,this.profileNavIsShowing=!1,this.authenticated=!1,this.auth={}}initAuth(){this.config&&!this.auth.config&&(this.auth=new jh(Object.assign(this.config,{env:this.env})),this.auth.listen(this.authChangeCallback.bind(this)))}componentDidLoad(){this.offset=this.element.getBoundingClientRect().top+window.scrollY}authChangeCallback(){this.authenticated=this.auth.authenticated,this.authenticated||this.redirectToRoot()}handleSignOut(){this.auth.signOut(this.authChangeCallback.bind(this))}redirectToRoot(){window.location.replace(this.rootURL())}handleProfileClick(t){return this.auth.authenticated?this.navClickHandler(t,"profile-nav"):t.stopPropagation()}menuClasses(){let t=["menu-container"];return this.mainNavIsShowing&&t.push("nav-is-showing"),t.join(" ")}profileClasses(){let t=["profile-container"];return this.profileNavIsShowing&&this.authenticated&&t.push("nav-is-showing"),t.join(" ")}giveClasses(){let t=["give-container"];return this.giveNavIsShowing&&t.push("nav-is-showing"),t.join(" ")}rootURL(){return`https://${s.getSubdomain(this.env)}.crossroads.net`}render(){this.initAuth();let t='<svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" class="svg-inline--fa fa-times fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"></path></svg>';return e(vi,null,e("header",{ref:t=>this.element=t,class:this.mainNavIsShowing||this.profileNavIsShowing||this.giveNavIsShowing?"nav-is-showing":"",style:{top:`${this.profileNavIsShowing||this.giveNavIsShowing?this.offset:0}px`}},e("div",null,e("div",{class:"global-nav-items"},e("div",{class:"global-actions"},e("a",{href:"","data-automation-id":"sh-menu","data-label":"menu",class:this.menuClasses(),onClick:t=>this.navClickHandler(t,"main-nav")},e("div",{class:"menu",innerHTML:'<svg id="menu-thin" width="256" height="256" viewBox="0 0 256 256"><g><path d="M242.852679,47.6875 L14.1473214,47.6875 C12.4091038,47.6875 11,46.5915304 11,45.2395833 L11,35.4479167 C11,34.0959696 12.4091038,33 14.1473214,33 L242.852679,33 C244.590896,33 246,34.0959696 246,35.4479167 L246,45.2395833 C246,46.5915304 244.590896,47.6875 242.852679,47.6875 Z M242.852679,135.8125 L14.1473214,135.8125 C12.4091038,135.8125 11,134.71653 11,133.364583 L11,123.572917 C11,122.22097 12.4091038,121.125 14.1473214,121.125 L242.852679,121.125 C244.590896,121.125 246,122.22097 246,123.572917 L246,133.364583 C246,134.71653 244.590896,135.8125 242.852679,135.8125 Z M242.852679,223.9375 L14.1473214,223.9375 C12.4091038,223.9375 11,222.84153 11,221.489583 L11,211.697917 C11,210.34597 12.4091038,209.25 14.1473214,209.25 L242.852679,209.25 C244.590896,209.25 246,210.34597 246,211.697917 L246,221.489583 C246,222.84153 244.590896,223.9375 242.852679,223.9375 Z"/></g></svg>'}),e("div",{class:"close",innerHTML:t})),e("a",{href:`${this.rootURL()}/search`,class:"search-container","data-automation-id":"sh-search","data-label":"search"},e("div",{class:"search",innerHTML:'<svg id="search-thin" width="256" height="256" viewBox="0 0 256 256"><g><path d="M244.375275,231.976661 L184.91724,172.518627 C183.857136,171.458523 182.474391,170.905425 180.999463,170.905425 L176.252038,170.905425 C192.061423,153.805478 201.740638,130.990186 201.740638,105.870319 C201.740638,52.911186 158.829452,10 105.870319,10 C52.911186,10 10,52.911186 10,105.870319 C10,158.829452 52.911186,201.740638 105.870319,201.740638 C130.990186,201.740638 153.805478,192.061423 170.905425,176.29813 L170.905425,180.999463 C170.905425,182.474391 171.504614,183.857136 172.518627,184.91724 L231.976661,244.375275 C234.142962,246.541575 237.645916,246.541575 239.812216,244.375275 L244.375275,239.812216 C246.541575,237.645916 246.541575,234.142962 244.375275,231.976661 Z M105.870319,186.991358 C61.0232899,186.991358 24.7492798,150.717348 24.7492798,105.870319 C24.7492798,61.0232899 61.0232899,24.7492798 105.870319,24.7492798 C150.717348,24.7492798 186.991358,61.0232899 186.991358,105.870319 C186.991358,150.717348 150.717348,186.991358 105.870319,186.991358 Z"/></g></svg>'}))),e("a",{href:this.rootURL(),"data-automation-id":"sh-logo",class:"logo",innerHTML:'<svg width="308" height="81" viewBox="0 0 308 81" xmlns="http://www.w3.org/2000/svg"><path id="crossroads-church-logo" d="M211.9 52.2h3.3v10.5h.1c1.1-2.4 3.9-3.4 6.3-3.4 5.2 0 6.8 3 6.8 7.3v13H225V66.2c0-2.4-1.5-4-4-4-4 0-5.9 2.6-5.9 6.2v11.2h-3.3V52.2h.1zm-7.2 14c-.5-2.5-2.2-4-4.9-4-4.7 0-6.2 3.7-6.2 7.8 0 3.6 1.7 7.3 5.8 7.3 3.1 0 5-1.8 5.4-4.8h3.3c-.7 4.8-3.8 7.7-8.7 7.7-6.1 0-9.3-4.2-9.3-10.1 0-5.9 3.1-10.6 9.4-10.6 4.5 0 8.1 2.1 8.6 6.8h-3.4v-.1zm49.5-6.4h3.1V64h.1c1.6-3.2 3.8-4.8 7.3-4.6v3.5c-5.3 0-7.2 3-7.2 8v8.8h-3.3V59.8zm-4.8 19.8h-3.1v-3.1h-.1c-1.4 2.5-3.6 3.6-6.4 3.6-5.2 0-6.8-3-6.8-7.3v-13h3.3v13.4c0 2.4 1.5 4 4 4 4 0 5.9-2.6 5.9-6.2V59.8h3.3v19.8h-.1zm38.2-27.4h3.3v10.5h.1c1.1-2.4 3.9-3.4 6.3-3.4 5.2 0 6.8 3 6.8 7.3v13h-3.3V66.2c0-2.4-1.5-4-4-4-4 0-5.9 2.6-5.9 6.2v11.2h-3.3V52.2zm-7.2 14c-.5-2.5-2.2-4-4.9-4-4.7 0-6.2 3.7-6.2 7.8 0 3.6 1.7 7.3 5.8 7.3 3.1 0 5-1.8 5.4-4.8h3.3c-.7 4.8-3.8 7.7-8.7 7.7-6.1 0-9.3-4.2-9.3-10.1 0-5.9 3.1-10.6 9.4-10.6 4.5 0 8.1 2.1 8.6 6.8h-3.4v-.1zm7.6-45.7c0-1.6 1.4-2.2 3.6-2.2 1 0 1.9.2 2.5.8.7.5 1.1 1.3 1.2 2.3h11.4c-.7-8.4-8.8-10-15.7-10-6 0-13.6 2-14.8 8.6V.5h-12.6v15c-2.7-3.1-5.4-4.1-9.4-4.1-6.5 0-11.7 5-13 13 0-7.5-1-13-15.9-13-12.5 0-17.3 3.9-17.3 10.6h12.1c.3-2.7 2.7-3.1 4.4-3.1 1.3 0 4.1.3 4.1 2.6 0 4.7-14.5 1.5-20.2 7.4v-1.2c0-9.8-6.9-16.4-18-16.4-6.5 0-11.7 2.3-14.8 6.5v-6.3c-.5-.1-1.1-.2-1.6-.2-4.9 0-8 2.4-9.7 7.3l-.1-6.4h-11.4v17.6c-3.9-7.3-19.1-5.6-19.1-9.4 0-1.6 1.4-2.2 3.6-2.2 1 0 1.9.2 2.5.8.7.5 1.1 1.3 1.2 2.3h11.4c-.7-8.4-8.8-10-15.7-10-6.6 0-14.9 2.4-14.9 10.4 0 12.3 19.4 8.2 19.4 13.3 0 2.2-2.1 2.8-4 2.8-1.2 0-2.3-.3-3.1-1-.8-.7-1.3-1.6-1.3-2.9H123v-.3c0-11.8-20-8.9-20-13.3 0-1.6 1.4-2.2 3.6-2.2 1 0 1.9.2 2.5.8.7.5 1.1 1.3 1.2 2.3h11.4c-.7-8.4-8.8-10-15.7-10-6.6 0-15 2.4-15 10.4v.3c-2.2-6.6-8.3-10.7-17.1-10.7-6.5 0-11.7 2.3-14.8 6.5v-6.3c-.5-.1-1.1-.2-1.6-.2-4.9 0-8 2.4-9.7 7.3l-.1-6.4H36.3v19.4H23.8c-.4 2.5-1.6 4.7-4.9 4.7-3.7 0-5.5-3.1-5.5-7.9 0-3.7.8-8.6 5.5-8.6 1.4 0 2.5.4 3.2 1.3.8.8 1.3 1.9 1.3 3.3h12.7c-.9-9.4-8.9-13-17.3-13-10.4 0-18 6.2-18 17 0 10.7 7.8 16.4 18 16.4 8.4 0 15.8-3.3 17.4-12v11.1h12.5V33c0-6.8 2.6-9.2 7.7-9.2-.3 1.5-.5 3-.5 4.7 0 10.8 7.8 16.3 18 16.3 7.4 0 13.6-2.9 16.4-9 1.5 7.1 8.9 9 15.6 9 8.7 0 14-2.5 16-6.6 2.5 5.1 8.9 6.6 14.8 6.6 8.9 0 14.1-2.6 16.1-6.8v5.9h12.6V33c0-6.8 2.6-9.2 7.7-9.2-.3 1.5-.5 3-.5 4.7 0 10.8 7.8 16.3 18 16.3 6.9 0 12.8-2.5 15.8-7.8.9 5.4 5.7 7.8 11.1 7.8 4.7 0 8.3-1 11.9-4.3l.6 3.4h13v-.6c-1.6-1.3-1.7-2.2-1.7-4v-6.5c1.3 7 6 12.1 14 12.1 4 0 6.7-1.3 9.7-5.1V44h11.3v-5.6c2.6 5 8.9 6.5 14.7 6.5 11.6 0 17-4.5 17-11 0-11.9-20-9-20-13.4zM74 36.4c-3.2 0-5.4-2.6-5.4-8.6 0-3.5 1.3-8 5.6-8 3.3-.2 5.3 3.3 5.3 8-.1 6-2.1 8.6-5.5 8.6zm32.5 1.6c-1.2 0-2.3-.3-3.1-1-.8-.7-1.3-1.6-1.3-2.9h-11c.6-1.8.9-3.9.9-6.3 0-.8-.1-1.5-.1-2.2 3.6 7.7 18.6 5.1 18.6 9.6-.1 2.1-2.1 2.8-4 2.8zm84.1-1.6c-3.2 0-5.4-2.6-5.4-8.6 0-3.5 1.3-8 5.5-8 3.3-.2 5.3 3.3 5.3 8 0 6-2 8.6-5.4 8.6zm32.6 1.3c-2.5 0-4-1.1-4-2.7 0-4.1 5.4-3.1 9.5-5.1.3 4.4-1.1 7.8-5.5 7.8zm35.2-1.9c-4.1 0-4.9-3.9-4.9-7.2 0-3.5 1.1-7.5 5.3-7.5 4.2 0 5.4 3.8 5.4 7.3-.1 3.7-1.4 7.4-5.8 7.4zm33.1 2.2c-1.2 0-2.3-.3-3.1-1-.9-.7-1.3-1.6-1.3-2.9h-10.8V23.8c1.9 9.9 19.2 6.6 19.2 11.4 0 2.1-2.1 2.8-4 2.8z" fill-rule="nonzero" fill=""/></svg>'}),e("div",{class:"user-actions"},e("a",{href:"","data-automation-id":"sh-give","data-label":"give",class:this.giveClasses(),onClick:t=>this.navClickHandler(t,"give-nav")},e("div",{class:"donate",innerHTML:'<svg viewBox="0 0 244.36 244.36"><defs><mask id="a" x="-6" y="-6" width="256" height="256" maskUnits="userSpaceOnUse"><g transform="translate(-6 -6)"><rect width="256" height="256" style="fill:#fff"/></g></mask></defs><g style="mask:url(#a)"><path d="M113.39,109.09A27.82,27.82,0,0,1,100,100.74a25.23,25.23,0,0,1-6.2-14.08,24.08,24.08,0,0,1,6.44-19.09,24.39,24.39,0,0,1,18.85-8.12h1.44V48a4.09,4.09,0,0,1,3.81-3.82H132A4.11,4.11,0,0,1,135.82,48V59.45h.48a33.71,33.71,0,0,1,20.52,6.69,5.46,5.46,0,0,1,1.67,3.1,3.56,3.56,0,0,1-1.19,3.1l-5.25,5.25a4.29,4.29,0,0,1-2.39,1.19,2.6,2.6,0,0,1-2.39-.71,17.88,17.88,0,0,0-10.5-3.34H119.11A9.72,9.72,0,0,0,112,77.59,8.94,8.94,0,0,0,109.09,84,10.29,10.29,0,0,0,111,90.24a9.5,9.5,0,0,0,5.25,3.58l28.16,8.11a24.66,24.66,0,0,1,15.27,12.41,23.29,23.29,0,0,1,1.43,20,22.1,22.1,0,0,1-9.3,12.17,27.73,27.73,0,0,1-15.51,4.53h-.48v11.46a4.11,4.11,0,0,1-3.82,3.81h-7.64a4.09,4.09,0,0,1-3.81-3.81V151.09h-.48a32.24,32.24,0,0,1-20.52-7.16,3.64,3.64,0,0,1-1.68-2.62,3.58,3.58,0,0,1,1.2-3.11l5.25-5.25a4.29,4.29,0,0,1,2.38-1.19,2.58,2.58,0,0,1,2.39.72,18.71,18.71,0,0,0,11,3.34h17.18a9.72,9.72,0,0,0,7.16-2.87,8.87,8.87,0,0,0,2.86-6.44,10.2,10.2,0,0,0-1.91-6.2,9.45,9.45,0,0,0-5.25-3.58Zm121.7,34.36a15.49,15.49,0,0,1,15.27,15.28v76.36a15.47,15.47,0,0,1-15.27,15.27H21.27a14.71,14.71,0,0,1-10.74-4.53A14.68,14.68,0,0,1,6,235.09V158.73A14.68,14.68,0,0,1,10.53,148a14.72,14.72,0,0,1,10.74-4.54H36.55a97.2,97.2,0,0,1-7.64-38.18A96.4,96.4,0,0,1,42.27,55.4a100.25,100.25,0,0,1,36-36A96.4,96.4,0,0,1,128.18,6a96.43,96.43,0,0,1,49.88,13.36,100.3,100.3,0,0,1,36,36,96.4,96.4,0,0,1,13.36,49.87,97.37,97.37,0,0,1-7.63,38.18ZM128.18,21.27a83.6,83.6,0,0,0-84,84,83.57,83.57,0,0,0,84,84,83.57,83.57,0,0,0,84-84,83.6,83.6,0,0,0-84-84ZM235.09,235.09V158.73H211.7a99.76,99.76,0,0,1-30.54,30.54h19.57a4.11,4.11,0,0,1,3.81,3.82v7.64a4.09,4.09,0,0,1-3.81,3.81H55.64a4.09,4.09,0,0,1-3.82-3.81v-7.64a4.11,4.11,0,0,1,3.82-3.82h20a97.93,97.93,0,0,1-31-30.54H21.27v76.36Z" transform="translate(-6 -6)"/></g></svg>'}),e("div",{class:"close",innerHTML:t})),e("a",{href:`${this.rootURL()}/signin`,class:this.profileClasses(),onClick:t=>this.handleProfileClick(t),"data-automation-id":"sh-profile","data-label":this.authenticated?"my account":"sign in"},this.authenticated?e("div",{class:"account"},e("div",{class:"account-authenticated",style:{backgroundImage:`url('${this.auth.currentUser.avatarUrl}')`}})):e("div",{class:"account",innerHTML:'<svg id="account-thin" width="256" height="256" viewBox="0 0 256 256"><g><path d="M128,10 C62.8145161,10 10,62.8145161 10,128 C10,193.185484 62.8145161,246 128,246 C193.185484,246 246,193.185484 246,128 C246,62.8145161 193.185484,10 128,10 Z M188.903226,210.6 C171.821774,223.208871 150.791129,230.774194 128,230.774194 C105.208871,230.774194 84.1782258,223.208871 67.0967742,210.6 L67.0967742,204.129032 C67.0967742,187.333065 80.7524194,173.677419 97.5483871,173.677419 C102.829839,173.677419 110.633065,179.101613 128,179.101613 C145.414516,179.101613 153.122581,173.677419 158.451613,173.677419 C175.247581,173.677419 188.903226,187.333065 188.903226,204.129032 L188.903226,210.6 Z M203.462903,197.515323 C200.227419,175.437903 181.433065,158.451613 158.451613,158.451613 C148.697581,158.451613 143.987097,163.875806 128,163.875806 C112.012903,163.875806 107.35,158.451613 97.5483871,158.451613 C74.5669355,158.451613 55.7725806,175.437903 52.5370968,197.515323 C35.6459677,179.196774 25.2258065,154.835484 25.2258065,128 C25.2258065,71.3314516 71.3314516,25.2258065 128,25.2258065 C184.668548,25.2258065 230.774194,71.3314516 230.774194,128 C230.774194,154.835484 220.354032,179.196774 203.462903,197.515323 Z M128,63.2903226 C104.875806,63.2903226 86.1290323,82.0370968 86.1290323,105.16129 C86.1290323,128.285484 104.875806,147.032258 128,147.032258 C151.124194,147.032258 169.870968,128.285484 169.870968,105.16129 C169.870968,82.0370968 151.124194,63.2903226 128,63.2903226 Z M128,131.806452 C113.297581,131.806452 101.354839,119.86371 101.354839,105.16129 C101.354839,90.458871 113.297581,78.516129 128,78.516129 C142.702419,78.516129 154.645161,90.458871 154.645161,105.16129 C154.645161,119.86371 142.702419,131.806452 128,131.806452 Z"/></g></svg>'}),e("div",{class:"close",innerHTML:t})))),e("profile-nav",{profileNavIsShowing:this.profileNavIsShowing&&this.authenticated,handleSignOut:this.handleSignOut.bind(this),currentUser:this.auth.currentUser,data:this.profileData}),e("give-nav",{data:this.giveData,giveNavIsShowing:this.giveNavIsShowing}))))}static get style(){return"header{background-color:#0095d9;position:relative;top:0;width:100%;z-index:2}\@supports ((position:-webkit-sticky) or (position:sticky)){header{position:-webkit-sticky;position:sticky}}header.nav-is-showing{position:fixed}\@supports ((position:-webkit-sticky) or (position:sticky)){header.nav-is-showing{position:-webkit-sticky;position:sticky}}header>div{margin:0 auto;max-width:1170px;padding:0 15px;position:relative}.global-nav-items{-ms-flex-pack:justify;justify-content:space-between}.global-actions,.global-nav-items,.user-actions{display:-ms-flexbox;display:flex}.global-actions a:first-of-type,.user-actions a:first-of-type{margin-right:18px}.logo{padding:7px}.logo svg{fill:#fff;height:29px;width:111px}.account,.donate,.menu,.search{height:22px;padding:12px 0;width:22px}.account svg,.donate svg,.menu svg,.search svg{height:22px;width:22px}.account .account-authenticated{background-color:#fff;background-position:50%;background-repeat:no-repeat;background-size:22px;border:1.5px solid #fff;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;height:22px;width:22px}\@media (hover){.account .account-authenticated:hover{-webkit-filter:brightness(90%);filter:brightness(90%)}}.close{padding:9px 0}.close,.close svg{height:26px;width:26px}.account,.close,.donate,.menu,.search{display:block}.give-container,.menu-container,.profile-container,.search-container{color:#fff;display:-ms-flexbox;display:flex;text-decoration:none}\@media (min-width:768px){.give-container:after,.menu-container:after,.profile-container:after,.search-container:after{-ms-flex-item-align:center;align-self:center;bottom:2px;content:attr(data-label);display:inline-block;font-size:13px;margin-left:7px;position:relative;text-transform:capitalize}}.give-container svg,.menu-container svg,.profile-container svg,.search-container svg{fill:#fff}\@media (hover){.give-container:hover,.menu-container:hover,.profile-container:hover,.search-container:hover{color:#ccc}.give-container:hover svg,.menu-container:hover svg,.profile-container:hover svg,.search-container:hover svg{fill:#ccc}}.menu-container .close{display:none;margin-right:-4px}\@media (min-width:992px){.menu-container.nav-is-showing .menu{display:none}.menu-container.nav-is-showing .close{display:block}}.profile-container .close{display:none;margin-right:-4px}\@media (min-width:992px){.profile-container.nav-is-showing .account{display:none}.profile-container.nav-is-showing .close{display:block}}.give-container .close{display:none;margin-right:-4px}\@media (min-width:992px){.give-container.nav-is-showing .donate{display:none}.give-container.nav-is-showing .close{display:block}}"}}var Lh=function(t){return null!=t&&("object"==typeof t||"function"==typeof t)};function Hh(t,e){for(var n in e)Mh(e,n)&&(t[n]=e[n])}function Mh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Vh,Uh={},qh={default:{"&quot;":'"',"&#34;":'"',"&apos;":"'","&#39;":"'","&amp;":"&","&#38;":"&","&gt;":">","&#62;":">","&lt;":"<","&#60;":"<"},extras:{"&cent;":"","&#162;":"","&copy;":"","&#169;":"","&euro;":"","&#8364;":"","&pound;":"","&#163;":"","&reg;":"","&#174;":"","&yen;":"","&#165;":""}};function Kh(t,e){if(!function(t){return t&&"string"==typeof t}(t))return"";var n=qh[e||"default"],r=function(t,e){if(Uh[t])return Uh[t];var n=Object.keys(e).join("|"),r=new RegExp("(?=("+n+"))\\1","g");return Uh[t]=r,r}(e,n);return t.replace(r,function(t){return n[t]})}Object.defineProperty(qh,"all",{get:function(){return Vh||(Vh=function(t){Lh(t)||(t={});for(var e=arguments.length,n=1;n<e;n++){var r=arguments[n];Lh(r)&&Hh(t,r)}return t}({},qh.default,qh.extras))}}),Kh.chars=qh.default,Kh.extras=qh.extras,Object.defineProperty(Kh,"all",{get:function(){return qh.all}});var zh=Kh;class Qh{constructor(e){t(this,e)}decodedData(){return zh(this.data||"")}render(){return this.active?null:e("div",{class:"ctas",innerHTML:this.decodedData()})}static get style(){return".ctas{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;padding:40px 20px 0}\@media (max-width:992px){.ctas{width:calc(100vw - 40px)}}\@media (min-width:992px){.ctas{padding:70px 0 0}}.ctas h3{font-size:11px;margin-top:0;opacity:.5;text-transform:uppercase}.cta{background-color:rgba(21,21,21,.8);display:-ms-flexbox;display:flex;margin-bottom:10px;text-decoration:none}.cta-image{height:75px}.cta-image img{height:75px;width:100px}.cta-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;padding:0 20px;width:100%}.cta-content h4{color:#fff;font-size:14px;font-weight:600;text-transform:uppercase}.cta-content h4,.cta-content p{margin:0}.cta-content p{color:#979797;font-size:12px;font-weight:300;line-height:18px}.cta:hover-content h4{color:#ccc}.more-updates{color:#0095d9;font-size:12px;text-decoration:none;text-transform:capitalize}"}}class Wh{constructor(e){t(this,e),this.isActive=!1,this.debug=!0}componentWillLoad(){this.console=new r(this.debug),this.config=new i}render(){return e("li",null,e("a",{onClick:t=>this.onActivate(t,this.slug),"data-automation-id":`sh-section-${this.slug}`,class:this.isActive?"is-active":""},e("slot",null)))}static get style(){return"nav-section a{cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;margin-bottom:10px;padding:15px 20px}\@media (min-width:992px){nav-section a{height:96px;-ms-flex-pack:center;justify-content:center;margin-bottom:0;position:relative;width:86%}}nav-section a:after{border-color:transparent transparent transparent #0095d9;border-style:solid;border-width:63px 0 63px 50px;content:\"\";height:0;left:0;position:absolute;top:0;visibility:hidden;width:0}nav-section a:before{background-color:#0095d9;content:\"\";display:inline-block;height:100%;left:0;position:absolute}\@media (min-width:992px){nav-section a:hover:before{width:4px}}\@media (min-width:992px){nav-section a.is-active:after{left:100%;-webkit-transition:left .4s ease;transition:left .4s ease;visibility:visible}nav-section a.is-active:before{-webkit-transition:width .4s ease;transition:width .4s ease;width:100%}}nav-section a h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;display:-ms-flexbox;display:flex;font-size:48px;-ms-flex-pack:justify;justify-content:space-between;line-height:.6;margin:0;position:relative;text-transform:uppercase}\@media (max-width:992px){nav-section a h2:after{background-image:url(/assets/images/chevron-right-light.svg);background-size:12px 22px;content:\"\";display:-ms-flexbox;display:flex;height:22px;position:absolute;right:0;top:20%;width:12px}}nav-section a p{font-size:14px;margin:12px 0 0;opacity:.7}"}}class $h{constructor(e){t(this,e)}render(){return e("div",{class:this.active==this.slug?"":" hidden"},e("a",{href:"","data-automation-id":`sh-section-subnav-${this.slug}`,class:"back",onClick:t=>this.onBack(t)},e("span",{innerHTML:'<svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="chevron-left" class="svg-inline--fa fa-chevron-left fa-w-8" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"></path></svg>'}),"Back"),e("slot",null))}static get style(){return".hidden{display:none}nav-section-subnav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#fff}nav-section-subnav div{padding:30px 20px 0}nav-section-subnav a{color:#fff;display:inline-block;font-size:19px;margin-bottom:10px;padding-left:10px;text-decoration:none;text-transform:capitalize}nav-section-subnav a.all{margin-bottom:30px}nav-section-subnav a:hover{color:#ccc}nav-section-subnav h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:48px;line-height:48px;margin:0;text-transform:uppercase;margin-bottom:10px}nav-section-subnav h4{font-size:11px;margin:0 0 10px;opacity:.5;text-transform:uppercase}nav-section-subnav ul{padding-left:0;margin-top:0}nav-section-subnav ul li{list-style:none}nav-section-subnav ul li.top-level a{padding-left:0}\@media (min-width:992px){nav-section-subnav h2{display:none}}nav-section-subnav .back{font-size:14px;padding-left:0;position:relative}\@media (min-width:992px){nav-section-subnav .back{display:none}}nav-section-subnav .back span{display:inline-block;height:13px;margin-right:8px;padding:12px 0;position:relative;top:1px;width:7px}nav-section-subnav .back svg{fill:#fff;height:13px;width:7px}"}}class Yh{constructor(e){t(this,e),this.profileNavIsShowing=!0,this.simpleNav=new yo(this.handleSignOut)}navTitle(){const t=this.data;return unescape((t&&t.title||"").replace("%user_name%",this.currentUser.name||""))}backgroundImageURL(){return this.currentUser&&this.currentUser.avatarUrl||""}render(){return this.profileNavIsShowing&&this.simpleNav.isObjectTruthyNonArray(this.data)?e("div",{class:"profile-nav"},e("div",{class:"profile-nav-img",style:{backgroundImage:`linear-gradient(0deg, rgba(2,0,36,1) 0%, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 100%),url('${this.backgroundImageURL()}')`}}),e("div",null,this.simpleNav.renderSections(this.data,this.navTitle()))):null}static get style(){return".give-nav,.profile-nav{font-family:acumin-pro,helvetica,arial,sans-serif!important;font-weight:300!important;color:#fff;background-color:#000;background-repeat:no-repeat;background-size:100%;height:100vh;left:0;margin-left:-15px;max-height:100vh;overflow-y:scroll;position:-webkit-sticky;position:sticky;top:48px;width:100vw;z-index:2}.give-nav div,.profile-nav div{height:auto;padding:30px 20px 90px}.give-nav a,.profile-nav a{color:#fff;display:inline-block;font-size:19px;margin-bottom:10px;padding-left:10px;text-decoration:none;text-transform:capitalize}.give-nav a.all,.profile-nav a.all{margin-bottom:30px}.give-nav a:hover,.profile-nav a:hover{color:#ccc}.give-nav h2,.profile-nav h2{font-family:acumin-pro-extra-condensed,sans-serif!important;font-weight:500!important;font-size:48px;line-height:48px;margin:0;text-transform:uppercase;margin-bottom:20px}.give-nav h4,.profile-nav h4{font-size:11px;margin:0 0 10px;opacity:.5;text-transform:uppercase}.give-nav ul,.profile-nav ul{padding-left:0;margin-top:0}.give-nav ul li,.profile-nav ul li{list-style:none}.give-nav ul li.top-level a,.profile-nav ul li.top-level a{padding-left:0}\@media (min-width:992px){.give-nav,.profile-nav{height:auto;left:auto;margin-right:-15px;position:absolute;right:15px;width:375px}}\@media (min-width:1170px){.give-nav,.profile-nav{margin-right:0}}.give-nav::-webkit-scrollbar,.profile-nav::-webkit-scrollbar{width:0}.give-nav ul:last-of-type,.profile-nav ul:last-of-type{padding-bottom:30px}.give-nav{background-image:url(https://crds-media.imgix.net/6sNxa1MWhMOfjhAB47yTCa/0acf1af4109f23abc0199b1e34abeb7a/give-bg_2x.jpg?auto=format%2Ccompress)}.profile-nav:after{background-color:rgba(0,0,0,.75);content:\" \";z-index:-1}.profile-nav .profile-nav-img,.profile-nav:after{height:100%;left:0;position:absolute;top:0;width:100%}.profile-nav .profile-nav-img{background-position:top;background-repeat:no-repeat;background-size:contain;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-filter:blur(2px);filter:blur(2px);z-index:-2}\@media (min-width:992px){.profile-nav div{padding-bottom:0}}"}}export{Ar as crds_greeting,ci as crds_heart_button,hi as crds_modal,gi as crds_recommended_content,yi as crds_shared_footer,mi as crds_shared_header,Ti as crds_site_happenings,Ci as crds_snail_trail,po as crds_snail_trail_link,vo as crds_subscribe,mo as give_nav,Bh as global_nav,Qh as nav_ctas,Wh as nav_section,$h as nav_section_subnav,Yh as profile_nav};